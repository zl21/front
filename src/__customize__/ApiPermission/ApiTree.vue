<template>
  <div class="api-tree">
    <div class="api-header">
      <p>„Äêxxx„Äë{{$t('messages.managementAuthority')}}</p>
      <Button
        type="success"
        size="small"
        @click="save"
      >{{$t('buttons.save')}}</Button>
    </div>

    <div class="api-body">
      <div class="all-pannel">
        <span>{{$t('messages.interfacePermissions')}}Ôºö</span>
        <Checkbox v-model="isSelectAll">{{$t('tips.all')}}</Checkbox>
        <span class="count">(38/38)</span>
      </div>

      <div class="api-pannel">
        <Ztree
          ref="zTree"
          :placeholder="$t('messages.pleaseEnterContent')"
          :z-nodes="treeData"
          :treeSetting="treeSetting"
          @treeSearch="search"
        ></Ztree>
      </div>

      <!-- <div class="search-pannel">
        <Input
          v-model="value"
          :placeholder="$t('messages.pleaseEnterContent')"
          suffix="ios-search"
        ></Input>
      </div>

      <div class="api-pannel">

      </div> -->

    </div>
  </div>
</template>

<script type="text/ecmascript-6">
import Ztree from '../../__component__/Ztree.vue'

export default {
  name: 'R3ApiTree',

  components: {
    Ztree
  },

  data() {
    return {
      value: '',
      isSelectAll: true,
      treeSetting: {
        check: {
          enable: true
        }
      },
      treeData: [
        {
          "ID": 2481,
          "NAME": "WSZZ01",
          "PARENT_ID": null,
        },
        {
          "CHILDREN": [
            {
              "CHILDREN": [],
              "NAME": "‰∏≠ÂõΩÂïÜÁî®È£ûÊú∫ÊúâÈôêË¥£‰ªªÂÖ¨Âè∏",
              "PARENT_ID": "1",
            },
            {
              "CHILDREN": [],
              "NAME": "ÂÖ¨Âè∏È¢ÜÂØº",
              "PARENT_ID": "10",
            }
          ],
          "NAME": "‰∏≠ÂõΩÂïÜÈ£û",
          "PARENT_ID": null,
        },
        {
          "CHILDREN": [
            {
              "CHILDREN": [],
              "NAME": "ÈòøËê®",
              "PARENT_ID": "1",
            },
            {
              "CHILDREN": [],
              "NAME": "Ê¨£ËµèÊ¨£Ëµè",
              "PARENT_ID": "10",
            }
          ],
          "NAME": "Ê¨£ËµèÊ¨£Ëµè",
          "PARENT_ID": null,
        }
      ]
    }
  },

  methods: {
    // Êü•ËØ¢ËäÇÁÇπ
    search(inputValue, searchNoData) {
      console.log('Êü•ËØ¢', inputValue, searchNoData)
    }, 

    save() {
      
    },

    updateNode() {
      const zTreeObj = this.$refs.zTree.zTreeObj
      var nodes = zTreeObj.getNodes()
      console.log("üöÄ ~ file: ApiTree.vue ~ line 116 ~ save ~ nodes", nodes)
      nodes[1].NAME = '‰∏≠ÂõΩÂïÜÈ£û Ôºà2-3Ôºâ'
      zTreeObj.updateNode(nodes[1]);
    }
  }
}
</script>

<style lang="scss" scoped>
</style>