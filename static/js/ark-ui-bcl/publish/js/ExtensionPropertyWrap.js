(self.webpackChunk$Bcl=self.webpackChunk$Bcl||[]).push([[642],{2260:(F,L,p)=>{L=F.exports=p(3645)(!1),L.push([F.id,`
.extentionObjectGroup[data-v-b8ca65a4] {
  display: flex;
  flex-direction: column;
}
`,""])},8921:(F,L,p)=>{L=F.exports=p(3645)(!1),L.push([F.id,`/* tailwind\u63D2\u4EF6\u5F03\u7528\u4E86\uFF0C\u6240\u4EE5\u628A\u4E4B\u524D\u7684\u6837\u5F0F\u76F4\u63A5\u653E\u8FD9\u91CC\u7BA1\u7406 */
.tw-inline-block {
  display: inline-block
}

.tw-flex {
  display: flex
}

.tw-flex-grow {
  flex-grow: 1
}

.tw-mt-10 {
  margin-top: 10px
}

.tw-mt-20 {
  margin-top: 20px
}

.tw-mt-4 {
  margin-top: 4px
}

.tw-mb-10 {
  margin-bottom: 10px
}

.one-line-flow {
  overflow: hidden;
  white-space: nowrap; 
  text-overflow: ellipsis; 
}

.text-right {
  text-align: right
}

.text-center {
  text-align: center
}

.text-left {
  text-align: left
}

.flex-right {
  justify-content: flex-end
}

.flex-center {
  justify-content: center
}

.flex-left {
  justify-content: flex-start
}`,""])},2162:(F,L,p)=>{"use strict";p.d(L,{Z:()=>x});var C=function(){var m=this,c=m.$createElement,_=m._self._c||c;return _("div",{staticClass:"description"},[_("div",{staticStyle:{flex:"1"}},[_("span",{staticClass:"fieldName"},[m._v(`
      `+m._s(m.option.name)+` \uFF1A
    `)]),m._v(" "),_("span",{staticClass:"content"},[m._v(`
      `+m._s(m.option.description)+`
    `)])]),m._v(" "),_("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:m.removeOption}},[_("Button",{attrs:{title:m.$t("extensionProperty.clearConfig"),icon:"iconbj_delete",type:"primary",shape:"circle"}})],1)])},N=[];C._withStripped=!0;var E=p(4174);const R={name:"Description",props:{option:{type:Object,default:()=>({})}},methods:{clearDomValue(){document.querySelector(".extentionProperty .middle").querySelectorAll("input,select").forEach(c=>{c.value="",c.type==="radio"&&c.value===""?c.checked=!0:c.checked=!1})},removeOption(){switch(this.option.type){case"input":this.$emit("removeOption",[this.option.key]);break;case"radio":this.$emit("removeOption",[this.option.key]);break;case"object-group":this.$emit("removeOption",[this.option.key]);break;case"input-group":this.option.key==="__root__"?this.$emit("removeOption",this.option.inputLists.map(m=>m.key)):this.$emit("removeOption",[this.option.key]);break;default:this.$emit("removeOption",[this.option.key]);break}this.clearDomValue()}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var A=p(1900),I=(0,A.Z)(R,C,N,!1,null,"01ff076d",null);if(!1)var $;I.options.__file="src/components/extension-property/description/Description.vue";const x=I.exports},9600:(F,L,p)=>{"use strict";p.d(L,{Z:()=>x});var C=function(){var m=this,c=m.$createElement,_=m._self._c||c;return _("div",{staticClass:"tw-mt-10"},[_("div",{staticClass:"row"},[m.rowLabel?_("div",{staticClass:"col row-title",class:[m.rowLabelClass]},[_("span",{class:[m.isRequired?"required-remark":""]},[m._v(m._s(m.rowLabel)+"\uFF1A")])]):m._e(),m._v(" "),m._t("default"),m._v(" "),m.showOperationButton?_("div",{staticClass:"col btn-group"},[m.rowCount-1===m.rowIndex?_("button",{staticClass:"operate-button",on:{click:m.addRow}},[_("i",{staticClass:"iconfont"},[m._v("\uEC3F")])]):m._e(),m._v(" "),m.rowCount>1?_("button",{staticClass:"operate-button",on:{click:m.removeRow}},[_("i",{staticClass:"iconfont"},[m._v("\uED15")])]):m._e()]):m._e()],2),m._v(" "),m.errorTip?_("div",{staticClass:"error-tip tw-mt-10"},[_("div",{staticClass:"tw-inline-block row-title label-placeholder",class:[m.rowLabelClass]}),m._v(`
    `+m._s(m.errorTip)+`
  `)]):m._e()])},N=[];C._withStripped=!0;var E=p(2995);const R={name:"",props:{rowIndex:{type:Number,default:-1},rowCount:{type:Number,default:-1},rowLabelClass:{type:String,default:""},rowLabel:{type:String,default:""},showOperationButton:{type:Boolean,default:!1},errorTip:{type:String,default:""},isRequired:{type:Boolean,default:!1}},data(){return{}},methods:{addRow(){this.$emit("addRow")},removeRow(){this.$emit("removeRow")}}};var A=p(1900),I=(0,A.Z)(R,C,N,!1,null,"52d5b9cd",null);if(!1)var $;I.options.__file="src/components/extension-property/extension-row-item/ExtensionRowItem.vue";const x=I.exports},4648:(F,L,p)=>{"use strict";p.d(L,{Z:()=>A});var C=p(2162),N=p(9600),E=p(5331),T=p(8517),R=p(4174);const A={inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{},keyForm:{type:Object,default:()=>({})}},data(){return{dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"]}},components:{Description:C.Z,ExtentionRowItem:N.Z},beforeCreate(){this.$t=R.ZP.t.bind(R.ZP)},methods:{addRow(I,$){I.push((0,E.Z)($))},removeRow(I,$){I.splice($,1)},removeOption(I){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",I||[])},commonApi(I,$,w){const{hideColumns:x,displayKeys:m}=w;return new Promise(c=>{this.network.post(I,(0,T.d)($)).then(_=>{if(_.data.code===0){const i=_.data.data.tabth,a=_.data.data.row;for(let t=Math.max(i.length-1,0);t>=0;t--){const l=i[t];m.includes(l.name)?l.isak=!0:l.isak=!1,x.includes(l.colname)&&i.splice(t,1)}x.length>0&&a.forEach(t=>{for(const l in t)x.includes(l)&&delete t[l]}),c(_.data.data)}else c({})}).catch(()=>{c({})})})},selectValue(I,$,w,x){this.$set($,w,I[0][x])},clearValue(I,$){this.$set(I,$,"")}}}},6849:(F,L,p)=>{"use strict";p.d(L,{Z:()=>x});var C=function(){var m=this,c=m.$createElement,_=m._self._c||c;return _("RadioGroup",m._g(m._b({on:{"on-change":m.radioChange},model:{value:m.formData.defaultValue,callback:function(i){m.$set(m.formData,"defaultValue",i)},expression:"formData.defaultValue"}},"RadioGroup",m.$attrs,!1),m.$listeners),m._l(m.formData.selectOptions,function(i){return _("Radio",{key:i.label,attrs:{label:i.label}})}),1)},N=[];C._withStripped=!0;var E=p(5331);const R={name:"ak-radio",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(m){this.formData=(0,E.Z)(m)},deep:!0,immediate:!0}},data(){return{formData:{}}},methods:{radioChange(m){const c=this.options.selectOptions.find(_=>_.label===m);this.$emit("change",c)}}};var A=p(1900),I=(0,A.Z)(R,C,N,!1,null,"808cc132",null);if(!1)var $;I.options.__file="src/components/radio/Radio.vue";const x=I.exports},1847:(F,L,p)=>{"use strict";p.d(L,{Z:()=>N});function C(E,T){let R=E;E.tagName!=="INPUT"&&(R=E.querySelector("input")),T.arg&&T.arg==="NUMBER"?R.onkeypress=function(I){I=I||window.event;const $=typeof I.charCode=="number"?I.charCode:I.keyCode,w=/\d/,x=[];T.modifiers.comma&&x.push(44),T.modifiers.decimal&&x.push(46),!w.test(String.fromCharCode($))&&$>9&&!I.ctrlKey&&!x.includes($)&&(I.preventDefault?I.preventDefault():I.returnValue=!1)}:R.onkeypress=function(){}}const N=C},9277:(F,L,p)=>{"use strict";p.d(L,{qq:()=>C,kJ:()=>E});function C(T,R,A){return R.find(A)[T]}function N(T){return T.length===0}function E(T){return Object.prototype.toString.call(T)==="[object Array]"}},8192:(F,L,p)=>{"use strict";p.d(L,{Ds:()=>C,mf:()=>E});function C(T,R=200){let A;return function(...I){const $=this,w=I;clearTimeout(A),A=setTimeout(()=>T.apply($,w),R)}}function N(){return window.navigator.userAgent.indexOf("MSIE")>=1}function E(T){return typeof T=="function"}},6166:(F,L,p)=>{var C=p(2260);typeof C=="string"&&(C=[[F.id,C,""]]);var N,E,T={hmr:!0};T.transform=N,T.insertInto=void 0;var R=p(6723)(C,T);C.locals&&(F.exports=C.locals)},2995:(F,L,p)=>{var C=p(8921);typeof C=="string"&&(C=[[F.id,C,""]]);var N,E,T={hmr:!0};T.transform=N,T.insertInto=void 0;var R=p(6723)(C,T);C.locals&&(F.exports=C.locals)},2168:(F,L,p)=>{"use strict";p.d(L,{Z:()=>x});var C=function(){var m=this,c=m.$createElement,_=m._self._c||c;return _("div",{ref:"radioItemWrapper",staticClass:"radioItemWrapper"},[m._l(m.option.enumerateValue,function(i,a){return _("label",{key:a,staticClass:"radioItem",attrs:{for:m.option.key+"-"+m.guid+"-"+a}},[_("input",{attrs:{id:m.option.key+"-"+m.guid+"-"+a,type:"radio",name:m.option.key+"-"+m.guid},domProps:{value:i.value},on:{change:function(t){return m.radioValueChange(i.value)}}}),m._v(`
    `+m._s(i.text)+`
  `)])}),m._v(" "),_("label",{staticClass:"radioItem",attrs:{for:m.option.key+"-"+m.guid+"-clean"}},[_("input",{attrs:{id:m.option.key+"-"+m.guid+"-clean",type:"radio",name:m.option.key+"-"+m.guid},domProps:{value:"__empty__"},on:{change:function(i){return m.radioValueChange("")}}}),m._v(" "),_("span",[m._v(`
      `+m._s(m.$t("extensionProperty.clearConfig"))+`
    `)])])],2)},N=[];C._withStripped=!0;var E=p(4174);const T=()=>Math.round(Math.random()*1e10),A={name:"EnumerateRadioItem",data(){return{guid:T()}},methods:{radioValueChange(m){this.$emit("radioValueChange",{key:this.option.key,value:m})}},props:{option:{type:Object,default:()=>({})},breakLine:{type:Boolean,default:!0},defaultData:{type:[Boolean,String],default:"__empty__"}},mounted(){this.$refs.radioItemWrapper.querySelectorAll("input[type=radio]").forEach(m=>{`${m.value}`==`${this.defaultData}`&&(m.checked=!0)})},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var I=p(1900),$=(0,I.Z)(A,C,N,!1,null,"bf498a54",null);if(!1)var w;$.options.__file="src/components/extension-property/EnumerateRadioItem.vue";const x=$.exports},8843:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>Mt});var C=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"extentionProperty tw-mt-10"},[f("div",{staticClass:"left"},[f("div",{staticClass:"search-pannel"},[f("Input",{attrs:{search:"","enter-button":e.$t("tips.find"),placeholder:e.$t("extensionProperty.enterConfig")},on:{"on-change":e.filterConfig},model:{value:e.configName,callback:function(y){e.configName=y},expression:"configName"}})],1),e._v(" "),f("ul",{staticClass:"menu-list"},[e._l(e.configList,function(y,k){return f("li",{key:k,staticClass:"menu",class:{active:k===e.currentIndex},on:{click:function(M){e.scrollIntoView(y,k)}}},[f("span",{staticClass:"config-title"},[e._v(e._s(y.name))]),e._v(" "),f("div",{staticClass:"extentionProperty-key"},[e._v(e._s(y.key==="__root__"?"":y.key))])])}),e._v(" "),e.configList.length===0?f("li",{staticStyle:{"justify-content":"center"}},[e._v(`
        `+e._s(e.$t("extensionProperty.noConfiguration"))+`
      `)]):e._e()],2)]),e._v(" "),f("div",{staticClass:"middle"},[e._l(e.configList,function(y,k){return[k===e.currentIndex?f("div",{key:y.name,staticClass:"item-render-area"},[y.type==="input"?f("ExtentionInput",{attrs:{id:y.key+"-"+k+"-"+e.guid,option:y,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key]},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="radio"?f("ExtentionRadio",{attrs:{id:y.key+"-"+k+"-"+e.guid,option:y,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key]},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="select"?f("ExtentionSelect",{attrs:{id:y.key+"-"+k+"-"+e.guid,item:y,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key]},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="input-group"?f("ExtentionInputGroup",{attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData)),option:y},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="object-group"?f("ExtentionObjectGroup",{attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key],option:y},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="object-value"?f("ExtensionObjectValue",{attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key],option:y},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="options-group"?f("ExtentionOptions",{attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key],option:y},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="keyValue"?f("KeyValueItem",{attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData)),option:y},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e(),e._v(" "),y.type==="custom"?f(y.component,{tag:"components",attrs:{id:y.key+"-"+k+"-"+e.guid,"default-data":JSON.parse(JSON.stringify(e.rootData))[y.key],option:y,keyForm:e.keyForm},on:{dataChange:e.rootDataChange,removeOption:e.removeOption}}):e._e()],1):e._e()]})],2),e._v(" "),f("div",{staticClass:"right"},[f("textarea",{attrs:{readonly:""},domProps:{value:e.formatedRootData}})])])},N=[];C._withStripped=!0;var E=p(4174),T=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"extentionCellInput"},[f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}),e._v(" "),f("div",{staticClass:"content"},[f("LabelWithInput",{attrs:{item:e.option,"default-data":e.defaultData},on:{inputValueChange:e.inputValueChange}})],1)],1)},R=[];T._withStripped=!0;var A=p(2162),I=p(9032);const w={name:"ExtentionInput",components:{Description:A.Z,LabelWithInput:I.Z},methods:{removeOption(e){this.$emit("removeOption",e||[])},inputValueChange({key:e,value:D}){this.$emit("dataChange",{key:e,value:D})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}}};var x=p(1900),m=(0,x.Z)(w,T,R,!1,null,null,null);if(!1)var c;m.options.__file="src/components/extension-property/ExtentionInput.vue";const _=m.exports;var i=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"extentionRadio"},[f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}),e._v(" "),f("div",{staticClass:"content"},[f("EnumerateRadioItem",{attrs:{"default-data":e.defaultData,option:e.option},on:{radioValueChange:e.radioValueChange}})],1)],1)},a=[];i._withStripped=!0;var t=p(2168);const n={name:"ExtentionRadio",components:{Description:A.Z,EnumerateRadioItem:t.Z},methods:{removeOption(e){this.$emit("removeOption",e||[])},radioValueChange({key:e,value:D}){this.$emit("dataChange",{key:e,value:D})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};var s=(0,x.Z)(n,i,a,!1,null,null,null);if(!1)var r;s.options.__file="src/components/extension-property/ExtentionRadio.vue";const d=s.exports;var h=p(1739),o=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"extentionObjectGroup"},[e.showDescription?f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),f("div",{staticClass:"content-row"},[e.option.showLabel?f("div",{staticClass:"left"},[f("label",[e._v(e._s(e.option.name))]),e._v(" "),f("label",[e._v(e._s(e.option.key))])]):e._e(),e._v(" "),f("div",{staticClass:"right"},e._l(e.dataArray,function(y,k){return f("div",{key:k,staticClass:"content"},[k<=e.currentIndex?f("ObjectGroupItem",{attrs:{"object-group-index":k,"default-data":e.defaultData[k]||{},data:y,option:e.option,"show-add-button":e.currentIndex===k&&e.currentIndex!==9,"show-minus-button":e.currentIndex===k&&e.currentIndex!==0},on:{objectGroupItemChange:e.objectGroupItemChange,addButtonClick:e.addButtonClick,minusButtonClick:e.minusButtonClick}}):e._e()],1)}),0)])],1)},u=[];o._withStripped=!0;var v=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"labelWithObjectGroup"},[e._l(e.option.objectInfo,function(y,k){return[y.type==="input"?f("LabelWithInput",{key:k,attrs:{item:y,"default-data":e.defaultData[y.key]},on:{inputValueChange:e.objectGroupValueChange}}):e._e(),e._v(" "),y.type==="radio"?f("LabelWithRadio",{key:k,attrs:{item:y,"default-data":e.defaultData[y.key]},on:{radioValueChange:e.objectGroupValueChange}}):e._e(),e._v(" "),y.type==="select"?f("LabelWithSelect",{key:k,attrs:{item:y,"default-data":e.defaultData[y.key]},on:{selectValueChange:e.objectGroupValueChange}}):e._e()]}),e._v(" "),e.showAddButton&&!e.currentDataIsEmpty?f("button",{staticClass:"operate-button",on:{click:e.addButtonClick}},[e._v(`
    +
  `)]):e._e(),e._v(" "),e.showMinusButton?f("button",{staticClass:"operate-button",on:{click:e.minusButtonClick}},[e._v(`
    -
  `)]):e._e()],2)},g=[];v._withStripped=!0;var b=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"input-group-item"},[f("div",{staticClass:"cell"},[f("LabelForInput",{attrs:{item:e.item}}),e._v(" "),f("EnumerateRadioItem",{attrs:{option:e.item,"break-line":!1,"default-data":e.defaultData},on:{radioValueChange:e.radioValueChange}})],1)])},S=[];b._withStripped=!0;var O=p(2702);const j={name:"LabelWithRadio",components:{LabelForInput:O.Z,EnumerateRadioItem:t.Z},methods:{radioValueChange({key:e,value:D}){this.$emit("radioValueChange",{key:e,value:D})}},props:{item:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};var Z=(0,x.Z)(j,b,S,!1,null,"67aee826",null);if(!1)var W;Z.options.__file="src/components/extension-property/LabelWithRadio.vue";const G=Z.exports,pt={name:"ObjectGroupItem",data(){return{currentData:{}}},components:{LabelWithInput:I.Z,LabelWithRadio:G,LabelWithSelect:h.Z},methods:{objectGroupValueChange({key:e,value:D}){this.currentData=Object.assign({},this.currentData,{[e]:D}),D===""&&delete this.currentData[e],this.$emit("objectGroupItemChange",this.objectGroupIndex,{key:e,value:D,belongKey:this.option.key})},addButtonClick(){this.$emit("addButtonClick",{belongKey:this.option.key})},minusButtonClick(){this.$emit("minusButtonClick",{belongKey:this.option.key})}},props:{option:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},showAddButton:{type:Boolean,default:!1},showMinusButton:{type:Boolean,default:!1},objectGroupIndex:{type:Number,default:0},defaultData:{type:Object,default:()=>({})}},computed:{currentDataIsEmpty(){return JSON.stringify(this.currentData)==="{}"}},mounted(){this.currentData=JSON.parse(JSON.stringify(this.defaultData))}};var Y=(0,x.Z)(pt,v,g,!1,null,"efbdb492",null);if(!1)var Bt;Y.options.__file="src/components/extension-property/ObjectGroupItem.vue";const ht=Y.exports,ft=e=>{const D=[];if(e<=0)return[];for(let f=0;f<e;f++)D.push({});return D},mt={name:"ExtentionObjectGroup",data(){return{currentIndex:0,dataArray:ft(10)}},components:{Description:A.Z,ObjectGroupItem:ht},methods:{removeOption(e){this.$emit("removeOption",e||[])},objectGroupItemChange(e,{key:D,value:f}){let y=JSON.parse(JSON.stringify(this.defaultData||[]));f===""?y[e]&&y[e][D]!==void 0&&(delete y[e][D],y.length===1&&e===0&&JSON.stringify(y[e])==="{}"&&y.splice(e,1)):y[e]=Object.assign({},y[e],{[D]:f}),y=JSON.parse(JSON.stringify(y)).map(k=>k||{}),this.$emit("dataChange",{key:this.option.key,value:y.length===0?"":y},e)},addButtonClick(){this.currentIndex>=9||(this.currentIndex=this.currentIndex+1)},minusButtonClick(){if(this.currentIndex<=0)return;this.currentIndex=this.currentIndex-1;const e=JSON.parse(JSON.stringify(this.defaultData||[]));e.pop(),this.$emit("dataChange",{key:this.option.key,value:e})}},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Array],default:()=>[]}},created(){this.dataArray=this.dataArray.map((e,D)=>e||this.defaultData[D]),this.currentIndex=this.defaultData.length-1>=0?this.defaultData.length-1:0}};var Zt=p(6166),z=(0,x.Z)(mt,o,u,!1,null,"b8ca65a4",null);if(!1)var Kt;z.options.__file="src/components/extension-property/ExtentionObjectGroup.vue";const H=z.exports;var Q=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"extentionInputGroup"},[f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}),e._v(" "),f("div",{staticClass:"content"},[e._l(e.option.inputLists,function(y,k){return[y.type==="input"?f("LabelWithInput",{key:k,attrs:{item:y,"default-data":e.option.key==="__root__"?e.defaultData[y.key]:e.defaultData[e.option.key]?e.defaultData[e.option.key][y.key]:""},on:{inputValueChange:e.inputGroupValueChange}}):e._e(),e._v(" "),y.type==="radio"?f("LabelWithRadio",{key:k,attrs:{item:y,index:k,"default-data":e.setDefaultData(e.option,y)},on:{radioValueChange:e.inputGroupValueChange}}):e._e(),e._v(" "),y.type==="select"?f("LabelWithSelect",{key:k,attrs:{item:y,index:k,"default-data":e.setDefaultData(e.option,y)},on:{selectValueChange:e.inputGroupValueChange}}):e._e(),e._v(" "),y.type==="object-group"?f("ExtentionObjectGroup",{key:k,attrs:{"show-description":!1,option:y,index:k,"default-data":e.option.key==="__root__"?e.defaultData[y.key]:(e.defaultData[e.option.key]||{})[y.key]},on:{dataChange:e.objectGroupValueChange}}):e._e()]})],2)],1)},vt=[];Q._withStripped=!0;const _t={name:"ExtentionInputGroup",components:{Description:A.Z,LabelWithInput:I.Z,LabelWithRadio:G,LabelWithSelect:h.Z,ExtentionObjectGroup:H},methods:{setDefaultData(e,D){return e.key==="queryrule"&&D.key==="required"?this.defaultData.webconf?this.defaultData.webconf.required:"__empty__":e.key==="__root__"?this.defaultData[D.key]:this.defaultData[e.key]?this.defaultData[e.key][D.key]:"__empty__"},removeOption(e){if(this.$emit("removeOption",e||[]),this.option.key==="queryrule"){const D="webconf",f="required";this.$emit("dataChange",{key:D,value:Object.assign(this.defaultData[D]||{},{[f]:void 0})})}},objectGroupValueChange({key:e,value:D}){if(this.option.key==="__root__")this.$emit("dataChange",{key:e,value:D});else if(this.option.key!=="__root__")if(D!=="")this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[e]:D})});else{const f=this.defaultData[this.option.key];delete f[e],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(f)==="{}"?"":f})}},inputGroupValueChange({key:e,value:D}){if(this.option.key==="__root__"){this.$emit("dataChange",{key:e,value:D});return}if(this.option.key==="queryrule"&&e==="required"){const f="webconf";if(D===""){const y=JSON.parse(JSON.stringify(this.defaultData));delete y[f][e],this.$emit("dataChange",{key:f,value:JSON.stringify(y[f])==="{}"?"":y[f]})}else this.$emit("dataChange",{key:f,value:Object.assign(this.defaultData[f]||{},{[e]:D})})}else if(D===""){const f=JSON.parse(JSON.stringify(this.defaultData));delete f[this.option.key][e],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(f[this.option.key])==="{}"?"":f[this.option.key]})}else this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[e]:D})})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})}}};var X=(0,x.Z)(_t,Q,vt,!1,null,"41c5cbd2",null);if(!1)var Gt;X.options.__file="src/components/extension-property/ExtentionInputGroup.vue";const yt=X.exports;var q=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",[e.showDescription?f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),f("div",{staticClass:"tw-mt-20 form-group"},e._l(e.option.components,function(y,k){return f("div",{key:k,staticClass:"row tw-mt-20"},[f("div",{staticClass:"label-column"},[f("p",[e._v(e._s(y.name))]),e._v(" "),f("p",[e._v("["+e._s(y.key)+"]\uFF1A")])]),e._v(" "),f("div",{staticClass:"item-column"},[f("div",{staticClass:"item-row tw-flex-grow tw-flex"},[y.type==="input"?f("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:y.inputType}],attrs:{placeholder:y.placeholder},on:{input:function(M){return e.inputChange(M,y.key)}},model:{value:e.formData[y.key],callback:function(M){e.$set(e.formData,y.key,M)},expression:"formData[component.key]"}}):e._e(),e._v(" "),y.type==="select"?f("Select",{attrs:{clearable:""},on:{"on-change":function(M){return e.selectChange(M,y.key)}}},e._l(y.selectOptions,function(M){return f("Option",{key:M.value,attrs:{value:M.value}},[e._v(`
              `+e._s(M.label)+`
            `)])}),1):e._e(),e._v(" "),y.type==="radio"?f("AKRadio",{attrs:{options:y.options},on:{change:function(M){return e.radioChange(M,y.key)}}}):e._e()],1)])])}),0)],1)},Dt=[];q._withStripped=!0;var gt=p(6849),K=p(5331),tt=p(1847),Jt=p(2995);const bt={name:"ObjectValue",directives:{inputNumber:tt.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:A.Z,AKRadio:gt.Z},data(){return{formData:null}},methods:{removeOption(e){this.initData(),this.$emit("removeOption",e||[])},initData(e){if(typeof e=="object")this.formData=(0,K.Z)(e),this.option.components.forEach(D=>{if(D.type==="radio"){const f=D.options.selectOptions.find(y=>y.value===e[D.key]);D.options.defaultValue=f.label}});else{const D={};this.option.components.forEach(f=>{D[f.key]=f.defaultValue,f.type==="radio"&&(f.options=(0,K.Z)(f.options))}),this.formData=D}},inputChange(e,D){this.formData[D]=e,this.valueChange()},radioChange(e,D){this.formData[D]=e.value,this.valueChange()},selectChange(e,D){this.formData[D]=e.value,this.valueChange()},valueChange(e){let D=!1;this.option.components.forEach(f=>{f.isClearConfig&&f.canClear&&f.canClear(this.formData)?D=!0:f.canClear&&f.canClear(this.formData)&&(this.formData[f.key]=void 0)}),Object.keys(JSON.parse(JSON.stringify(this.formData))).length===0||D?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:this.formData})}},created(){this.initData(this.defaultData)}};var et=(0,x.Z)(bt,q,Dt,!1,null,"00b13d5f",null);if(!1)var Yt;et.options.__file="src/components/extension-property/ExtensionObjectValue.vue";const Ct=et.exports;var at=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",{staticClass:"ExtentionOptions"},[e.showDescription?f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),f("div",{staticClass:"content"},[f("LabelWithInput",{attrs:{item:e.clonameOptions,"default-data":e.defaultData.colnames},on:{inputValueChange:e.inputValueChange,inputBlur:e.inputBlur}})],1),e._v(" "),e._l(e.defaultData.rules,function(y,k){return f("div",{key:k,staticClass:"itme"},e._l(e.defaultData.colnames.split(","),function(M,V){return f("p",{key:V,staticClass:"colnameItem"},[f("span",[e._v(e._s(M))])])}),0)})],2)},It=[];at._withStripped=!0;const Et={name:"ExtentionOptions",components:{Description:A.Z,LabelWithInput:I.Z},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Object],default:()=>({colnames:"",rules:[]})}},data(){return{clonameOptions:{name:this.$t("extensionProperty.conditionField"),key:"colnames",type:"input",description:this.$t("extensionProperty.controlColumnField")},clonameChange:!1}},watch:{"defaultData.colnames":function(e,D){e!==D&&!e?this.clonameChange=!0:this.clonameChange=!1}},methods:{removeOption(){this.$emit("removeOption",{})},inputBlur(){if(this.clonameChange&&this.$Modal.warning({title:this.$t("tips.warning"),content:this.$t("extensionProperty.continueChange"),mask:!0,onOk:()=>{const e="rules",D=[];this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[e]:D})})}}),this.defaultData.colnames&&(!this.defaultData.rules||this.defaultData.rules.length===0)){const e={jsonValue:{},buttons:[]};this.defaultData.colnames.split(",").map(D=>(e.jsonValue[D]=null,D)),this.$set(this.defaultData.rules,0,e),this.$emit("dataChange",{key:this.option.key,value:JSON.parse(JSON.stringify(this.defaultData))})}},inputValueChange({key:e,value:D}){if(D===""){const f=JSON.parse(JSON.stringify(this.defaultData));delete f[this.option.key][e],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(f[this.option.key])==="{}"?"":f[this.option.key]})}else{const f=JSON.parse(JSON.stringify(this.defaultData));f[e]=D,this.$emit("dataChange",{key:this.option.key,value:f})}}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var it=(0,x.Z)(Et,at,It,!1,null,"14c4fd4c",null);if(!1)var Ht;it.options.__file="src/components/extension-property/ExtentionOptions.vue";const Ot=it.exports;var st=function(){var e=this,D=e.$createElement,f=e._self._c||D;return f("div",[e.showDescription?f("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),e._l(e.option.components,function(y,k){return[!y.isShow||y.isShow&&y.isShow(e.formData)?f("div",{key:k,staticClass:"tw-mt-20 form-group"},[f("div",{staticClass:"row tw-mt-20"},[f("div",{staticClass:"label-column"},[f("p",[e._v(e._s(y.name))]),e._v(" "),f("p",[e._v("["+e._s(y.key)+"]\uFF1A")])]),e._v(" "),f("div",{staticClass:"item-column"},[f("div",{staticClass:"item-row tw-flex-grow tw-flex"},[y.type==="input"?f("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:y.inputType}],attrs:{placeholder:y.placeholder},on:{input:function(M){return e.valueChange(M,k)}},model:{value:e.formData[y.key],callback:function(M){e.$set(e.formData,y.key,M)},expression:"formData[component.key]"}}):e._e(),e._v(" "),y.type==="select"?f("Select",{attrs:{clearable:""},on:{"on-change":function(M){return e.valueChange(M,k)}},model:{value:e.formData[y.key],callback:function(M){e.$set(e.formData,y.key,M)},expression:"formData[component.key]"}},e._l(y.selectOptions,function(M){return f("Option",{key:M.value,attrs:{value:M.value}},[e._v(`
                `+e._s(M.label)+`
              `)])}),1):e._e()],1)])])]):e._e()]})],2)},St=[];st._withStripped=!0;const At={name:"KeyValueItem",directives:{inputNumber:tt.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:A.Z},data(){return{formData:{}}},methods:{removeOption(e){Object.assign(this.$data,this.$options.data.call(this)),this.option.components.forEach(D=>{this.$emit("dataChange",{key:D.key,value:""})})},initData(){this.option.components.forEach(e=>{this.formData[e.key]=void 0}),typeof this.defaultData=="object"&&(this.formData=(0,K.Z)(this.defaultData))},clearHiddenComponent(){this.option.components.forEach(e=>{e.isShow&&!e.isShow(this.formData)&&(this.formData[e.key]=void 0,this.$emit("dataChange",{key:e.key,value:""}))})},valueChange(e,D){this.clearHiddenComponent(),e?this.$emit("dataChange",{key:this.option.components[D].key,value:e}):this.$emit("dataChange",{key:this.option.components[D].key,value:""})}},created(){this.initData()}};var ot=(0,x.Z)(At,st,St,!1,null,"96f7090a",null);if(!1)var Xt;ot.options.__file="src/components/extension-property/key-value-item/KeyValueItem.vue";const Lt=ot.exports;var Tt=p(3529),nt=p(8666),Rt=p(4470),xt=Object.defineProperty,lt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,rt=(e,D,f)=>D in e?xt(e,D,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[D]=f,Nt=(e,D)=>{for(var f in D||(D={}))$t.call(D,f)&&rt(e,f,D[f]);if(lt)for(var f of lt(D))wt.call(D,f)&&rt(e,f,D[f]);return e},Pt=(e,D,f)=>new Promise((y,k)=>{var M=U=>{try{B(f.next(U))}catch(J){k(J)}},V=U=>{try{B(f.throw(U))}catch(J){k(J)}},B=U=>U.done?y(U.value):Promise.resolve(U.value).then(M,V);B((f=f.apply(e,D)).next())});const ct=p(9109),ut={};ct.keys().forEach(e=>{const D=ct(e).default;ut[D.name]=D});const kt=()=>Math.round(Math.random()*1e10),Ft={name:"ExtentionPropertyWrap",data(){return{guid:kt(),rootData:{},currentIndex:0,formatedRootData:"",configName:"",configList:[],keyForm:{},supportType:""}},components:Nt({ExtentionInput:_,ExtentionRadio:d,ExtentionSelect:h.Z,ExtentionObjectGroup:H,ExtensionObjectValue:Ct,ExtentionInputGroup:yt,ExtentionOptions:Ot,KeyValueItem:Lt},ut),props:{defaultData:{},realData:{type:[String,Object],default:()=>({})},formInfo:{type:Object,default:()=>({})},tableName:{tableName:String},extentionConfig:{type:Array,default:()=>[]},webconf:{type:Object,default:()=>({})}},computed:{options(){const e=this.tableName,D=this.keyForm,f=(0,Tt.Z)();let y=[];if((0,Rt.Q)(D))return y;if(e==="AD_COLUMN"){y=f,this.supportType&&this.supportType!=="ALL"&&(y=y.filter(V=>!V.supportType||V.supportType&&V.supportType.indexOf(this.supportType)!==-1)),this.supportType==="byPage"&&D.DISPLAYTYPE!=="image"&&(y=y.filter(V=>V.key!=="ImageSize")),this.supportType==="byPage"&&D.DISPLAYTYPE!=="doc"&&(y=y.filter(V=>!["filesLength","filesize","UploadAccept"].includes(V.key)));const k=["display","targetField"];if(y=y.filter(V=>!k.includes(V.key)),D.DESCRIPTION==="\u6269\u5C55\u5C5E\u6027"){const V=f.find(B=>B.name===this.$t("extensionProperty.displayControl"));y.push(V)}if(D.DESCRIPTION==="\u6269\u5C55\u5C5E\u6027"&&D.AD_TABLE_ID_LABEL==="AD_COLUMN"){const V=f.find(B=>B.key==="targetField");y.push(V)}if(D.DESCRIPTION==="\u8BFB\u5199\u89C4\u5219"||D.DESCRIPTION==="\u8BFB\u5199\u6253\u5370\u89C4\u5219"){const V=f.find(B=>B.name===this.$t("extensionProperty.readWriteDisplay"));y.push(V)}const M=(0,K.Z)(f.find(V=>V.name===this.$t("extensionProperty.expansionComponent")));this.supportType==="byPage"&&D.DISPLAYTYPE&&(D.DISPLAYTYPE.startsWith("textarea")||D.DISPLAYTYPE.startsWith("text"))&&D.DESCRIPTION!=="\u6269\u5C55\u5C5E\u6027"&&D.DESCRIPTION!=="\u8BFB\u5199\u89C4\u5219"&&M.components[0].selectOptions.push({label:"YearMonth",value:"YearMonth"},{label:"MonthDay",value:"MonthDay"}),y.push(M)}else if(e==="AD_TABLE"){const k=["hiddenSubtable"],M=(0,nt.Z)().filter(V=>!k.includes(V.key));if(this.$route.params.itemId!=="New"){const V=(0,nt.Z)().find(B=>B.key==="hiddenSubtable");M.push(V)}y=M}else y=this.extentionConfig;return y}},provide(){return{keyForm:this.keyForm}},watch:{defaultData:{handler(e){this.formatedRootData=this.setDisplayValue(e)},immediate:!0},realData:{handler(e){if(!e){this.rootData={};return}this.rootData=(0,K.Z)(e)},immediate:!0},options:{handler(e){this.configList=(0,K.Z)(e)}}},methods:{filterConfig(e){const D=e.target.value;if(D===""){this.configList=(0,K.Z)(this.options);return}this.configList=this.options.filter(f=>f.name.includes(D)),this.configList.length>0&&(this.currentIndex=0)},scrollIntoView(e,D){this.currentIndex=D},updateRootData(e,D){D===""?(delete this.rootData[e],this.rootData=Object.assign({},this.rootData)):this.rootData=Object.assign({},this.rootData,{[e]:D}),this.$emit("valueChange",this.rootData)},rootDataChange({key:e,value:D}){this.updateRootData(e,D)},removeOption(e){const D={};Object.keys(this.rootData).forEach(f=>{e.indexOf(f)===-1&&(D[f]=this.rootData[f])}),this.rootData=D,this.$emit("valueChange",this.rootData)},setDisplayValue(e){let D="";return Object.keys(e).length===0?D="":D=JSON.stringify(e,null,2),D}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)},created(){Object.keys(this.formInfo).length===0?this.$nextTick(()=>Pt(this,null,function*(){const e=window.vm.$_live_getChildComponent(window.vm,this.webconf.moduleName),D=window.vm.$_live_getChildComponent(e,"panelForm"),f=yield D.getFormData(),y=yield D.getFormDataLabel();if(this.keyForm={DESCRIPTION:f.DESCRIPTION,DISPLAYTYPE:f.DISPLAYTYPE,OBTAINMANNER:f.OBTAINMANNER,AD_TABLE_ID:f.AD_TABLE_ID,AD_TABLE_ID_LABEL:y.AD_TABLE_ID&&y.AD_TABLE_ID[0].Label,COLTYPE:f.COLTYPE,NAME:f.NAME},this.webconf.webconf&&this.webconf.webconf.targetField){const k=this.webconf.webconf.targetField.split(","),M=[];k.forEach(V=>{M.push(f[V])}),this.supportType=M.join(",")}})):this.keyForm=this.formInfo}};var dt=(0,x.Z)(Ft,C,N,!1,null,null,null);if(!1)var ee;dt.options.__file="src/components/extension-property/ExtensionPropertyWrap.vue";const Mt=dt.exports},2702:(F,L,p)=>{"use strict";p.d(L,{Z:()=>$});var C=function(){var w=this,x=w.$createElement,m=w._self._c||x;return m("label",{staticClass:"label"},[w._v(`
  `+w._s(w.item.name)+"\uFF1A"),m("br"),w._v("[ "+w._s(w.item.key)+` ] \xA0\xA0
`)])},N=[];C._withStripped=!0;const T={name:"LabelForInput",props:{item:{type:Object,default:()=>({})}}};var R=p(1900),A=(0,R.Z)(T,C,N,!1,null,"a0b1e4ce",null);if(!1)var I;A.options.__file="src/components/extension-property/LabelForInput.vue";const $=A.exports},9032:(F,L,p)=>{"use strict";p.d(L,{Z:()=>x});var C=function(){var m=this,c=m.$createElement,_=m._self._c||c;return _("div",{staticClass:"input-group-item"},[_("div",{staticClass:"cell"},[_("LabelForInput",{attrs:{item:m.item}}),m._v(" "),_("input",{ref:"input",staticClass:"input",attrs:{placeholder:m.$t("extensionProperty.pleaseEnter")+"["+m.item.name+"]"+(m.item.outputValueType==="Array"?"\uFF0C"+m.$t("extensionProperty.separatedByCommas"):""),type:m.item.inputType==="Number"?"number":"text"},on:{input:m.inputChange,blur:m.inputBlur}})],1),m._v(" "),m.logInfo!==""?_("div",{staticClass:"logInfo"},[m._v(`
    `+m._s(m.logInfo)+`
  `)]):m._e()])},N=[];C._withStripped=!0;var E=p(4174),T=p(2702);const A={name:"LabelWithInput",components:{LabelForInput:T.Z},methods:{inputBlur(m){let c="";if(this.item.outputValueType==="Array"&&m.target.value!=="")c=m.target.value.split(",");else if(this.item.outputValueType==="JSON"&&m.target.value!=="")try{c=JSON.parse(m.target.value),this.logInfo=""}catch(_){this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}\uFF1A${_}`;return}else this.item.inputType==="Number"?c=parseInt(m.target.value,10):c=m.target.value;this.$emit("inputBlur",{key:this.item.key,value:c})},inputChange(m){let c="";if(this.item.outputValueType==="Array"&&m.target.value!=="")c=m.target.value.split(",");else if(this.item.outputValueType==="JSON"&&m.target.value!=="")try{c=JSON.parse(m.target.value),this.logInfo=""}catch(_){this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}\uFF1A${_}`;return}else this.item.inputType==="Number"?c=parseInt(m.target.value,10)||"":c=m.target.value;this.$emit("inputValueChange",{key:this.item.key,value:c})}},data(){return{logInfo:""}},props:{item:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)},mounted(){this.item.outputValueType==="JSON"&&this.defaultData!==""?this.$refs.input.value=JSON.stringify(this.defaultData):this.$refs.input.value=this.defaultData}};var I=p(1900),$=(0,I.Z)(A,C,N,!1,null,"6bbb503c",null);if(!1)var w;$.options.__file="src/components/extension-property/LabelWithInput.vue";const x=$.exports},1739:(F,L,p)=>{"use strict";p.d(L,{Z:()=>w});var C=function(){var x=this,m=x.$createElement,c=x._self._c||m;return c("div",{staticClass:"input-group-item"},[c("div",{staticClass:"cell"},[c("LabelForInput",{attrs:{item:x.item}}),x._v(" "),c("select",{ref:"select",staticClass:"select",on:{change:x.selectValueChange}},x._l(x.item.selectOptions,function(_,i){return c("option",{key:i,domProps:{value:_.value}},[x._v(`
        `+x._s(_.text)+`
      `)])}),0)],1)])},N=[];C._withStripped=!0;var E=p(2702);const R={name:"LabelWithSelect",components:{LabelForInput:E.Z},methods:{selectValueChange(x){this.$emit("selectValueChange",{key:this.item.key,value:x.target.value})}},props:{item:{type:Object,default:()=>({})},defaultData:{default:""}},mounted(){this.defaultData&&this.defaultData==="__empty__"?this.$refs.select.value="":this.$refs.select.value=this.defaultData}};var A=p(1900),I=(0,A.Z)(R,C,N,!1,null,"58f429fa",null);if(!1)var $;I.options.__file="src/components/extension-property/LabelWithSelect.vue";const w=I.exports},2646:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>i});var C=function(){var a=this,t=a.$createElement,l=a._self._c||t;return l("div",{staticClass:"bindKey"},[l("Description",{attrs:{option:a.option},on:{removeOption:a.removeOption}}),a._v(" "),a._l(a.resultList,function(n,s){return l("div",{key:s,staticClass:"tabContent"},[l("div",{staticClass:"label-input"},[l("div",{staticClass:"required-item ml-5"},[a._v(`
        `+a._s(a.$t("extensionProperty.displayAreaField"))+`\uFF1A
      `)])]),a._v(" "),l("div",{staticClass:"target-key mb-10 ml-10"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[s].target,placeholder:a.$t("extensionProperty.enterNameInTable"),"columns-key":a.targetColumnsKey},on:{"on-popper-show":function(r){return a.getKeys(r,"target",{tableName:"AD_COLUMN"})},"on-page-change":function(r){return a.getKeys(r,"target",{tableName:"AD_COLUMN"})},"on-input-value-change":function(r){return a.getSearchKeys(r,"target",{tableName:"AD_COLUMN",groupIndex:s})},"on-fkrp-selected":function(r){return a.handlerSelected(s,"target","",r)},"on-clear":function(r){return a.handleClear(s,"target","",r)}}})],1),a._v(" "),l("p",{staticClass:"blank"}),a._v(" "),l("SlickList",{attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:n.source,callback:function(r){a.$set(n,"source",r)},expression:"item.source"}},a._l(n.source,function(r,d){return l("SlickItem",{key:d,attrs:{index:d}},[l("div",{staticClass:"colnameContent",on:{mouseenter:a.handleEnter,mouseleave:a.handleLeave}},[l("div",{staticClass:"colname"},[l("p",{staticClass:"required-item ml-5"},[a._v(`
              `+a._s(a.$t("extensionProperty.sourceField"))+`:
            `)]),a._v(" "),l("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[s].source[d][0],"columns-key":a.targetColumnsKey,placeholder:a.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(h){return a.getKeys(h,"source",{tableName:"AD_COLUMN"})},"on-page-change":function(h){return a.getKeys(h,"source",{tableName:"AD_COLUMN"})},"on-input-value-change":function(h){return a.getSearchKeys(h,"source",{tableName:"AD_COLUMN",groupIndex:s,rowIndex:d})},"on-fkrp-selected":function(h){return a.handlerSelected(s,"source",d,h,0)},"on-clear":function(h){return a.handleClear(s,"source",d,0)}}})],1),a._v(" "),l("div",{staticClass:"colname"},[l("p",{staticClass:"required-item ml-5"},[a._v(`
              `+a._s(a.$t("extensionProperty.sourceFieldOptionGroup"))+`:
            `)]),a._v(" "),l("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[s].source[d][1],"columns-key":a.sourceColumnsKey,placeholder:a.$t("extensionProperty.enterName")},on:{"on-popper-show":function(h){return a.getKeys(h,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-page-change":function(h){return a.getKeys(h,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-input-value-change":function(h){return a.getSearchKeys(h,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0,groupIndex:s,rowIndex:d})},"on-fkrp-selected":function(h){return a.handlerSelected(s,"source",d,h,1)},"on-clear":function(h){return a.handleClear(s,"source",d,1)}}})],1),a._v(" "),l("div",{staticClass:"oprate"},[l("p"),a._v(" "),n.source.length-1===Number(d)?l("button",{staticClass:"operate-button",on:{click:function(h){return a.addColname(n.source,s)}}},[l("i",{staticClass:"iconfont"},[a._v("\uEC3F")])]):a._e(),a._v(" "),n.source.length>1?l("button",{staticClass:"operate-button",on:{click:function(h){return a.deleteColname(n.source,s,d)}}},[l("i",{staticClass:"iconfont"},[a._v("\uED15")])]):a._e()])])])}),1),a._v(" "),a.resultList.length-1===s?l("button",{staticClass:"operate-button ml-10 mb-10",on:{click:a.addButtonClick}},[l("i",{staticClass:"iconfont"},[a._v("\uEC3F")])]):a._e(),a._v(" "),a.resultList.length>1?l("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(r){return a.removeButtonClick(s)}}},[l("i",{staticClass:"iconfont"},[a._v("\uED15")])]):a._e()],1)})],2)},N=[];C._withStripped=!0;var E=p(4174),T=p(6247),R=p(2162),A=p(8517),I=(a,t,l)=>new Promise((n,s)=>{var r=o=>{try{h(l.next(o))}catch(u){s(u)}},d=o=>{try{h(l.throw(o))}catch(u){s(u)}},h=o=>o.done?n(o.value):Promise.resolve(o.value).then(r,d);h((l=l.apply(a,t)).next())});const $={target:{col_id:""},source:[{col_id:"",label:""}]},x={name:"BindKey",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},components:{Description:R.Z,SlickList:T.SlickList,SlickItem:T.SlickItem},data(){return{resultList:[JSON.parse(JSON.stringify($))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,targetColumnsKey:["DBNAME"],sourceColumnsKey:["NAME"],defaultSelected:[{target:[],source:[[[],[]]]}]}},watch:{resultList:{handler(){this.syncData()},deep:!0}},created(){return I(this,null,function*(){this.init(),this.setHover()})},methods:{init(){return I(this,null,function*(){const a=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const t=[],l=[];this.defaultData.forEach(h=>{t.push(`=${h.target.col_id}`),h.source.forEach(o=>{t.push(`=${o.col_id}`),l.push(`=${o.label}`)})});let n={table:"AD_COLUMN",startindex:0,range:t.length,fixedcolumns:{ISACTIVE:["=Y"],ID:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete n.fixedcolumns.AD_TABLE_ID;const s=(yield this.requestKeysData(n)).row||[];n={table:"AD_LIMITVALUE_GROUP",startindex:0,range:l.length,fixedcolumns:{ISACTIVE:["=Y"],ID:l},column_include_uicontroller:!0,isolr:!1};const r=(yield this.requestKeysData(n)).row||[],d=[];this.defaultData.forEach((h,o)=>{d.push({target:[],source:[[[],[]]]});const u=s.find(v=>v.ID.val===h.target.col_id);d[o].target=[{ID:h.target.col_id,Label:u.DBNAME.val}],h.source.forEach((v,g)=>{d[o].source[g]=[[],[]];const b=s.find(O=>O.ID.val===v.col_id),S=r.find(O=>O.ID.val===v.label);d[o].source[g][0]=[{ID:v.col_id,Label:b.DBNAME.val}],d[o].source[g][1]=[{ID:v.label,Label:S.NAME.val}]})}),this.defaultSelected=d,this.resultList=JSON.parse(JSON.stringify(a))}else this.resultList=[JSON.parse(JSON.stringify($))]})},setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)})},setPos(a){this.tipStyle=`left: ${a.clientX+20}px;top:${a.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},removeOption(a){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",a||[])},addButtonClick(){const a=JSON.parse(JSON.stringify($));this.resultList.push(a),this.defaultSelected.push({target:[],source:[[[],[]]]})},removeButtonClick(a){this.resultList.splice(a,1),this.defaultSelected.splice(a,1)},addColname(a,t){a.push({col_id:"",label:""}),this.defaultSelected[t].source.push([[],[]])},deleteColname(a,t,l){a.splice(l,1),this.defaultSelected[t].source.splice(l,1)},getKeys(a,t,l){return I(this,null,function*(){const{tableName:n,deleteTableId:s}=l;let r=0;typeof a=="number"&&(r=(a-1)*this.pageSize);const{itemId:d}=this.$route.params,h={table:n,startindex:r,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[d]},column_include_uicontroller:!0,isolr:!1};(d==="New"||s)&&delete h.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(h),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(a,t,l){return I(this,null,function*(){const{tableName:n,deleteTableId:s}=l;if(a===""){this.searchKeyList=[];return}const{itemId:r}=this.$route.params,d={table:n,startindex:0,fixedcolumns:{AD_TABLE_ID:[r],ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};n==="AD_COLUMN"?d.fixedcolumns.DBNAME=a:d.fixedcolumns.NAME=a,(r==="New"||s)&&delete d.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout(()=>I(this,null,function*(){const h=(yield this.requestKeysData(d)).row||[];this.searchKeyList=h.map(o=>(Object.keys(o).forEach(u=>{o[u]=o[u].val}),o))}),200)):this.timer=setTimeout(()=>I(this,null,function*(){const h=(yield this.requestKeysData(d)).row||[];this.searchKeyList=h.map(o=>(Object.keys(o).forEach(u=>{o[u]=o[u].val}),o))}),200)})},requestKeysData(a){return I(this,null,function*(){return new Promise(t=>{this.network.post("/p/cs/QueryList",(0,A.d)({searchdata:a})).then(l=>{if(l.data.code===0){const n=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],s=l.data.data.tabth,r=l.data.data.row;for(let d=Math.max(s.length-1,0);d>=0;d--){const h=s[d];h.colname==="DBNAME"?h.isak=!0:h.isak=!1,n.includes(h.colname)&&s.splice(d,1)}r.forEach(d=>{for(const h in d)n.includes(h)&&delete d[h]}),t(l.data.data)}else t({})}).catch(()=>{t({})})})})},handlerSelected(a,t,l,n,s){if(t==="target"){const r={col_id:n[0].ID,label:n[0].Label};this.resultList[a][t]=r,this.defaultSelected[a][t]=n}if(t==="source")if(n[0].Label=n[0].Label?n[0].Label:n[0].rowItem.NAME.val,s===0){const r={col_id:n[0].ID},d=this.resultList[a][t][l]||$.source;this.defaultSelected[a][t][l][0]=n,this.$set(this.resultList[a][t],l,Object.assign(d,r))}else{const r={label:n[0].ID},d=this.resultList[a][t][l]||$.source;this.defaultSelected[a][t][l][1]=n,this.$set(this.resultList[a][t],l,Object.assign(d,r))}},setDisplayData(a){const t=JSON.parse(JSON.stringify(a));for(let l=Math.max(t.length-1,0);l>=0;l--){const n=t[l];delete n.target.defaultselected,delete n.target.label;for(let s=Math.max(n.source.length-1,0);s>=0;s--){const r=n.source[s];delete r.defaultselected,(!r.col_id||!r.label)&&n.source.splice(s,1)}(!n.target.col_id||n.source.length===0)&&t.splice(l,1)}return t},syncData(){const a=JSON.parse(JSON.stringify(this.resultList)),t=this.setDisplayData(a);t.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:t})},handleClear(a,t,l,n){t==="target"?this.resultList[a][t]={}:n===0?this.resultList[a][t][l].col_id="":this.resultList[a][t][l].label=""}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var m=p(1900),c=(0,m.Z)(x,C,N,!1,null,"f4a6dfa0",null);if(!1)var _;c.options.__file="src/components/extension-property/custom/BindKey.vue";const i=c.exports},203:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>c});var C=function(){var _=this,i=_.$createElement,a=_._self._c||i;return a("div",{staticClass:"ak-date-shortcut"},[a("Description",{attrs:{option:_.option},on:{removeOption:_.removeOption}}),_._v(" "),a("div",{staticClass:"form-group"},_._l(_.formData,function(t,l){return a("ExtentionRowItem",{key:l,attrs:{"row-index":l,"row-count":_.formData.length,"show-operation-button":""},on:{addRow:function(n){return _.addRow(_.formData,{key:"",value:""})},removeRow:function(n){return _.removeRow(_.formData,l)}}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:_.$t("extensionProperty.enterDateDesc")},model:{value:t.key,callback:function(n){_.$set(t,"key",n)},expression:"rowObj.key"}})],1),_._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:_.$t("extensionProperty.enterValue")},model:{value:t.value,callback:function(n){_.$set(t,"value",n)},expression:"rowObj.value"}})],1)])}),1)],1)},N=[];C._withStripped=!0;var E=p(4648),T=p(9600),R=p(5331);const A={key:"",value:""},$={name:"DateShortcut",mixins:[E.Z],components:{ExtentionRowItem:T.Z},data(){return{formData:[(0,R.Z)(A)]}},watch:{formData:{handler(_){const i=this.filterForm(_);i.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:i})},deep:!0}},methods:{filterForm(_){const i=(0,R.Z)(_);for(let a=i.length-1;a>=0;a--){const t=i[a];(!t.key||!t.value)&&i.splice(a,1)}return i},init(){!this.defaultData||(this.formData=(0,R.Z)(this.defaultData))}},created(){this.init()}};var w=p(1900),x=(0,w.Z)($,C,N,!1,null,"661a2a94",null);if(!1)var m;x.options.__file="src/components/extension-property/custom/DateShortcut.vue";const c=x.exports},539:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>_});var C=function(){var i=this,a=i.$createElement,t=i._self._c||a;return t("div",{staticClass:"R3ButtonConfig"},[t("Description",{attrs:{option:i.option},on:{removeOption:i.removeOption}}),i._v(" "),i._l(i.dataList,function(l,n){return t("div",{key:n,staticClass:"group"},[t("div",{staticClass:"row border-b pt-10"},[t("div",{staticClass:"name required-item"},[i._v(`
        `+i._s(i.$t("extensionProperty.buttonName"))+`\uFF1A
      `)]),i._v(" "),t("div",{staticClass:"item",staticStyle:{flex:"50% 0 0"}},[t("DropDownSelectFilter",{attrs:{single:"",data:i.keyList,"auto-data":i.searchKeyList,"page-size":i.pageSize,"total-row-count":i.totalCount,"is-back-row-item":"","columns-key":i.actionColumnsKey,"default-selected":i.defaultSelected[n].action_id,placeholder:i.$t("extensionProperty.enterButtonName")},on:{"on-popper-show":function(s){return i.getKeys(s,{key:"action_id"})},"on-page-change":function(s){return i.getKeys(s,{key:"action_id"})},"on-input-value-change":function(s){return i.getSearchKeys(s,{key:"action_id"})},"on-fkrp-selected":function(s){return i.handlerSelected(s,{groupIndex:n,key:"action_id"})},"on-clear":function(s){return i.handleClear("action_id",n)}}})],1)]),i._v(" "),t("div",{staticClass:"header"},[t("p",{staticClass:"title"},[t("span",[i._v(i._s(i.$t("extensionProperty.field")))])]),i._v(" "),t("p",{staticClass:"title"},[t("span",[i._v(i._s(i.$t("extensionProperty.value")))])])]),i._v(" "),i._l(l.filter,function(s,r){return t("div",{key:r,staticClass:"row"},[t("div",{staticClass:"name"},[i._v(`
        `+i._s(i.$t("extensionProperty.condition"))+i._s(r+1)+`\uFF1A
      `)]),i._v(" "),t("div",{staticClass:"item"},[t("DropDownSelectFilter",{attrs:{single:"",data:i.keyList,"auto-data":i.searchKeyList,"page-size":i.pageSize,"total-row-count":i.totalCount,"is-back-row-item":"","columns-key":i.columnsKey,"default-selected":i.defaultSelected[n].filter[r],placeholder:i.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(d){return i.getKeys(d,{key:"filter"})},"on-page-change":function(d){return i.getKeys(d,{key:"filter"})},"on-input-value-change":function(d){return i.getSearchKeys(d,{key:"filter"})},"on-fkrp-selected":function(d){return i.handlerSelected(d,{groupIndex:n,rowIndex:r,key:"filter"})},"on-clear":function(d){return i.handleClear("filter",n,r)}}})],1),i._v(" "),t("div",{staticClass:"item"},[t("Input",{attrs:{placeholder:i.$t("extensionProperty.enterValueWithComma")},model:{value:s.match_value,callback:function(d){i.$set(s,"match_value",d)},expression:"row.match_value"}})],1),i._v(" "),t("div",{staticClass:"btn-wrap"},[l.filter.length-1===r?t("button",{staticClass:"operate-button",on:{click:function(d){return i.addRow(l.filter,n)}}},[t("i",{staticClass:"iconfont"},[i._v("\uEC3F")])]):i._e(),i._v(" "),l.filter.length>1?t("button",{staticClass:"operate-button",on:{click:function(d){return i.delRow(l.filter,n,r)}}},[t("i",{staticClass:"iconfont"},[i._v("\uED15")])]):i._e()])])}),i._v(" "),t("div",{staticClass:"group-btn"},[i.dataList.length-1===n?t("button",{staticClass:"operate-button",on:{click:i.addGroup}},[t("i",{staticClass:"iconfont"},[i._v("\uEC3F")])]):i._e(),i._v(" "),i.dataList.length>1?t("button",{staticClass:"operate-button",on:{click:function(s){return i.delGroup(n)}}},[t("i",{staticClass:"iconfont"},[i._v("\uED15")])]):i._e()])],2)})],2)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(8517),A=(i,a,t)=>new Promise((l,n)=>{var s=h=>{try{d(t.next(h))}catch(o){n(o)}},r=h=>{try{d(t.throw(h))}catch(o){n(o)}},d=h=>h.done?l(h.value):Promise.resolve(h.value).then(s,r);d((t=t.apply(i,a)).next())});const I={action_id:"",filter:[{col_id:"",match_value:""}]},w={name:"DisableButton",inject:["network"],components:{Description:T.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]}},data(){return{keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],dataList:[JSON.parse(JSON.stringify(I))],currentGroupIndex:0,currentRowIndex:0,actionColumnsKey:["DESCRIPTION"],defaultSelected:[{action_id:[],filter:[[]]}]}},watch:{dataList:{handler(){this.syncData()},deep:!0}},created(){return A(this,null,function*(){const{itemId:i}=this.$route.params;this._table_id_=i,this.init()})},methods:{init(){return A(this,null,function*(){const i=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const a=[],t=[];i.forEach(d=>{a.push(`=${d.action_id}`),d.filter.forEach(h=>{t.push(`=${h.col_id}`)})});let l={table:"AD_ACTION",startindex:0,range:a.length,fixedcolumns:{ISACTIVE:["=Y"],ID:a,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID;const n=(yield this.requestKeysData(l)).row||[];l={table:"AD_COLUMN",startindex:0,range:t.length,fixedcolumns:{ISACTIVE:["=Y"],ID:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1},this._table_id_||delete l.fixedcolumns.AD_TABLE_ID;const s=(yield this.requestKeysData(l)).row||[],r=[];i.forEach((d,h)=>{const o=n.find(u=>u.ID.val===d.action_id);r.push({action_id:[{ID:o.ID.val,Label:o.DESCRIPTION.val}],filter:[]}),d.filter.forEach(u=>{const v=s.find(g=>g.ID.val===u.col_id);r[h].filter.push([{ID:v.ID.val,Label:v.DBNAME.val}])})}),this.defaultSelected=r,this.dataList=i}else this.dataList=[JSON.parse(JSON.stringify(I))]})},addRow(i,a){const t=JSON.parse(JSON.stringify(I.filter[0]));i.push(t),this.defaultSelected[a].filter.push([])},delRow(i,a,t){i.splice(t,1),this.defaultSelected[a].filter.splice(a,1)},addGroup(){const i=JSON.parse(JSON.stringify(I));this.dataList.push(i),this.defaultSelected.push({action_id:[],filter:[[]]})},delGroup(i){this.dataList.splice(i,1),this.defaultSelected.splice(i,1)},removeOption(i){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",i||[])},getKeys(i,a){return A(this,null,function*(){const{key:t}=a,{itemId:l}=this.$route.params;let n=0,s=null;typeof i=="number"&&(n=(i-1)*this.pageSize),t==="action_id"&&(s={table:"AD_ACTION",startindex:n,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[l]},column_include_uicontroller:!0,isolr:!1}),t==="filter"&&(s={table:"AD_COLUMN",startindex:n,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[l]},column_include_uicontroller:!0,isolr:!1}),l==="New"&&delete s.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(s,t),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(i,a){return A(this,null,function*(){const{key:t}=a,{itemId:l}=this.$route.params;let n=null;if(i===""){this.searchKeyList=[];return}t==="action_id"&&(n={table:"AD_ACTION",startindex:0,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[l],DESCRIPTION:i},column_include_uicontroller:!0,isolr:!1}),t==="filter"&&(n={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[l],DBNAME:i},column_include_uicontroller:!0,isolr:!1},l==="New"&&delete n.fixedcolumns.AD_TABLE_ID);const s=()=>A(this,null,function*(){const r=(yield this.requestKeysData(n,t)).row||[];this.searchKeyList=r.map(d=>(Object.keys(d).forEach(h=>{d[h]=d[h].val}),d))});this.timer?(clearTimeout(this.timer),this.timer=setTimeout(s,200)):this.timer=setTimeout(s,200)})},requestKeysData(i,a){return A(this,null,function*(){return new Promise(t=>{this.network.post("/p/cs/QueryList",(0,R.d)({searchdata:i})).then(l=>{if(l.data.code===0){const r=a==="action_id"?["NAME","PRIORITY","AD_VERSION_ID","CUSTOMIZENO","ISACTIVE","ISHIDE","ISREFRSH","AD_SUBSYSTEM_ID","AD_TABLECATEGORY_ID","FILTER","CUSCOMPONENT","PROPS","MODIFIERNAME","MODIFIEDDATE","AD_ACTION_ID"]:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],d=l.data.data.tabth,h=l.data.data.row;for(let o=Math.max(d.length-1,0);o>=0;o--){const u=d[o],v=a==="action_id"?"DESCRIPTION":"DBNAME";u.colname===v?u.isak=!0:u.isak=!1,r.includes(u.colname)&&d.splice(o,1)}h.forEach(o=>{for(const u in o)r.includes(u)&&delete o[u]}),t(l.data.data)}else t({})}).catch(()=>{t({})})})})},handlerSelected(i,a){const{groupIndex:t,rowIndex:l,key:n}=a;n==="action_id"&&(this.dataList[t].action_id=i[0].ID,this.defaultSelected[t].action_id=i),n==="filter"&&(this.dataList[t].filter[l].col_id=i[0].ID,this.defaultSelected[t].filter[l]=i)},handleClear(i,a,t){i==="action_id"&&(this.dataList[a].action_id=""),i==="filter"&&(this.dataList[a].filter[t].col_id="")},setDisplayData(i){const a=JSON.parse(JSON.stringify(i));for(let t=Math.max(a.length-1,0);t>=0;t--){const l=a[t];delete l.defaultselected;for(let n=Math.max(l.filter.length-1,0);n>=0;n--){const s=l.filter[n];delete s.defaultselected,(!s.col_id||!s.match_value)&&l.filter.splice(n,1)}(!l.action_id||l.filter.length===0)&&a.splice(t,1)}return a},syncData(){const i=JSON.parse(JSON.stringify(this.dataList)),a=this.setDisplayData(i);a.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:a})}},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var x=p(1900),m=(0,x.Z)(w,C,N,!1,null,"92d4a1f0",null);if(!1)var c;m.options.__file="src/components/extension-property/custom/DisableButton.vue";const _=m.exports},1953:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>n});var C=function(){var s=this,r=s.$createElement,d=s._self._c||r;return d("div",[s.showDescription?d("Description",{attrs:{option:s.option},on:{removeOption:s.removeOption}}):s._e(),s._v(" "),d("div",{staticClass:"form-group"},[d("ExtentionRowItem",{attrs:{"row-label":s.$t("extensionProperty.sourceField"),"is-required":"","row-label-class":"rowLabel","error-tip":s.fieldValidateTips}},[d("div",{staticClass:"col"},[d("div",{staticClass:"row"},[d("DropDownSelectFilter",{staticStyle:{width:"100%"},attrs:{single:"",data:s.dropList,"auto-data":s.searchList,"page-size":s.pageSize,"total-row-count":s.totalCount,"columns-key":s.columnsKey,hidecolumns:s.hidecolumns,placeholder:s.$t("extensionProperty.selectSourceField"),"default-selected":s.defaultFields},on:{"on-popper-show":s.getSearchData,"on-page-change":s.getSearchData,"on-input-value-change":s.inputSearchData,"on-fkrp-selected":function(h){return s.selectValue(h)},"on-clear":s.clearTableName}})],1)])]),s._v(" "),d("ExtentionRowItem",{attrs:{"row-label":s.$t("extensionProperty.correspondence"),"is-required":"","row-label-class":"rowLabel"}},[d("div",{staticClass:"col"},[s._l(s.formData.list,function(h,o){return d("div",{key:o,staticClass:"row"},[d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:s.$t("extensionProperty.enterOptionKey")},on:{"on-blur":s.validCondition},model:{value:h.key,callback:function(u){s.$set(h,"key",u)},expression:"row.key"}})],1),s._v(" "),d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:s.$t("extensionProperty.enterOptionValue")},on:{"on-blur":s.validCondition},model:{value:h.value,callback:function(u){s.$set(h,"value",u)},expression:"row.value"}})],1),s._v(" "),d("div",{staticClass:"col btn-group"},[s.formData.list.length-1===o?d("button",{staticClass:"operate-button",on:{click:s.addRow}},[d("i",{staticClass:"iconfont"},[s._v("\uEC3F")])]):s._e(),s._v(" "),s.formData.list.length>1?d("button",{staticClass:"operate-button",on:{click:function(u){return s.removeRow(o)}}},[d("i",{staticClass:"iconfont"},[s._v("\uED15")])]):s._e()])])}),s._v(" "),s.conditionValidateTips?d("div",{staticClass:"tip"},[s._v(`
          `+s._s(s.conditionValidateTips)+`
        `)]):s._e()],2)])],1)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(9600),A=p(5331),I=p(4470),$=p(8192),w=p(8517),x=(s,r,d)=>new Promise((h,o)=>{var u=b=>{try{g(d.next(b))}catch(S){o(S)}},v=b=>{try{g(d.throw(b))}catch(S){o(S)}},g=b=>b.done?h(b.value):Promise.resolve(b.value).then(u,v);g((d=d.apply(s,r)).next())});const m={key:"",value:""},c={col:"",map:{},list:[m]},i={name:"FilterColVal",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:T.Z,ExtentionRowItem:R.Z},watch:{formData:{handler(s){const r=this.filterForm(s);(0,I.Q)(r)?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:r})},deep:!0}},data(){return{formData:(0,A.Z)(c),fieldValidateTips:"",conditionValidateTips:"",defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}},methods:{filterForm(s){const r=(0,A.Z)(s),d={};return r.list.forEach(h=>{h.key&&h.value&&(d[h.key]=h.value.split(","))}),!r.col||(0,I.Q)(d)?{}:(r.map=d,delete r.list,r)},removeOption(s){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",s||[])},addRow(){this.formData.list.push((0,A.Z)(m))},removeRow(s){this.formData.list.splice(s,1)},validField(){this.formData.col?this.fieldValidateTips="":this.fieldValidateTips=this.$t("extensionProperty.enterSourceField")},validCondition(){const s=this.formData.list.some(r=>r.key&&r.value);this.conditionValidateTips=s?"":this.$t("extensionProperty.correspondenceIsRequired")},commonApi(s,r,d){const{hideColumns:h,displayKeys:o,bindId:u}=d;return new Promise(v=>{this.network.post(s,(0,w.d)(r)).then(g=>{if(g.data.code===0){const b=g.data.data.tabth,S=g.data.data.row;for(let O=Math.max(b.length-1,0);O>=0;O--){const P=b[O];o.includes(P.colname)?P.isak=!0:P.isak=!1,h.includes(P.colname)&&b.splice(O,1)}h.length>0&&S.forEach(O=>{for(const P in O)h.includes(P)&&delete O[P]}),v(g.data.data)}else v({})}).catch(()=>{v({})})})},getKeyList(s){return x(this,null,function*(){return new Promise(r=>{const d=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],h="/p/cs/QueryList",o=this.commonApi(h,{searchdata:s},{hideColumns:d,displayKeys:["DBNAME"]});r(o)})})},getSearchData(s){return x(this,null,function*(){let r=0;typeof s=="number"&&(r=(s-1)*this.pageSize);const d={table:"AD_COLUMN",startindex:r,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete d.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(d),this.totalCount=this.dropList.totalRowCount})},selectValue(s){this.formData.col=s.map(r=>r.Label).join(","),this.validField()},clearTableName(){this.formData.col="",this.validField()},inputSearchData:(0,$.Ds)(function(s){if(s===""){this.searchList=[];return}const r={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:s,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete r.fixedcolumns.AD_TABLE_ID,this.getKeyList(r).then(d=>{const h=d.row||[];this.searchList=h.map(o=>(Object.keys(o).forEach(u=>{o[u]=o[u].val}),o)),this.totalCount=this.dropList.totalRowCount})}),getFieldDefaultValue(){return x(this,null,function*(){const s=this.defaultData.col,r={table:"AD_COLUMN",startindex:0,range:1,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:s,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete r.fixedcolumns.AD_TABLE_ID;const d=(yield this.getKeyList(r)).row||[];this.defaultFields=[{ID:d[0].ID.val,Label:d[0].DBNAME.val}]})},init(){const s=(0,A.Z)(this.defaultData);if((0,I.Q)(s))return;const r=[];Object.keys(s.map).forEach(d=>{r.push({key:d,value:s.map[d].join(",")})}),s.list=r,this.formData=s,this.getFieldDefaultValue()}},created(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var a=p(1900),t=(0,a.Z)(i,C,N,!1,null,"4b364d8a",null);if(!1)var l;t.options.__file="src/components/extension-property/custom/FilterColVal.vue";const n=t.exports},9423:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>a});var C=function(){var t=this,l=t.$createElement,n=t._self._c||l;return n("div",[t.showDescription?n("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("ExtentionRowItem",{attrs:{"is-required":"","row-label":t.$t("extensionProperty.assignValues"),"error-tip":t.fieldValidateTip}},[n("div",{staticClass:"col"},[n("DropDownSelectFilter",{attrs:{single:!1,data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,placeholder:t.$t("extensionProperty.selectKnownField"),"default-selected":t.defaultFields},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(s){return t.selectTable(s)},"on-clear":t.clearTableName}})],1),t._v(" "),n("div",{staticClass:"col"},[n("Input",{attrs:{placeholder:t.$t("extensionProperty.enterApi")},on:{"on-blur":t.validateField},model:{value:t.formData.url,callback:function(s){t.$set(t.formData,"url",s)},expression:"formData.url"}})],1)])],1)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(9600),A=p(5331),I=p(8192),$=p(8517),w=(t,l,n)=>new Promise((s,r)=>{var d=u=>{try{o(n.next(u))}catch(v){r(v)}},h=u=>{try{o(n.throw(u))}catch(v){r(v)}},o=u=>u.done?s(u.value):Promise.resolve(u.value).then(d,h);o((n=n.apply(t,l)).next())});const m={name:"FormRequest",components:{Description:T.Z,ExtentionRowItem:R.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},data(){return{formData:{refcolumn:"",url:""},defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}},inject:["network"],watch:{formData:{handler(t){const l=this.filterForm(t);Object.keys(l).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{filterForm(t){let l=(0,A.Z)(t);return(l.refcolumn===""||l.url==="")&&(l={}),l},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},selectTable(t){this.formData.refcolumn=t.map(l=>l.Label).join(","),this.validateField()},clearTableName(){this.formData.refcolumn="",this.validateField()},validateField(){const t=(0,A.Z)(this.formData);t.refcolumn===""||t.url===""?this.fieldValidateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.fieldValidateTip=""},getSearchData(t){return w(this,null,function*(){let l=0;typeof t=="number"&&(l=(t-1)*this.pageSize);const n={table:"AD_COLUMN",startindex:l,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete n.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(n),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,I.Ds)(function(t){if(t===""){this.searchList=[];return}const l={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.getKeyList(l).then(n=>{const s=n.row||[];this.searchList=s.map(r=>(Object.keys(r).forEach(d=>{r[d]=r[d].val}),r)),this.totalCount=this.dropList.totalRowCount})}),commonApi(t,l,n){const{hideColumns:s,displayKeys:r,bindId:d}=n;return new Promise(h=>{this.network.post(t,(0,$.d)(l)).then(o=>{if(o.data.code===0){const u=o.data.data.tabth,v=o.data.data.row;for(let g=Math.max(u.length-1,0);g>=0;g--){const b=u[g];r.includes(b.colname)?b.isak=!0:b.isak=!1,s.includes(b.colname)&&u.splice(g,1)}s.length>0&&v.forEach(g=>{for(const b in g)s.includes(b)&&delete g[b]}),h(o.data.data)}else h({})}).catch(()=>{h({})})})},getKeyList(t){return w(this,null,function*(){return new Promise(l=>{const n=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],s="/p/cs/QueryList",r=this.commonApi(s,{searchdata:t},{hideColumns:n,displayKeys:["DBNAME"]});l(r)})})},getFieldDefaultValue(){return w(this,null,function*(){if(Object.keys(this.defaultData).length===0)return;const t=this.defaultData.refcolumn.split(","),n={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t.join(","),AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete n.fixedcolumns.AD_TABLE_ID;const s=(yield this.getKeyList(n)).row||[],r=[];t.forEach(d=>{const h=s.find(o=>o.DBNAME.val===d);r.push({ID:h.ID.val,Label:d})}),this.defaultFields=r})},init(){const t=(0,A.Z)(this.defaultData);Object.keys(t).length>0&&(this.formData=t)}},created(){return w(this,null,function*(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()})},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var c=p(1900),_=(0,c.Z)(m,C,N,!1,null,"2b3b94f9",null);if(!1)var i;_.options.__file="src/components/extension-property/custom/FormRequest.vue";const a=_.exports},7225:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>a});var C=function(){var t=this,l=t.$createElement,n=t._self._c||l;return n("div",{staticClass:"ak-hidden-subtable"},[n("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),Object.keys(t.formData).length>0?t._l(t.formData,function(s,r){return n("div",{key:s.tableId,staticClass:"form-group"},[n("h4",[t._v(t._s(t.$t("extensionProperty.subtable"))+"-"+t._s(r))]),t._v(" "),t._l(s,function(d,h){return n("ExtentionRowItem",{key:h,attrs:{"row-index":h,"row-count":s.length,"row-label":""+t.$t("extensionProperty.condition")+h,"show-operation-button":""},on:{addRow:function(o){return t.addRow(s,t.ROW_ITEM)},removeRow:function(o){return t.removeRow(s,h)}}},[n("div",{staticClass:"col"},[n("DropDownSelectFilter",{attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,"default-selected":t.defaultFields[r]?t.defaultFields[r][h]:void 0,placeholder:t.$t("extensionProperty.selectField")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(o){return t.selectValue(o,d,"colName","Label")},"on-clear":function(o){return t.clearValue(d,"colName")}}})],1),t._v(" "),n("div",{staticClass:"col"},[n("Input",{attrs:{placeholder:t.$t("extensionProperty.enterValue")},model:{value:d.value,callback:function(o){t.$set(d,"value",o)},expression:"condition.value"}})],1)])})],2)}):[n("h2",{staticClass:"text-center"},[t._v(t._s(t.$t("extensionProperty.associateSubtable")))])]],2)},N=[];C._withStripped=!0;var E=p(4174),T=p(8517),R=p(4648),A=p(5331),I=p(8192),$=(t,l,n)=>new Promise((s,r)=>{var d=u=>{try{o(n.next(u))}catch(v){r(v)}},h=u=>{try{o(n.throw(u))}catch(v){r(v)}},o=u=>u.done?s(u.value):Promise.resolve(u.value).then(d,h);o((n=n.apply(t,l)).next())});const w={colName:"",value:""},m={name:"HiddenSubtable",mixins:[R.Z],data(){return{formData:[],ROW_ITEM:w,defaultFields:{}}},watch:{formData:{handler(t){const l=this.filterForm(t);l===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{init(){return $(this,null,function*(){const t=yield this.getSubTables();if(!this.defaultData){this.formData=t;return}const l=[];for(let d in this.defaultData)this.defaultData[d].forEach(o=>{o.colName&&l.push(`=${o.colName}`)});const n={table:"AD_COLUMN",startindex:0,range:l.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:l,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete n.fixedcolumns.AD_TABLE_ID;const s=(yield this.getKeyList(n)).row||[],r={};for(let d in t)if(this.defaultData[d]){t[d]=(0,A.Z)(this.defaultData[d]);const h=this.defaultData[d];r[d]={},h.forEach((o,u)=>{if(o.colName){const v=s.find(g=>g.DBNAME.val===o.colName);r[d][u]=[{Label:o.colName,ID:v.ID.val}]}})}this.formData=(0,A.Z)(t),this.defaultFields=r})},removeOption(t){return $(this,null,function*(){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[]),this.formData=yield this.getSubTables()})},filterForm(t){const l=(0,A.Z)(t);if(Object.keys(l).length===0)return"";for(let n in l){const s=l[n];for(let r=s.length-1;r>=0;r--){const d=s[r];(!d.colName||!d.value)&&s.splice(r,1)}s.length===0&&delete l[n]}return Object.keys(l).length===0?"":l},getSubTables(){return $(this,null,function*(){const t="/p/cs/objectTableItem",l={table:"AD_REFBYTABLE",objid:this.$route.params.itemId,mainTableName:"AD_TABLE",refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,fixedcolumns:{}}};return yield this.network.post(t,(0,T.d)(l)).then(s=>{const r={};return s.data.data.row.filter(h=>h.ISACTIVE.val==="\u662F").forEach(h=>{r[h.AD_REFBY_TABLE_ID.val]=[(0,A.Z)(w)]}),r})})},getSearchData(t){return $(this,null,function*(){let l=0;typeof t=="number"&&(l=(t-1)*this.pageSize);const n={table:"AD_COLUMN",startindex:l,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete n.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(n),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,I.Ds)(function(t){if(t===""){this.searchList=[];return}const l={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.getKeyList(l).then(n=>{const s=n.row||[];this.searchList=s.map(r=>(Object.keys(r).forEach(d=>{r[d]=r[d].val}),r)),this.totalCount=this.dropList.totalRowCount})}),getKeyList(t){return $(this,null,function*(){return new Promise(l=>{const n=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],s="/p/cs/QueryList",r=this.commonApi(s,{searchdata:t},{hideColumns:n,displayKeys:["\u8868\u5185\u540D\u79F0"]});l(r)})})}},created(){this._table_name_=this.keyForm.NAME,this._table_id_=this.$route.params.itemId==="New"?null:this.$route.params.itemId,this._table_name_&&this.init()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var c=p(1900),_=(0,c.Z)(m,C,N,!1,null,"1ec1497a",null);if(!1)var i;_.options.__file="src/components/extension-property/custom/HiddenSubtable.vue";const a=_.exports},5453:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>m});var C=function(){var c=this,_=c.$createElement,i=c._self._c||_;return i("div",{staticClass:"highlight-wrap"},[i("Description",{attrs:{option:c.option},on:{removeOption:c.removeOption}}),c._v(" "),i("div",{},[i("ExtentionRowItem",{attrs:{"row-label":""+c.$t("tips.scope")}},[i("Select",{on:{"on-change":c.handleChange},model:{value:c.formData.scope,callback:function(a){c.$set(c.formData,"scope",a)},expression:"formData.scope"}},c._l(c.scopeOptions,function(a){return i("Option",{key:a.value,attrs:{value:a.value}},[c._v(`
          `+c._s(a.label)+`
        `)])}),1)],1),c._v(" "),i("div",{staticClass:" highlight-rules"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"tw-mb-10"},[i("span",[c._v(c._s(c.$t("extensionProperty.value"))+"\xA0\xA0\xA0\uFF1A")]),c._v(" "),i("i-switch",{on:{"on-change":c.valueChange},model:{value:c.formData.value,callback:function(a){c.$set(c.formData,"value",a)},expression:"formData.value"}})],1),c._v(" "),c.formData.value?[i("span",{staticClass:"tw-mt-10"},[c._v(c._s(c.$t("tips.rule"))+"\uFF1A")]),c._v(" "),i("Poptip",{attrs:{trigger:"hover",content:"content"}},[i("Icon",{staticClass:"help",attrs:{type:"ios-help-circle-outline"}}),c._v(" "),i("div",{staticClass:"highlight-rules-wrap",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"title"},[c._v("\u7528\u6CD5\u793A\u4F8B\uFF1A")]),c._v(" "),i("div",[c._v(`
                \u4E0D\u7B49\u4E8E\u7A7A\u5B57\u7B26\u4E32: v!==''
              `)]),c._v(" "),i("div",[c._v(`
                \u7B49\u4E8E\u5B57\u7B26\u4E32'\u554A': v==='\u554A'
              `)]),c._v(" "),i("div",[c._v(`
                \u5927\u4E8E\u6570\u5B570: v > 0
              `)]),c._v(" "),i("div",[c._v(`
                0\u5230100\u4E4B\u95F4: v >= 0 && v <= 100
              `)]),c._v(" "),i("div",[c._v(`
                \u5C0F\u4E8E0\u6216\u8005\u5927\u4E8E100:  v<0 || v>100
              `)])])],1),c._v(" "),c._l(c.formData.rules,function(a,t){return i("ExtentionRowItem",{key:t,attrs:{"row-index":t,"row-count":c.formData.rules.length,"show-operation-button":""},on:{addRow:function(l){return c.addRow(c.formData.rules,c.RULE)},removeRow:function(l){return c.removeRow(c.formData.rules,t)}}},[i("div",{staticClass:"col"},[i("Input",{attrs:{placeholder:c.$t("extensionProperty.expressionPlaceholder"),clearable:""},model:{value:a.operator,callback:function(l){c.$set(a,"operator",typeof l=="string"?l.trim():l)},expression:"rule.operator"}})],1),c._v(" "),i("div",{staticClass:"col"},[i("Poptip",{attrs:{trigger:"click",content:"content"}},[i("div",{staticClass:"style-button",style:a.style},[c._v(c._s(c.$t("extensionProperty.setStyle")))]),c._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"style-item"},[i("div",[c._v(c._s(c.$t("tips.color"))+":")]),c._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:a.style.color,expression:"rule.style.color"}],attrs:{type:"color"},domProps:{value:a.style.color},on:{input:function(l){l.target.composing||c.$set(a.style,"color",l.target.value)}}})])]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.backgroundColor"))+":")]),c._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:a.style.backgroundColor,expression:"rule.style.backgroundColor"}],attrs:{type:"color"},domProps:{value:a.style.backgroundColor},on:{input:function(l){l.target.composing||c.$set(a.style,"backgroundColor",l.target.value)}}})])]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.textDecoration"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:a.style.textDecoration,callback:function(l){c.$set(a.style,"textDecoration",l)},expression:"rule.style.textDecoration"}},c._l(c.decorationOptions,function(l){return i("Option",{key:l.value,attrs:{value:l.value}},[c._v(`
                          `+c._s(l.label)+`
                        `)])}),1)],1)]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.fontWeight"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:a.style.fontWeight,callback:function(l){c.$set(a.style,"fontWeight",l)},expression:"rule.style.fontWeight"}},c._l(c.weightOptions,function(l){return i("Option",{key:l.value,attrs:{value:l.value}},[c._v(`
                          `+c._s(l.label)+`
                        `)])}),1)],1)]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.fontStyle"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:a.style.fontStyle,callback:function(l){c.$set(a.style,"fontStyle",l)},expression:"rule.style.fontStyle"}},c._l(c.fontStyleOptions,function(l){return i("Option",{key:l.value,attrs:{value:l.value}},[c._v(`
                          `+c._s(l.label)+`
                        `)])}),1)],1)])])])],1)])})]:c._e()],2),c._v(" "),i("div",{staticClass:"tw-mt-10 form-group"},[i("span",[c._v(c._s(c.$t("tips.label"))+"\uFF1A")]),c._v(" "),i("i-switch",{attrs:{disabled:c.formData.scope==="table"},on:{"on-change":c.labelChange},model:{value:c.formData.label,callback:function(a){c.$set(c.formData,"label",a)},expression:"formData.label"}}),c._v(" "),c.formData.label?[i("div",{staticClass:"tw-mt-10"},[i("Poptip",{attrs:{trigger:"click",content:"content"}},[i("div",{staticClass:"style-button",style:c.formData.labelStyle},[c._v(c._s(c.$t("extensionProperty.setStyle")))]),c._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"style-item"},[i("div",[c._v(c._s(c.$t("tips.color"))+":")]),c._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:c.formData.labelStyle.color,expression:"formData.labelStyle.color"}],attrs:{type:"color"},domProps:{value:c.formData.labelStyle.color},on:{input:function(a){a.target.composing||c.$set(c.formData.labelStyle,"color",a.target.value)}}})])]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.backgroundColor"))+":")]),c._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:c.formData.labelStyle.backgroundColor,expression:"formData.labelStyle.backgroundColor"}],attrs:{type:"color"},domProps:{value:c.formData.labelStyle.backgroundColor},on:{input:function(a){a.target.composing||c.$set(c.formData.labelStyle,"backgroundColor",a.target.value)}}})])]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.textDecoration"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:c.formData.labelStyle.textDecoration,callback:function(a){c.$set(c.formData.labelStyle,"textDecoration",a)},expression:"formData.labelStyle.textDecoration"}},c._l(c.decorationOptions,function(a){return i("Option",{key:a.value,attrs:{value:a.value}},[c._v(`
                        `+c._s(a.label)+`
                      `)])}),1)],1)]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.fontWeight"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:c.formData.labelStyle.fontWeight,callback:function(a){c.$set(c.formData.labelStyle,"fontWeight",a)},expression:"formData.labelStyle.fontWeight"}},c._l(c.weightOptions,function(a){return i("Option",{key:a.value,attrs:{value:a.value}},[c._v(`
                        `+c._s(a.label)+`
                      `)])}),1)],1)]),c._v(" "),i("div",{staticClass:"tw-mt-4 style-item"},[i("div",[c._v(c._s(c.$t("tips.fontStyle"))+":")]),c._v(" "),i("div",[i("Select",{model:{value:c.formData.labelStyle.fontStyle,callback:function(a){c.$set(c.formData.labelStyle,"fontStyle",a)},expression:"formData.labelStyle.fontStyle"}},c._l(c.fontStyleOptions,function(a){return i("Option",{key:a.value,attrs:{value:a.value}},[c._v(`
                        `+c._s(a.label)+`
                      `)])}),1)],1)])])])],1)]:c._e()],2)])],1)],1)},N=[];C._withStripped=!0;var E=p(5331),T=p(4648);const R={operator:"",style:{fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},I={name:"Highlight",mixins:[T.Z],data(){return{formData:{scope:"global",rules:[(0,E.Z)(R)],label:!1,value:!1,labelStyle:{fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},scopeOptions:[{value:"form",label:"\u8868\u5355"},{value:"table",label:"\u5217\u8868"},{value:"global",label:"\u5168\u5C40"}],weightOptions:[{value:"normal",label:"\u6B63\u5E38"},{value:"bold",label:"\u52A0\u7C97"}],fontStyleOptions:[{value:"normal",label:"\u6B63\u5E38"},{value:"italic",label:"\u659C\u4F53"}],decorationOptions:[{value:"none",label:"\u65E0\u88C5\u9970"},{value:"underline",label:"\u4E0B\u5212\u7EBF"},{value:"line-through",label:"\u5220\u9664\u7EBF"}],RULE:(0,E.Z)(R)}},watch:{formData:{handler(c){const _=this.filterForm(c);_===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:_})},deep:!0}},methods:{valueChange(){this.formData.rules=[(0,E.Z)(R)]},labelChange(){this.formData.labelStyle={fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},handleChange(){this.formData.scope==="table"&&(this.formData.label=!1,this.formData.labelStyle={fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"})},filterForm(c){const _=(0,E.Z)(c);for(let t=_.rules.length-1;t>=0;t--){const l=_.rules[t];if(!l.operator){_.rules.splice(t,1);continue}if(JSON.stringify(l.style)===JSON.stringify((0,E.Z)(R.style))){_.rules.splice(t,1);continue}l.style.color==="#000000"&&(l.style.color=""),l.style.backgroundColor==="#ffffff"&&(l.style.backgroundColor="")}const i=_.value&&_.rules.length!==0,a=_.scope!=="table"&&_.label&&JSON.stringify(_.labelStyle)!==JSON.stringify((0,E.Z)(R.style));return!i&&!a?"":(_.labelStyle.color==="#000000"&&(_.labelStyle.color=""),_.labelStyle.backgroundColor==="#ffffff"&&(_.labelStyle.backgroundColor=""),_)},removeOption(c){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",c||[])},initData(){if(!this.defaultData)return;const c=(0,E.Z)(this.defaultData);this.formData=c,this.formData.rules.forEach(_=>{_.style.color===""&&(_.style.color="#000000"),_.style.backgroundColor===""&&(_.style.backgroundColor="#ffffff")}),this.formData.labelStyle.color===""&&(this.formData.labelStyle.color="#000000"),this.formData.labelStyle.backgroundColor===""&&(this.formData.labelStyle.backgroundColor="#ffffff")}},mounted(){this.initData()}};var $=p(1900),w=(0,$.Z)(I,C,N,!1,null,null,null);if(!1)var x;w.options.__file="src/components/extension-property/custom/Highlight.vue";const m=w.exports},3089:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>h});var C=function(){var o=this,u=o.$createElement,v=o._self._c||u;return v("div",{staticClass:"MultiTab"},[v("Description",{attrs:{option:o.option},on:{removeOption:o.removeOption}}),o._v(" "),v("SlickList",{staticClass:"drag-scroll",attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:o.sumTabs,callback:function(g){o.sumTabs=g},expression:"sumTabs"}},o._l(o.sumTabs,function(g,b){return v("SlickItem",{key:b,attrs:{index:b}},[v("div",{staticClass:"tabContent",on:{mouseenter:o.handleEnter,mouseleave:o.handleLeave}},[v("p",{staticClass:"label-input"},[v("validate",{attrs:{data:g.tab_name}},[v("span",{staticClass:"required-item ml-5"},[o._v(o._s(o.$t("tips.label"))+"\uFF1A")]),o._v(" "),v("Input",{staticClass:"tab-label-name",on:{input:function(S){return o.handlerInput(b)}},model:{value:g.tab_name,callback:function(S){o.$set(g,"tab_name",S)},expression:"item.tab_name"}})],1)],1),o._v(" "),v("p",{staticClass:"blank"}),o._v(" "),o._l(g.tab_value,function(S,O){return v("div",{key:O,staticClass:"colnameContent",attrs:{index:O}},[v("div",{staticClass:"colname"},[v("p",{staticClass:"required-item ml-5"},[o._v(`
              `+o._s(o.$t("extensionProperty.associateField"))+`:
            `)]),o._v(" "),v("validate",{attrs:{data:S.col_name,"validate-function":o.validateKey,index:b+"-"+O}},[v("DropDownSelectFilter",{attrs:{single:"",data:o.keyList,"auto-data":o.searchKeyList,"page-size":o.pageSize,"total-row-count":o.totalCount,"default-selected":o.defaultSelected[b][O],"is-back-row-item":"","columns-key":o.columnsKey,placeholder:o.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":o.getKeys,"on-page-change":o.getKeys,"on-input-value-change":function(P){return o.getSearchKeys(b,O,P)},"on-fkrp-selected":function(P){return o.handlerSelected(b,O,P)},"on-clear":function(P){return o.handleClear(b,O,P)}}})],1)],1),o._v(" "),v("div",{staticClass:"operator"},[v("p",{staticClass:"required-item ml-5"},[o._v(`
              `+o._s(o.$t("tips.operator"))+`:
            `)]),o._v(" "),v("validate",{attrs:{data:S.operator}},[v("Select",{attrs:{clearable:""},on:{"on-open-change":function(P){return o.handleSelectExpand(b,O,P)}},model:{value:S.operator,callback:function(P){o.$set(S,"operator",P)},expression:"temp.operator"}},o._l(S.selectOptions,function(P){return v("Option",{key:P.value,attrs:{value:P.value}},[o._v(`
                  `+o._s(P.label)+`
                `)])}),1)],1)],1),o._v(" "),v("div",{staticClass:"contrastValue"},[v("p",{staticClass:"required-item ml-5"},[o._v(`
              `+o._s(o.$t("extensionProperty.contrastValue"))+`:
            `)]),o._v(" "),v("validate",{attrs:{data:S.contrast_value}},[S.type&&S.type.toUpperCase().startsWith("DATE")?o._e():v("Input",{directives:[{name:"input-number",rawName:"v-input-number:[temp.type]",arg:S.type}],model:{value:S.contrast_value,callback:function(P){o.$set(S,"contrast_value",P)},expression:"temp.contrast_value"}}),o._v(" "),S.type&&S.type.toUpperCase().startsWith("DATE")?v("DatePicker",{staticStyle:{width:"100%"},attrs:{value:S.contrast_value,type:S.type&&S.type.toUpperCase()==="DATETIME"?"datetimerange":"daterange",placeholder:o.$t("tips.pleaseSelect"),editable:!1,transfer:"",format:S.type&&S.type.toUpperCase()==="DATETIME"?"yyyy/MM/dd HH:mm:ss":"yyyy/MM/dd"},on:{"on-change":function(P){return o.handleChangeDate(b,O,P)}}}):o._e()],1)],1),o._v(" "),v("div",{staticClass:"oprate"},[v("p"),o._v(" "),g.tab_value.length-1===Number(O)?v("button",{staticClass:"operate-button",on:{click:function(P){return o.addColname(g.tab_value,b)}}},[v("i",{staticClass:"iconfont"},[o._v("\uEC3F")])]):o._e(),o._v(" "),g.tab_value.length>1?v("button",{staticClass:"operate-button",on:{click:function(P){return o.deleteColname(g.tab_value,b,O)}}},[v("i",{staticClass:"iconfont"},[o._v("\uED15")])]):o._e()])])}),o._v(" "),o.sumTabs.length-1===b?v("button",{staticClass:"operate-button ml-10 mb-10",on:{click:o.addButtonClick}},[v("i",{staticClass:"iconfont"},[o._v("\uEC3F")])]):o._e(),o._v(" "),o.sumTabs.length>1?v("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(S){return o.removeButtonClick(b)}}},[v("i",{staticClass:"iconfont"},[o._v("\uED15")])]):o._e()],2)])}),1)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(6247),R=p(2162),A=function(){var o=this,u=o.$createElement,v=o._self._c||u;return v("div",[o._t("default"),o._v(" "),o.result.msg?v("div",{staticClass:"validate-msg"},[o._v(`
    `+o._s(o.result.msg)+`
  `)]):o._e()],2)},I=[];A._withStripped=!0;const w={props:{validateFunction:{type:Function},data:{},index:{type:String}},name:"",watch:{data:{handler(){this.validateValue()},immediate:!0}},data(){return{ruleList:[],result:{isPass:!0,msg:""}}},methods:{validateValue(){this.ruleList=[],this.validateFunction&&typeof this.validateFunction=="function"&&this.ruleList.push(this.validateFunction),this.ruleList.every(o=>(this.result=o(this.index),this.result.isPass))}}};var x=p(1900),m=(0,x.Z)(w,A,I,!1,null,null,null);if(!1)var c;m.options.__file="src/components/extension-property/validate/Validate.vue";const _=m.exports;var i=p(1847),a=p(8517),t=(o,u,v)=>new Promise((g,b)=>{var S=j=>{try{P(v.next(j))}catch(Z){b(Z)}},O=j=>{try{P(v.throw(j))}catch(Z){b(Z)}},P=j=>j.done?g(j.value):Promise.resolve(j.value).then(S,O);P((v=v.apply(o,u)).next())});const l={tab_name:"",tab_value:[{col_name:"",operator:"",contrast_value:"",selectOptions:[]}]},s={components:{Description:R.Z,Validate:_,SlickList:T.SlickList,SlickItem:T.SlickItem},name:"MultiTab",directives:{inputNumber:i.Z},inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},data(){return{currentTabIndex:0,currentKeyIndex:0,sumTabs:[JSON.parse(JSON.stringify(l))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],tipStyle:"",defaultSelected:[[]]}},watch:{sumTabs:{handler(){this.syncData()},deep:!0}},computed:{currentData(){return this.sumTabs[this.currentTabIndex]}},created(){return t(this,null,function*(){const{itemId:o}=this.$route.params;this._table_id_=o,this.initData(),this.setHover()})},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)},methods:{setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)})},setPos(o){this.tipStyle=`left: ${o.clientX+20}px;top:${o.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},initData(){return t(this,null,function*(){const o=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const u=[];o.forEach(S=>{S.tab_value.forEach(O=>{const P=`=${O.col_name}`;u.includes(P)||u.push(P)})});const v={table:"AD_COLUMN",startindex:0,range:u.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:u,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete v.fixedcolumns.AD_TABLE_ID;const g=(yield this.requestKeysData(v)).row||[],b=[];o.forEach((S,O)=>{b.push([]),S.tab_value.forEach((P,j)=>{b[O].push([]);const Z=g.find(G=>G.DBNAME.val===P.col_name);b[O][j]=[{ID:Z.ID.val,Label:Z.DBNAME.val}],P.type=Z.COLTYPE.val;const W=this.getSelectItems(P.type);P.selectOptions=W,P.type&&P.type.toUpperCase().startsWith("DATE")&&(P.contrast_value=P.contrast_value.split("~"))})}),this.defaultSelected=b,this.sumTabs=o}else this.sumTabs=[JSON.parse(JSON.stringify(l))]})},removeOption(o){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",o||[])},addButtonClick(){const o=JSON.parse(JSON.stringify(l));this.sumTabs.push(o),this.defaultSelected.push([[]])},removeButtonClick(o){this.sumTabs.splice(o,1),this.defaultSelected.splice(o,1)},addColname(o,u){o.push({col_name:"",operator:"",contrast_value:""}),this.defaultSelected[u].push([])},deleteColname(o,u,v){o.splice(v,1),this.defaultSelected[u].splice(v,1)},getKeys(o){return t(this,null,function*(){let u=0;typeof o=="number"&&(u=(o-1)*this.pageSize);const{itemId:v}=this.$route.params,g={table:"AD_COLUMN",startindex:u,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[v]},column_include_uicontroller:!0,isolr:!1};v==="New"&&delete g.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(g),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(o,u,v){return t(this,null,function*(){if(this.currentTabIndex=o,this.currentKeyIndex=u,this.sumTabs[o].tab_value[u].col_name=v,v===""){this.searchKeyList=[];return}const{itemId:g}=this.$route.params,b={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[g],DBNAME:v,ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};g==="New"&&delete b.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout(()=>t(this,null,function*(){const S=(yield this.requestKeysData(b)).row||[];this.searchKeyList=S.map(O=>(Object.keys(O).forEach(P=>{O[P]=O[P].val}),O))}),200)):this.timer=setTimeout(()=>t(this,null,function*(){const S=(yield this.requestKeysData(b)).row||[];this.searchKeyList=S.map(O=>(Object.keys(O).forEach(P=>{O[P]=O[P].val}),O))}),200)})},requestKeysData(o){return t(this,null,function*(){return new Promise(u=>{this.network.post("/p/cs/QueryList",(0,a.d)({searchdata:o})).then(v=>{if(v.data.code===0){const g=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],b=v.data.data.tabth,S=v.data.data.row;for(let O=Math.max(b.length-1,0);O>=0;O--){const P=b[O];P.colname==="DBNAME"?P.isak=!0:P.isak=!1,g.includes(P.colname)&&b.splice(O,1)}S.forEach(O=>{for(const P in O)g.includes(P)&&delete O[P]}),u(v.data.data)}else u({})}).catch(()=>{u({})})})})},handlerInput(o){this.currentTabIndex=o},formatResult(o){const u=JSON.parse(JSON.stringify(o));for(let v=Math.max(u.length-1,0);v>=0;v--){const b=u[v];for(let S=Math.max(b.tab_value.length-1,0);S>=0;S--){const O=b.tab_value[S];O.type&&O.type.toUpperCase().startsWith("DATE")&&O.contrast_value[0]&&O.contrast_value[1]&&(O.contrast_value=O.contrast_value.join("~"))}}return u},setDisplayData(o){const u=JSON.parse(JSON.stringify(o));for(let v=Math.max(u.length-1,0);v>=0;v--){const g=v,b=u[g];for(let S=Math.max(b.tab_value.length-1,0);S>=0;S--){const O=b.tab_value[S];delete O.type,delete O.selectOptions,delete O.defaultSelected,(!O.col_name||!O.operator||!O.contrast_value)&&b.tab_value.splice(S,1)}(!b.tab_name||b.tab_value.length===0)&&u.splice(g,1)}return u},syncData(){const o=JSON.parse(JSON.stringify(this.formatResult(this.sumTabs))),u=this.setDisplayData(o);u.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:u})},handlerSelected(o,u,v){this.currentTabIndex=o,this.currentKeyIndex=u,this.sumTabs[o].tab_value[u].col_name=v[0].rowItem.DBNAME.val||v[0].rowItem.DBNAME,this.sumTabs[o].tab_value[u].operator="",this.sumTabs[o].tab_value[u].contrast_value="",this.sumTabs[o].tab_value[u].type=v[0].rowItem.COLTYPE.val||v[0].rowItem.COLTYPE,this.defaultSelected[o][u]=[v[0]]},handleClear(o,u){this.currentTabIndex=o,this.currentKeyIndex=u,this.sumTabs[o].tab_value[u].col_name="",this.sumTabs[o].tab_value[u].operator=""},handleSelectExpand(o,u){const v=this.sumTabs[o].tab_value[u].type||"",g=this.getSelectItems(v);this.$set(this.sumTabs[o].tab_value[u],"selectOptions",g)},formatType(o){let u;return o.toUpperCase().startsWith("NUMBER")?u="NUMBER":o.toUpperCase().startsWith("DATE")?u="DATE":(o.toUpperCase().startsWith("CHAR")||o.toUpperCase().startsWith("VARCHAR"))&&(u="STRING"),u},getSelectItems(o){switch(this.formatType(o)){case"STRING":return[{value:"=",label:"="}];case"NUMBER":return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}];case"DATE":return[{value:"between",label:"between"},{value:"=",label:"="}];default:return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"between",label:"between"}]}},validateKey(o){const[u,v]=o.split("-");if(!this.sumTabs[u].tab_value[v].col_name)return{isPass:!0,msg:""};const g=this.currentTabIndex,b=this.currentKeyIndex,S=this.sumTabs[g].tab_value[b].col_name;return this.sumTabs[g].tab_value.filter(P=>S!==""&&S!==null&&S!==void 0&&P.col_name===S).length>1?{isPass:!1,msg:this.$t("extensionProperty.selectOtherField")}:{isPass:!0,msg:""}},handleChangeDate(o,u,v){this.sumTabs[o].tab_value[u].contrast_value=v}}};var r=(0,x.Z)(s,C,N,!1,null,"5dd5153e",null);if(!1)var d;r.options.__file="src/components/extension-property/custom/MultiTab.vue";const h=r.exports},4830:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>o});var C=function(){var u=this,v=u.$createElement,g=u._self._c||v;return g("div",[u.showDescription?g("Description",{attrs:{option:u.option},on:{removeOption:u.removeOption}}):u._e(),u._v(" "),g("div",{staticClass:"form-group"},u._l(u.listConfig,function(b,S){return g("ExtentionRowItem",{key:S,attrs:{"row-index":S,"row-count":u.listConfig.length,"row-label":""+u.$t("tips.button")+(S+1),"is-required":"","row-label-class":"rowLabel","show-operation-button":"","error-tip":u.rowValidateTips[S]},on:{addRow:u.addRow,removeRow:function(O){return u.removeRow(S)}}},[g("div",{staticClass:"col"},[g("div",{staticClass:"row"},[g("Input",{attrs:{placeholder:u.$t("extensionProperty.buttonField")},on:{"on-blur":function(O){return u.validateKey(S)}},model:{value:b.input,callback:function(O){u.$set(b,"input",O)},expression:"group.input"}})],1),u._v(" "),u.inputValidateTips[S]?g("div",{staticClass:"tip"},[u._v(`
          `+u._s(u.inputValidateTips[S])+`
        `)]):u._e(),u._v(" "),b.input?g("div",{staticClass:"row"},[g("div",{staticClass:"col"},[g("R3Select",{attrs:{options:b.selectConfig},on:{change:function(O){return u.getSelect(O,S)}}})],1),u._v(" "),g("div",{staticClass:"col"},[g("Input",{attrs:{placeholder:u.$t("extensionProperty.correspondingValue")},on:{"on-blur":function(O){return u.validateKey(S)}},model:{value:b.value,callback:function(O){u.$set(b,"value",O)},expression:"group.value"}})],1),u._v(" "),g("div",{staticClass:"col"},[g("Input",{attrs:{placeholder:u.$t("extensionProperty.optionalPrompt")},model:{value:b.desc,callback:function(O){u.$set(b,"desc",O)},expression:"group.desc"}})],1)]):u._e()])])}),1)],1)},N=[];C._withStripped=!0;var E=p(4174),T=function(){var u=this,v=u.$createElement,g=u._self._c||v;return g("Select",u._g(u._b({attrs:{placeholder:u.formData.placeholder,clearable:""},model:{value:u.formData.defaultValue,callback:function(b){u.$set(u.formData,"defaultValue",b)},expression:"formData.defaultValue"}},"Select",u.$attrs,!1),u.$listeners),u._l(u.formData.selectOptions,function(b){return g("Option",{key:b.value,attrs:{value:b.value}},[u._v(`
    `+u._s(b.label)+`
  `)])}),1)},R=[];T._withStripped=!0;var A=p(5331);const $={name:"ak-select",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(u){this.formData=(0,A.Z)(u)},deep:!0,immediate:!0}},data(){return{formData:{}}},methods:{}};var w=p(1900),x=(0,w.Z)($,T,R,!1,null,"18b7de2f",null);if(!1)var m;x.options.__file="src/components/select/Select.vue";const _=x.exports;var i=p(2162),a=p(9600),t=p(4470);const l=[{label:E.ZP.t("tips.modal"),value:"modal"},{label:E.ZP.t("tips.request"),value:"request"},{label:E.ZP.t("tips.route"),value:"route"}],n={input:"",selectConfig:{placeholder:E.ZP.t("extensionProperty.triggerType"),defaultValue:"",selectOptions:(0,A.Z)(l)},value:"",desc:""},r={name:"OperateColumnButton",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},components:{Description:i.Z,R3Select:_,ExtentionRowItem:a.Z},watch:{listConfig:{handler(u){const v=this.filterForm(u);Object.keys(v).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:v})},deep:!0},defaultData:{handler(u){(0,t.Q)(u)&&Object.assign(this.$data,this.$options.data.call(this))},deep:!0}},data(){return{listConfig:[(0,A.Z)(n)],inputValidateTips:[],rowValidateTips:[]}},methods:{filterForm(u){const v=(0,A.Z)(u);if(u.length===0)return{};const g={};return v.forEach(b=>{b.input&&b.selectConfig.defaultValue&&b.value&&(g[b.input]={type:b.selectConfig.defaultValue,value:b.value,desc:b.desc})}),g},removeOption(u){this.$emit("removeOption",u||[])},addRow(){this.listConfig.push((0,A.Z)(n))},removeRow(u){this.listConfig.splice(u,1)},getSelect(u,v){this.listConfig[v].selectConfig.defaultValue=u,this.validateKey(v)},validateKey(){const u=[],v=[];this.listConfig.forEach(g=>{g.input===""?u.push(this.$t("extensionProperty.buttonField")):u.push(""),g.input&&(g.value===""||!g.selectConfig.defaultValue)?v.push(this.$t("extensionProperty.confirmEventAndValue")):v.push("")}),this.inputValidateTips=u,this.rowValidateTips=v},init(){const u=(0,A.Z)(this.defaultData);if(Object.keys(u).length===0)return;const v=[];Object.keys(u).forEach(g=>{const b=u[g];v.push({input:g,selectConfig:{placeholder:this.$t("extensionProperty.triggerType"),defaultValue:b.type,selectOptions:(0,A.Z)(l)},value:b.value,desc:b.desc})}),this.listConfig=v}},created(){this.init()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var d=(0,w.Z)(r,C,N,!1,null,"2fdab31a",null);if(!1)var h;d.options.__file="src/components/extension-property/custom/OperateColumnButton.vue";const o=d.exports},2799:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>_});var C=function(){var i=this,a=i.$createElement,t=i._self._c||a;return t("div",{staticClass:"PassWord"},[t("Description",{attrs:{option:i.option},on:{removeOption:i.removeOption}}),i._v(" "),t("div",{staticClass:"cell"},[t("EnumerateRadioItem",{attrs:{option:i.option,"break-line":!1,"default-data":i.value},on:{radioValueChange:i.radioValueChange}})],1),i._v(" "),i.value?t("div",{staticClass:"cell"},[t("LabelWithSelect",{attrs:{item:{key:"is_all",name:i.$t("extensionProperty.encryptionMethod"),selectOptions:[{text:i.$t("extensionProperty.hideAll"),value:!0},{text:i.$t("extensionProperty.customHide"),value:!1}]},"default-data":i.selectValue},on:{selectValueChange:i.selectValueChange}})],1):i._e(),i._v(" "),i.value&&!i.selectValue?t("div",{staticClass:"cell"},[t("LabelWithInput",{attrs:{"default-data":i.password_prefix_digit,item:{key:"password_prefix_digit",name:i.$t("extensionProperty.frontHiddenDigits"),type:"input"}},on:{inputValueChange:i.inputValueChange}})],1):i._e(),i._v(" "),i.value&&!i.selectValue?t("div",{staticClass:"cell"},[t("LabelWithInput",{attrs:{"default-data":i.password_suffix_digit,item:{key:"password_suffix_digit",name:i.$t("extensionProperty.endHiddenDigits"),type:"input"}},on:{inputValueChange:i.inputValueChange}})],1):i._e()],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(1739),A=p(2168),I=p(9032);const w={name:"PassWord",components:{Description:T.Z,LabelWithSelect:R.Z,EnumerateRadioItem:A.Z,LabelWithInput:I.Z},props:{option:{type:Object,default:()=>({})}},data(){return{value:!1,selectValue:!0,password_prefix_digit:null,password_suffix_digit:null}},methods:{removeOption(i){this.value=!1,this.selectValue=0,this.$emit("removeOption",i||[]),this.$emit("dataChange",{key:"password_type",value:void 0})},selectValueChange({value:i}){this.selectValue=JSON.parse(i),this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}})},radioValueChange({key:i,value:a}){a?this.selectValue=!0:(a=void 0,this.selectValue=!1),this.value=a,this.$emit("dataChange",{key:i,value:a}),a?this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}}):this.$emit("dataChange",{key:"password_type",value:void 0})},inputValueChange({key:i,value:a}){const t=this.$parent.rootData?this.$parent.rootData.password_type:{};t[i]=a,this.$emit("dataChange",{key:"password_type",value:t})}},created(){const i=this.$parent.rootData;i.ispassword&&(this.value=i.ispassword),i.password_type&&(this.selectValue=i.password_type.is_all,this.password_prefix_digit=i.password_type.password_prefix_digit,this.password_suffix_digit=i.password_type.password_suffix_digit)},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var x=p(1900),m=(0,x.Z)(w,C,N,!1,null,null,null);if(!1)var c;m.options.__file="src/components/extension-property/custom/PassWord.vue";const _=m.exports},4316:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>i});var C=function(){var a=this,t=a.$createElement,l=a._self._c||t;return l("div",[l("Description",{attrs:{option:a.option},on:{removeOption:a.removeOption}}),a._v(" "),l("div",{staticClass:"form-group"},[l("h4",[a._v(a._s(a.$t("extensionProperty.leftColumnTable")))]),a._v(" "),a._l(a.formData.leftPinnedColumns,function(n,s){return l("ExtentionRowItem",{key:s,attrs:{"row-index":s,"row-count":a.formData.leftPinnedColumns.length,"error-tip":a.fieldValidateTip.leftPinnedColumns[s],"row-label":a.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(r){return a.addRow("leftPinnedColumns")},removeRow:function(r){return a.removeRow("leftPinnedColumns",s)}}},[l("div",{staticClass:"col"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.dropList,"auto-data":a.searchList,"page-size":a.pageSize,"total-row-count":a.totalCount,"columns-key":a.columnsKey,hidecolumns:a.hidecolumns,"default-selected":a.defaultFields.leftPinnedColumns[s],placeholder:a.$t("extensionProperty.selectLeftColumn")},on:{"on-popper-show":a.getSearchData,"on-page-change":a.getSearchData,"on-input-value-change":a.inputSearchData,"on-fkrp-selected":function(r){return a.selectValue(r,"leftPinnedColumns",s)},"on-clear":function(r){return a.clearValue("leftPinnedColumns",s)}}})],1)])})],2),a._v(" "),l("div",{staticClass:"form-group"},[l("h4",[a._v(a._s(a.$t("extensionProperty.rightColumnTable")))]),a._v(" "),a._l(a.formData.rightPinnedColumns,function(n,s){return l("ExtentionRowItem",{key:s,attrs:{"row-index":s,"row-count":a.formData.rightPinnedColumns.length,"error-tip":a.fieldValidateTip.rightPinnedColumns[s],"row-label":a.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(r){return a.addRow("rightPinnedColumns")},removeRow:function(r){return a.removeRow("rightPinnedColumns",s)}}},[l("div",{staticClass:"col"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.dropList,"auto-data":a.searchList,"page-size":a.pageSize,"total-row-count":a.totalCount,"columns-key":a.columnsKey,hidecolumns:a.hidecolumns,"default-selected":a.defaultFields.rightPinnedColumns[s],placeholder:a.$t("extensionProperty.selectRightColumn")},on:{"on-popper-show":a.getSearchData,"on-page-change":a.getSearchData,"on-input-value-change":a.inputSearchData,"on-fkrp-selected":function(r){return a.selectValue(r,"rightPinnedColumns",s)},"on-clear":function(r){return a.clearValue("rightPinnedColumns",s)}}})],1)])})],2)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(9600),A=p(8517),I=p(8192),$=(a,t,l)=>new Promise((n,s)=>{var r=o=>{try{h(l.next(o))}catch(u){s(u)}},d=o=>{try{h(l.throw(o))}catch(u){s(u)}},h=o=>o.done?n(o.value):Promise.resolve(o.value).then(r,d);h((l=l.apply(a,t)).next())});const x={name:"PinnedColumns",inject:["network"],components:{Description:T.Z,ExtentionRowItem:R.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:String,default:""},keyForm:{type:Object,default:()=>({})}},data(){return{formData:{leftPinnedColumns:[""],rightPinnedColumns:[""]},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],defaultFields:{leftPinnedColumns:[],rightPinnedColumns:[]},fieldValidateTip:{leftPinnedColumns:[""],rightPinnedColumns:[""]}}},watch:{formData:{handler(a){const t=this.filterForm(a);t===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:t})},deep:!0}},methods:{filterForm(){const a=this.formData.leftPinnedColumns.filter(l=>l!=="").join(","),t=this.formData.rightPinnedColumns.filter(l=>l!=="").join(",");return`${a}${t?"|"+t:""}`},removeOption(a){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",a||[])},addRow(a){this.formData[a].push(""),this.fieldValidateTip[a].push("")},removeRow(a,t){this.formData[a].splice(t,1),this.fieldValidateTip[a].splice(t,1)},getSearchData(a){return $(this,null,function*(){let t=0;typeof a=="number"&&(t=(a-1)*this.pageSize);const l={table:"AD_COLUMN",startindex:t,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(l),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,I.Ds)(function(a){if(a===""){this.searchList=[];return}const t={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:a,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete t.fixedcolumns.AD_TABLE_ID,this.getKeyList(t).then(l=>{const n=l.row||[];this.searchList=n.map(s=>(Object.keys(s).forEach(r=>{s[r]=s[r].val}),s)),this.totalCount=this.dropList.totalRowCount})}),commonApi(a,t,l){const{hideColumns:n,displayKeys:s}=l;return new Promise(r=>{this.network.post(a,(0,A.d)(t)).then(d=>{if(d.data.code===0){const h=d.data.data.tabth,o=d.data.data.row;for(let u=Math.max(h.length-1,0);u>=0;u--){const v=h[u];s.includes(v.colname)?v.isak=!0:v.isak=!1,n.includes(v.colname)&&h.splice(u,1)}n.length>0&&o.forEach(u=>{for(const v in u)n.includes(v)&&delete u[v]}),r(d.data.data)}else r({})}).catch(()=>{r({})})})},getKeyList(a){return $(this,null,function*(){return new Promise(t=>{const l=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],n="/p/cs/QueryList",s=this.commonApi(n,{searchdata:a},{hideColumns:l,displayKeys:["DBNAME"]});t(s)})})},selectValue(a,t,l){this.validateForm(a[0].Label,t,l)&&this.$set(this.formData[t],l,a[0].Label)},clearValue(a,t){this.$set(this.fieldValidateTip[a],t,""),this.$set(this.formData[a],t,"")},validateForm(a,t,l){let n=!0;return this.$set(this.fieldValidateTip[t],l,""),this.formData.leftPinnedColumns.forEach(s=>{a===s&&(n=!1,this.$set(this.fieldValidateTip[t],l,this.$t("extensionProperty.selectOtherField")))}),this.formData.rightPinnedColumns.forEach(s=>{a===s&&(n=!1,this.$set(this.fieldValidateTip[t],l,this.$t("extensionProperty.selectOtherField")))}),n},init(){return $(this,null,function*(){if(!this.defaultData)return;const[a,t]=this.defaultData.split("|");let l=[],n=[];a&&(l=a.split(",").map(h=>`=${h}`)),t&&(n=t.split(",").map(h=>`=${h}`));const s=l.concat(n),r={table:"AD_COLUMN",startindex:0,range:s.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:s,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete r.fixedcolumns.AD_TABLE_ID,((yield this.getKeyList(r)).row||[]).forEach(h=>{const o=`=${h.DBNAME.val}`,u=l.findIndex(v=>v===o);if(u>-1)this.$set(this.formData.leftPinnedColumns,u,h.DBNAME.val),this.$set(this.defaultFields.leftPinnedColumns,u,[{Label:h.DBNAME.val,ID:h.ID.val}]);else{const v=n.findIndex(g=>g===o);this.$set(this.formData.rightPinnedColumns,v,h.DBNAME.val),this.$set(this.defaultFields.rightPinnedColumns,v,[{Label:h.DBNAME.val,ID:h.ID.val}])}})})}},created(){return $(this,null,function*(){this._table_id_=this.$route.params.itemId==="New"?null:this.$route.params.itemId,this.init()})},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var m=p(1900),c=(0,m.Z)(x,C,N,!1,null,"a86adb9a",null);if(!1)var _;c.options.__file="src/components/extension-property/custom/PinnedColumns.vue";const i=c.exports},7717:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>c});var C=function(){var _=this,i=_.$createElement,a=_._self._c||i;return a("div",[_.showDescription?a("Description",{attrs:{option:_.option},on:{removeOption:_.removeOption}}):_._e(),_._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"is-required":"","row-label":_.$t("extensionProperty.filterBaseOnField"),"error-tip":_.validateTip}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:_.$t("extensionProperty.selectSourceField")},on:{"on-blur":_.validateInput},model:{value:_.formData.srccols,callback:function(t){_.$set(_.formData,"srccols",t)},expression:"formData.srccols"}})],1),_._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:_.$t("extensionProperty.enterApi")},on:{"on-blur":_.validateInput},model:{value:_.formData.url,callback:function(t){_.$set(_.formData,"url",t)},expression:"formData.url"}})],1)])],1)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(9600),A=p(5331);const $={name:"RefcolFilter",components:{Description:T.Z,ExtentionRowItem:R.Z},data(){return{formData:{srccols:"",url:""},validateTip:""}},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},watch:{formData:{handler(_){const i=this.filterForm(_);Object.keys(i).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:i})},deep:!0}},methods:{removeOption(_){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",_||[])},filterForm(_){let i=(0,A.Z)(_);return(i.srccols===""||i.url==="")&&(i={}),i},validateInput(){const _=(0,A.Z)(this.formData);_.srccols===""||_.url===""?this.validateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.validateTip=""}},created(){const _=(0,A.Z)(this.defaultData);Object.keys(_).length>0&&(this.formData=_)},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var w=p(1900),x=(0,w.Z)($,C,N,!1,null,"50e04e07",null);if(!1)var m;x.options.__file="src/components/extension-property/custom/RefcolFilter.vue";const c=x.exports},4616:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>a});var C=function(){var t=this,l=t.$createElement,n=t._self._c||l;return n("div",[t.showDescription?n("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),t._l(t.formData,function(s,r){return n("div",{key:r,staticClass:"form-group"},[n("ExtentionRowItem",{attrs:{"row-index":r,"row-count":t.formData.length,"row-label":""+t.$t("extensionProperty.condition")+(r+1),"show-operation-button":"","row-label-class":"rowLabel","is-required":"","error-tip":t.validateTips[r]},on:{addRow:t.addRow,removeRow:function(d){return t.removeRow(r)}}},[n("div",{staticClass:"col"},[n("div",{staticClass:"row "},[n("div",{staticClass:"col"},[n("span",{staticClass:"label"},[t._v(t._s(t.$t("extensionProperty.ifFieldOnMainTable"))+"\uFF1A")]),t._v(" "),n("R3Radio",{attrs:{options:s.radioConfig},on:{change:function(d){return t.getRadioValue(d,r)}}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("Input",{attrs:{placeholder:t.$t("extensionProperty.knownConditionField")},on:{"on-blur":t.validateForm},model:{value:s.srccol,callback:function(d){t.$set(s,"srccol",d)},expression:"row.srccol"}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("Input",{attrs:{placeholder:t.$t("extensionProperty.filteredFieldInForeignKey")},on:{"on-blur":t.validateForm},model:{value:s.fixcolumn,callback:function(d){t.$set(s,"fixcolumn",d)},expression:"row.fixcolumn"}})],1)])])])],1)})],2)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(5331),A=p(6849),I=p(9600);const $={defaultValue:E.ZP.t("tips.no"),label:E.ZP.t("extensionProperty.ifSourceOnMainTable"),selectOptions:[{value:!0,label:E.ZP.t("tips.yes")},{value:!1,label:E.ZP.t("tips.no")}]},w={srccol:"",fixcolumn:"",maintable:!1,radioConfig:(0,R.Z)($)},m={name:"RefcolSearch",components:{Description:T.Z,ExtentionRowItem:I.Z,R3Radio:A.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]},showDescription:{type:Boolean,default:!0}},data(){return{formData:[(0,R.Z)(w)],defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[],validateTips:[]}},watch:{formData:{handler(t){const l=this.filterForm(t);l.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{filterForm(t){const l=(0,R.Z)(t);if(l.length===0)return[];const n=[];l.forEach((s,r)=>{delete s.radioConfig,(s.srccol===""||s.fixcolumn==="")&&n.push(r)});for(let s=n.length-1;s>-1;s--)l.splice(n[s],1);return l},validateForm(){const t=[];this.formData.forEach(l=>{l.srccol===""||l.fixcolumn===""?t.push(this.$t("extensionProperty.confirmConditionAndFilter")):t.push("")}),this.validateTips=t},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addRow(){this.formData.push((0,R.Z)(w))},removeRow(t){this.formData.splice(t,1)},getRadioValue(t,l){this.formData[l].maintable=t.value},init(){const t=(0,R.Z)(this.defaultData);Object.keys(t).length>0&&(t.forEach(l=>{l.radioConfig=(0,R.Z)($),l.radioConfig.defaultValue=l.maintable?this.$t("tips.yes"):this.$t("tips.no"),l.maintable===void 0&&(l.maintable=!1)}),this.formData=t)}},created(){this.init()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var c=p(1900),_=(0,c.Z)(m,C,N,!1,null,"f9cd5f92",null);if(!1)var i;_.options.__file="src/components/extension-property/custom/RefcolSearch.vue";const a=_.exports},7033:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>_});var C=function(){var i=this,a=i.$createElement,t=i._self._c||a;return t("div",{staticClass:"RowToColumn"},[t("Description",{attrs:{option:i.option},on:{removeOption:i.removeOption}}),i._v(" "),i.isInited?t("div",{staticClass:"form-group"},[t("ExtentionRowItem",{attrs:{"row-label":""+i.$t("extensionProperty.sourceTable"),errorTip:i.tableErrorTip}},[t("div",{staticClass:"col"},[t("DropDownSelectFilter",{attrs:{single:"",placeholder:i.$t("tips.pleaseSelect"),data:i.dropTableList,"auto-data":i.searchTableList,"page-size":i.pageSize,"total-row-count":i.totalTableCount,"columns-key":i.columnsTable,hidecolumns:i.hidecolumns,"default-selected":i.defaultForm.table?i.defaultForm.table:void 0},on:{"on-popper-show":i.getTableData,"on-page-change":i.getTableData,"on-input-value-change":i.inputTableData,"on-fkrp-selected":function(l){return i.selectValue(l,i.formData,"table","ID")},"on-clear":function(l){return i.clearValue(i.formData,"table")}}})],1)]),i._v(" "),t("ExtentionRowItem",{attrs:{"row-label":""+i.$t("tips.find")+i.$t("extensionProperty.field"),errorTip:i.fieldErrorTip}},[t("div",{staticClass:"col"},[t("DropDownSelectFilter",{ref:"fieldDrop",attrs:{single:"",placeholder:i.$t("tips.pleaseSelect"),data:i.dropList,"auto-data":i.searchList,"page-size":i.pageSize,"total-row-count":i.totalCount,"columns-key":i.columnsKey,hidecolumns:i.hidecolumns,"default-selected":i.defaultForm.refcolumn?i.defaultForm.refcolumn:void 0},on:{"on-popper-show":i.getSearchData,"on-page-change":i.getSearchData,"on-input-value-change":i.inputSearchData,"on-fkrp-selected":function(l){return i.selectValue(l,i.formData,"refcolumn","ID")},"on-clear":function(l){return i.clearValue(i.formData,"refcolumn")}}})],1)]),i._v(" "),t("ExtentionRowItem",{attrs:{"row-label":""+i.$t("tips.find")+i.$t("extensionProperty.condition"),errorTip:i.conditionErrorTip}},[t("div",{staticClass:"col"},[t("Input",{attrs:{placeholder:i.$t("extensionProperty.enterValue")},model:{value:i.formData.value,callback:function(l){i.$set(i.formData,"value",l)},expression:"formData.value"}})],1)])],1):i._e()],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(5331),R=p(8192),A=p(4648),I=(i,a,t)=>new Promise((l,n)=>{var s=h=>{try{d(t.next(h))}catch(o){n(o)}},r=h=>{try{d(t.throw(h))}catch(o){n(o)}},d=h=>h.done?l(h.value):Promise.resolve(h.value).then(s,r);d((t=t.apply(i,a)).next())});const w={name:"RowToColumn",mixins:[A.Z],data(){return{formData:{table:"",refcolumn:"",value:""},columnsTable:["DESCRIPTION"],dropTableList:{},searchTableList:[],totalTableCount:0,defaultForm:{},isInited:!1,tableErrorTip:"",fieldErrorTip:"",conditionErrorTip:""}},watch:{formData:{handler(i){i.table||(this.formData.refcolumn="",this.defaultForm.refcolumn=void 0,this.$refs.fieldDrop.inputValue=""),this.checkValue();const a=this.filterForm(i);a===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:a})},deep:!0}},methods:{removeOption(i){return I(this,null,function*(){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",i||[]),this.isInited=!0})},filterForm(i){return i.table&&i.refcolumn&&i.value?(0,T.Z)(i):""},checkValue(){this.formData.table?this.tableErrorTip="":this.tableErrorTip=`${this.$t("tips.pleaseSelect")}${this.$t("extensionProperty.sourceTable")}`,this.formData.refcolumn?this.fieldErrorTip="":this.fieldErrorTip=`${this.$t("tips.pleaseSelect")}${this.$t("tips.find")}${this.$t("extensionProperty.field")}`,this.formData.value?this.conditionErrorTip="":this.conditionErrorTip=`${this.$t("extensionProperty.enterValue")}${this.$t("tips.find")}${this.$t("extensionProperty.condition")}`},getTableData(i){return I(this,null,function*(){let a=0;typeof i=="number"&&(a=(i-1)*this.pageSize);const t={table:"AD_TABLE",startindex:a,range:10,fixedcolumns:{ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};this.dropTableList=yield this.getTableList(t),this.totalTableCount=this.dropTableList.totalRowCount})},getTableList(i){return I(this,null,function*(){return new Promise(a=>{const t=["ORDERNO","MASK","URL","AD_OBJUICONF_ID","AD_VERSION_ID","CUSTOMIZENO","DISP_COLUMN_ID","FILTER","ISACTIVE","ISDISPATCHABLE","ISTREE","REALTABLE_ID","PROPS","PROC_SUBMIT","MODIFIERNAME","MODIFIEDDATE"],l="/p/cs/QueryList",n=this.commonApi(l,{searchdata:i},{hideColumns:t,displayKeys:["\u663E\u793A\u540D\u79F0"]});a(n)})})},inputTableData:(0,R.Ds)(function(i){if(i===""){this.searchTableList=[];return}const a={table:"AD_TABLE",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DESCRIPTION:i},column_include_uicontroller:!0,isolr:!1};this.getTableList(a).then(t=>{const l=t.row||[];this.searchTableList=l.map(n=>(Object.keys(n).forEach(s=>{n[s]=n[s].val}),n)),this.totalTableCount=this.dropTableList.totalRowCount})}),getSearchData(i){return I(this,null,function*(){let a=0;typeof i=="number"&&(a=(i-1)*this.pageSize);const t=this.formData.table,l={table:"AD_COLUMN",startindex:a,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[t]},column_include_uicontroller:!0,isolr:!1};t||delete l.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(l),this.totalCount=this.dropList.totalRowCount})},getKeyList(i){return I(this,null,function*(){return new Promise(a=>{const t=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],l="/p/cs/QueryList",n=this.commonApi(l,{searchdata:i},{hideColumns:t,displayKeys:["\u8868\u5185\u540D\u79F0"]});a(n)})})},inputSearchData:(0,R.Ds)(function(i){if(i===""){this.searchList=[];return}const a=this.formData.table,t={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:i,AD_TABLE_ID:[a]},column_include_uicontroller:!0,isolr:!1};a||delete t.fixedcolumns.AD_TABLE_ID,this.getKeyList(t).then(l=>{const n=l.row||[];this.searchList=n.map(s=>(Object.keys(s).forEach(r=>{s[r]=s[r].val}),s)),this.totalCount=this.dropList.totalRowCount})}),init(){return I(this,null,function*(){if(!this.defaultData){this.isInited=!0;return}this.formData=(0,T.Z)(this.defaultData);let i={table:"AD_TABLE",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],ID:this.formData.table},column_include_uicontroller:!0,isolr:!1};const a=(yield this.getKeyList(i)).row||[];a.length>0&&(this.defaultForm.table=[{Label:a[0].DESCRIPTION.val,ID:this.formData.table}]),i={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:this.formData.table,ID:this.formData.refcolumn},column_include_uicontroller:!0,isolr:!1};const t=(yield this.getTableList(i)).row||[];t.length>0&&(this.defaultForm.refcolumn=[{Label:t[0].DBNAME.val,ID:this.formData.refcolumn}]),this.isInited=!0})}},created(){this.init()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var x=p(1900),m=(0,x.Z)(w,C,N,!1,null,null,null);if(!1)var c;m.options.__file="src/components/extension-property/custom/RowToColumn.vue";const _=m.exports},2498:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>n});var C=function(){var s=this,r=s.$createElement,d=s._self._c||r;return d("div",[s.showDescription?d("Description",{attrs:{option:s.option},on:{removeOption:s.removeOption}}):s._e(),s._v(" "),d("div",{staticClass:"form-group"},[d("ExtentionRowItem",{attrs:{"row-label":s.$t("extensionProperty.targetFieldEditable")}},[d("div",{staticClass:"col"},[d("R3Radio",{attrs:{options:s.disabledConfig},on:{change:function(h){return s.getRadioValue(h,s.disabledConfig.key)}}})],1)]),s._v(" "),d("ExtentionRowItem",{attrs:{"row-label":s.$t("extensionProperty.ifFieldRequired"),"error-tip":s.radioValidateTip}},[d("div",{staticClass:"col"},[d("R3Radio",{attrs:{options:s.requiredConfig},on:{change:function(h){return s.getRadioValue(h,s.requiredConfig.key)}}})],1)]),s._v(" "),s._l(s.formData.field,function(h,o){return d("ExtentionRowItem",{key:o,attrs:{"row-index":o,"row-count":s.formData.field.length,"row-label":s.$t("extensionProperty.sourceField"),"show-operation-button":"","is-required":"","error-tip":s.fieldValidateTip[o]},on:{addRow:s.addRow,removeRow:function(u){return s.removeRow(o)}}},[d("div",{staticClass:"col"},[d("DropDownSelectFilter",{attrs:{single:"",data:s.dropList,"auto-data":s.searchList,"page-size":s.pageSize,"total-row-count":s.totalCount,"columns-key":s.columnsKey,hidecolumns:s.hidecolumns,"default-selected":s.defaultFields[h.refcolumn],placeholder:s.$t("extensionProperty.selectField")},on:{"on-popper-show":s.getSearchData,"on-page-change":s.getSearchData,"on-input-value-change":s.inputSearchData,"on-fkrp-selected":function(u){return s.selectTable(u,o)},"on-clear":function(u){return s.clearTableName(o)}}})],1),s._v(" "),d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:s.$t("extensionProperty.enterValue")},on:{"on-blur":s.validateField},model:{value:s.formData.field[o].refval,callback:function(u){s.$set(s.formData.field[o],"refval",u)},expression:"formData.field[index].refval"}})],1)])})],2)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(6849),R=p(2162),A=p(9600),I=p(5331),$=p(8192),w=p(9277),x=p(8517),m=(s,r,d)=>new Promise((h,o)=>{var u=b=>{try{g(d.next(b))}catch(S){o(S)}},v=b=>{try{g(d.throw(b))}catch(S){o(S)}},g=b=>b.done?h(b.value):Promise.resolve(b.value).then(u,v);g((d=d.apply(s,r)).next())});const c={refcolumn:"",refval:""},i={name:"StaticRules",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:R.Z,R3Radio:T.Z,ExtentionRowItem:A.Z},inject:["network"],data(){return{formData:{field:[(0,I.Z)(c)],props:{disabled:void 0,required:void 0}},disabledConfig:{key:"disabled",defaultValue:this.$t("extensionProperty.clearConfig"),selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},requiredConfig:{defaultValue:this.$t("extensionProperty.clearConfig"),key:"required",selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[]}},watch:{formData:{handler(s){const r=this.filterForm(s);Object.keys(r).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:r})},deep:!0}},methods:{filterForm(s){const r=(0,I.Z)(s);if(Object.keys(r.props).length===0&&delete r.props,r.props&&(r.props.required!==void 0||r.props.disabled!==void 0)){for(let h=r.field.length-1;h>=0;h--)r.field[h].refcolumn===""&&r.field.splice(h,1);return Object.keys(r.field).length===0?{}:r}return{}},addRow(){this.formData.field.push((0,I.Z)(c))},removeRow(s){this.formData.field.splice(s,1)},removeOption(s){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",s||[])},getRadioValue(s,r){this.formChange({key:r,value:s}),this.validateRadio()},validateRadio(){this.formData.props.required===void 0&&this.formData.props.disabled===void 0?this.radioValidateTip=this.$t("extensionProperty.selectRequiredOrUneditable"):this.radioValidateTip=""},validateField(){const s=(0,I.Z)(this.formData);if(s.length===0){this.fieldValidateTip=[];return}this.fieldValidateTip=[],s.field.forEach(r=>{r.refcolumn===""?this.fieldValidateTip.push(this.$t("extensionProperty.confirmFieldFilled")):this.fieldValidateTip.push("")})},formChange(s){const r=(0,I.Z)(this.formData),d=s.key;switch(d){case"disabled":case"required":r.props[d]=s.value.value;break;default:break}this.formData=r},selectTable(s,r){this.formData.field[r].refcolumn=s[0].Label,this.validateField()},clearTableName(s){this.formData.field[s].refcolumn="",this.validateField()},getSearchData(s){return m(this,null,function*(){let r=0;typeof s=="number"&&(r=(s-1)*this.pageSize);const d={table:"AD_COLUMN",startindex:r,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete d.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(d),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,$.Ds)(function(s){if(s===""){this.searchList=[];return}const r={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:s,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete r.fixedcolumns.AD_TABLE_ID,this.getKeyList(r).then(d=>{const h=d.row||[];this.searchList=h.map(o=>(Object.keys(o).forEach(u=>{o[u]=o[u].val}),o)),this.totalCount=this.dropList.totalRowCount})}),commonApi(s,r,d){const{hideColumns:h,displayKeys:o}=d;return new Promise(u=>{this.network.post(s,(0,x.d)(r)).then(v=>{if(v.data.code===0){const g=v.data.data.tabth,b=v.data.data.row;for(let S=Math.max(g.length-1,0);S>=0;S--){const O=g[S];o.includes(O.colname)?O.isak=!0:O.isak=!1,h.includes(O.colname)&&g.splice(S,1)}h.length>0&&b.forEach(S=>{for(const O in S)h.includes(O)&&delete S[O]}),u(v.data.data)}else u({})}).catch(()=>{u({})})})},getKeyList(s){return m(this,null,function*(){return new Promise(r=>{const d=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],h="/p/cs/QueryList",o=this.commonApi(h,{searchdata:s},{hideColumns:d,displayKeys:["DBNAME"]});r(o)})})},getFieldDefaultValue(){return m(this,null,function*(){const s=this.defaultData.field||[];if(s.length===0)return;const d=s.map(u=>u.refcolumn).join(","),h={table:"AD_COLUMN",startindex:0,range:20,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:d,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete h.fixedcolumns.AD_TABLE_ID;const o=(yield this.getKeyList(h)).row||[];s.forEach(u=>{const v=o.find(g=>g.DBNAME.val===u.refcolumn);this.$set(this.defaultFields,u.refcolumn,[{ID:v.ID.val,Label:v.DBNAME.val}])})})},init(){const s=(0,I.Z)(this.defaultData);s.props&&(this.disabledConfig.defaultValue=(0,w.qq)("label",this.disabledConfig.selectOptions,r=>r.value===s.props.disabled),this.requiredConfig.defaultValue=(0,w.qq)("label",this.requiredConfig.selectOptions,r=>r.value===s.props.required)),Object.keys(s).length>0&&(s.field?this.formData=s:this.formData=Object.assign({field:[(0,I.Z)(c)]},s))}},created(){return m(this,null,function*(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()})},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var a=p(1900),t=(0,a.Z)(i,C,N,!1,null,"61e66bf7",null);if(!1)var l;t.options.__file="src/components/extension-property/custom/StaticRules.vue";const n=t.exports},6418:(F,L,p)=>{"use strict";p.r(L),p.d(L,{default:()=>l});var C=function(){var n=this,s=n.$createElement,r=n._self._c||s;return r("div",[r("Description",{attrs:{option:n.option},on:{removeOption:n.removeOption}}),n._v(" "),n.showConfig?r("div",{staticClass:"tw-mt-20"},[n._v(`
    `+n._s(n.$t("extensionProperty.onlySelectType"))+`
  `)]):r("div",{staticClass:"tw-mt-20 form-group"},n._l(n.formData,function(d,h){return r("div",{key:h,staticClass:"tw-mt-10"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col row-title required-remark"},[n._v(`
          `+n._s(n.$t("extensionProperty.condition"))+n._s(h+1)+`\uFF1A
        `)]),n._v(" "),r("div",{staticClass:"col "},[r("Select",{attrs:{placeholder:n.$t("extensionProperty.selectQueryConditions"),clearable:""},on:{"on-change":n.validateForm},model:{value:d.operator,callback:function(o){n.$set(d,"operator",o)},expression:"condition.operator"}},n._l(n.operateOptions,function(o){return r("Option",{key:o.value,attrs:{value:o.value}},[n._v(`
              `+n._s(o.label)+`
            `)])}),1)],1),n._v(" "),r("div",{staticClass:"col"},[r("Input",{on:{"on-blur":n.validateForm},model:{value:d.key_value,callback:function(o){n.$set(d,"key_value",o)},expression:"condition.key_value"}})],1),n._v(" "),r("div",{staticClass:"col"},[r("DropDownSelectFilter",{attrs:{single:"","default-selected":n.dropDefaultList[d.table_id],data:n.dropList,"auto-data":n.searchList,"page-size":n.pageSize,"total-row-count":n.totalCount,"columns-key":n.columnsKey,hidecolumns:n.hidecolumns,placeholder:n.$t("extensionProperty.selectTable")},on:{"on-popper-show":n.getSearchData,"on-page-change":n.getSearchData,"on-input-value-change":n.inputSearchData,"on-fkrp-selected":function(o){return n.selectTable(o,h)},"on-clear":function(o){return n.clearTableName(h)}}})],1),n._v(" "),r("div",{staticClass:"col btn-group"},[n.formData.length-1===h?r("button",{staticClass:"operate-button",on:{click:n.addRow}},[r("i",{staticClass:"iconfont"},[n._v("\uEC3F")])]):n._e(),n._v(" "),n.formData.length>1?r("button",{staticClass:"operate-button",on:{click:function(o){return n.removeRow(h)}}},[r("i",{staticClass:"iconfont"},[n._v("\uED15")])]):n._e()])]),n._v(" "),n.errorList[h]?r("div",{staticClass:"error-tip tw-mt-10"},[n._v(`
        `+n._s(n.errorList[h])+`
      `)]):n._e()])}),0)],1)},N=[];C._withStripped=!0;var E=p(4174),T=p(2162),R=p(5331),A=p(8192),I=p(8517),$=p(2995),w=(n,s,r)=>new Promise((d,h)=>{var o=g=>{try{v(r.next(g))}catch(b){h(b)}},u=g=>{try{v(r.throw(g))}catch(b){h(b)}},v=g=>g.done?d(g.value):Promise.resolve(g.value).then(o,u);v((r=r.apply(n,s)).next())});const x="AD_TABLE",m={key_value:"",operator:"",table_id:""},_={name:"TableQuery",props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]},keyForm:{type:Object,default:()=>({})}},components:{Description:T.Z},inject:["network"],data(){return{formData:[(0,R.Z)(m)],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["AD_REFBY_TABLE_ID"],hidecolumns:["ID"],tableIdOfKey:"",displayTypeOfKey:"",typeOfKey:"",operateOptions:[],dropDefaultList:{},errorList:[]}},computed:{showConfig(){return this.tableIdOfKey&&this.displayTypeOfKey.includes("select")}},watch:{formData:{handler(){this.submitData()},deep:!0}},methods:{validateForm(){const n=(0,R.Z)(this.formData);if(n.length===0){this.errorList=[];return}this.errorList=[],n.forEach((s,r)=>{s.key_value===""||!s.operator||!s.table_id?this.errorList.push(this.$t("extensionProperty.checkCondition",{row:r+1})):this.errorList.push("")})},removeOption(n){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",n||[])},addRow(){this.formData.push((0,R.Z)(m))},removeRow(n){this.formData.splice(n,1)},clearTableName(n){this.formData[n].table_id="",this.validateForm()},getOperateOptions(n){return[{value:"=",label:"="}]},getSearchData(n){return w(this,null,function*(){let s=0;typeof n=="number"&&(s=(n-1)*this.pageSize);const r={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:s,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.dropList=yield this.getRelativeTable(r,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,A.Ds)(function(n){if(n===""){this.searchList=[];return}const s={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.getRelativeTable(s,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}).then(r=>{const d=r.row||[];this.searchList=d.map(h=>(Object.keys(h).forEach(o=>{h[o]=h[o].val}),h)).filter(h=>h.AD_REFBY_TABLE_ID.toUpperCase().includes(n.toUpperCase())),this.totalCount=this.dropList.totalRowCount})}),selectTable(n,s){this.formData[s].table_id=n[0].ID,this.validateForm()},commonApi(n,s,r){const{hideColumns:d,displayKeys:h,bindId:o}=r;return new Promise(u=>{this.network.post(n,(0,I.d)(s)).then(v=>{if(v.data.code===0){const g=v.data.data.tabth,b=v.data.data.row;o&&b.forEach(S=>{const[O,P]=o.targetKey.split(".");S.ID.val=S[O][P]});for(let S=Math.max(g.length-1,0);S>=0;S--){const O=g[S];h.includes(O.colname)?O.isak=!0:O.isak=!1,d.includes(O.colname)&&g.splice(S,1)}d.length>0&&b.forEach(S=>{for(const O in S)d.includes(O)&&delete S[O]}),u(v.data.data)}else u({})}).catch(()=>{u({})})})},requestKeysData(n){return w(this,null,function*(){return new Promise(s=>{const r=["ORDERNO","MASK","AD_VERSION_ID","ISACTIVE","MODIFIERNAME","MODIFIEDDATE","REALTABLE_ID","AD_TABLECATEGORY_ID","AD_OBJUICONF_ID","FILTER","PROPS","ISDISPATCHABLE","PROC_SUBMIT","URL","CUSTOMIZENO","DISP_COLUMN_ID","ISTREE"],d="/p/cs/QueryList",h=this.commonApi(d,n,{hideColumns:r,displayKeys:["NAME"]});s(h)})})},getRelativeTable(n,s){return w(this,null,function*(){return new Promise(r=>{const d=["ISACTIVE","ORDERNO","AD_REFBY_COLUMN_ID","FILTER","ASSOCTYPE","INLINEMODE","AD_VERSION_ID","MODIFIERNAME","MODIFIEDDATE"],h="/p/cs/objectTableItem",o=this.commonApi(h,n,{hideColumns:d,displayKeys:["\u5173\u8054\u8868","\u63CF\u8FF0"],bindId:s});r(o)})})},initData(){const{DISPLAYTYPE:n,AD_TABLE_ID:s,COLTYPE:r,AD_TABLE_ID_LABEL:d}=this.keyForm||{};this._table_id_=s,this.displayTypeOfKey=n,this.tableIdOfKey=d,this.typeOfKey=r,this.operateOptions=this.getOperateOptions(this.typeOfKey);const h=(0,R.Z)(this.defaultData);this.defaultData&&this.defaultData.length>0&&(this.formData=h)},filterForm(){const n=(0,R.Z)(this.formData);for(let s=n.length-1;s>=0;s--){const r=n[s];(r.key_value===""||!r.operator||!r.table_id)&&n.splice(s,1)}return n},submitData(){const n=this.filterForm();n.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:n})},restoreFormData(){return w(this,null,function*(){const n=this.defaultData,s=n.length;if(s===0)return;const r=n.map(o=>o.table_id),d={searchdata:{table:x,startindex:0,range:s,fixedcolumns:{ID:r,ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1}},h=(yield this.requestKeysData(d)).row||[];n.forEach(o=>{const u=h.find(v=>Number(v.ID.val)===Number(o.table_id));this.$set(this.dropDefaultList,o.table_id,[{ID:o.table_id,Label:u.NAME.val}])})})}},created(){this.initData(),this.restoreFormData()},beforeCreate(){this.$t=E.ZP.t.bind(E.ZP)}};var i=p(1900),a=(0,i.Z)(_,C,N,!1,null,"760dadbc",null);if(!1)var t;a.options.__file="src/components/extension-property/custom/TableQuery.vue";const l=a.exports},9109:(F,L,p)=>{var C={"./BindKey.vue":2646,"./DateShortcut.vue":203,"./DisableButton.vue":539,"./FilterColVal.vue":1953,"./FormRequest.vue":9423,"./HiddenSubtable.vue":7225,"./Highlight.vue":5453,"./MultiTab.vue":3089,"./OperateColumnButton.vue":4830,"./PassWord.vue":2799,"./PinnedColumns.vue":4316,"./RefcolFilter.vue":7717,"./RefcolSearch.vue":4616,"./RowToColumn.vue":7033,"./StaticRules.vue":2498,"./TableQuery.vue":6418};function N(T){var R=E(T);return p(R)}function E(T){if(!p.o(C,T)){var R=new Error("Cannot find module '"+T+"'");throw R.code="MODULE_NOT_FOUND",R}return C[T]}N.keys=function(){return Object.keys(C)},N.resolve=E,F.exports=N,N.id=9109}}]);

//# sourceMappingURL=ExtensionPropertyWrap.js.map