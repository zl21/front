(self.webpackChunk$Bcl=self.webpackChunk$Bcl||[]).push([[642],{2599:(P,A,p)=>{A=P.exports=p(3645)(!1),A.push([P.id,`
.extentionObjectGroup[data-v-35f3dc3e] {
  display: flex;
  flex-direction: column;
}
`,""])},8921:(P,A,p)=>{A=P.exports=p(3645)(!1),A.push([P.id,`/* tailwind\u63D2\u4EF6\u5F03\u7528\u4E86\uFF0C\u6240\u4EE5\u628A\u4E4B\u524D\u7684\u6837\u5F0F\u76F4\u63A5\u653E\u8FD9\u91CC\u7BA1\u7406 */
.tw-inline-block {
  display: inline-block
}

.tw-flex {
  display: flex
}

.tw-flex-grow {
  flex-grow: 1
}

.tw-mt-10 {
  margin-top: 10px
}

.tw-mt-20 {
  margin-top: 20px
}

.tw-mt-4 {
  margin-top: 4px
}

.tw-mb-10 {
  margin-bottom: 10px
}

.one-line-flow {
  overflow: hidden;
  white-space: nowrap; 
  text-overflow: ellipsis; 
}

.text-right {
  text-align: right
}

.text-center {
  text-align: center
}

.text-left {
  text-align: left
}

.flex-right {
  justify-content: flex-end
}

.flex-center {
  justify-content: center
}

.flex-left {
  justify-content: flex-start
}`,""])},3800:(P,A,p)=>{"use strict";p.d(A,{Z:()=>N});var R=function(){var f=this,u=f.$createElement,v=f._self._c||u;return v("div",{staticClass:"description"},[v("div",{staticStyle:{flex:"1"}},[v("span",{staticClass:"fieldName"},[f._v(`
      `+f._s(f.option.name)+` \uFF1A
    `)]),f._v(" "),v("span",{staticClass:"content"},[f._v(`
      `+f._s(f.option.description)+`
    `)])]),f._v(" "),v("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:f.removeOption}},[v("Button",{attrs:{title:f.$t("extensionProperty.clearConfig"),icon:"iconbj_delete",type:"primary",shape:"circle"}})],1)])},x=[],I=p(4174);const L={name:"Description",props:{option:{type:Object,default:()=>({})}},methods:{clearDomValue(){document.querySelector(".extentionProperty .middle").querySelectorAll("input,select").forEach(u=>{u.value="",u.type==="radio"&&u.value===""?u.checked=!0:u.checked=!1})},removeOption(){switch(this.option.type){case"input":this.$emit("removeOption",[this.option.key]);break;case"radio":this.$emit("removeOption",[this.option.key]);break;case"object-group":this.$emit("removeOption",[this.option.key]);break;case"input-group":this.option.key==="__root__"?this.$emit("removeOption",this.option.inputLists.map(f=>f.key)):this.$emit("removeOption",[this.option.key]);break;default:this.$emit("removeOption",[this.option.key]);break}this.clearDomValue()}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var O=p(1900),E=(0,O.Z)(L,R,x,!1,null,"e916f404",null);const N=E.exports},4533:(P,A,p)=>{"use strict";p.d(A,{Z:()=>N});var R=function(){var f=this,u=f.$createElement,v=f._self._c||u;return v("div",{staticClass:"tw-mt-10"},[v("div",{staticClass:"row"},[f.rowLabel?v("div",{staticClass:"col row-title",class:[f.rowLabelClass]},[v("span",{class:[f.isRequired?"required-remark":""]},[f._v(f._s(f.rowLabel)+"\uFF1A")])]):f._e(),f._v(" "),f._t("default"),f._v(" "),f.showOperationButton?v("div",{staticClass:"col btn-group"},[f.rowCount-1===f.rowIndex?v("button",{staticClass:"operate-button",on:{click:f.addRow}},[v("i",{staticClass:"iconfont"},[f._v("\uEC3F")])]):f._e(),f._v(" "),f.rowCount>1?v("button",{staticClass:"operate-button",on:{click:f.removeRow}},[v("i",{staticClass:"iconfont"},[f._v("\uED15")])]):f._e()]):f._e()],2),f._v(" "),f.errorTip?v("div",{staticClass:"error-tip tw-mt-10"},[v("div",{staticClass:"tw-inline-block row-title label-placeholder",class:[f.rowLabelClass]}),f._v(`
    `+f._s(f.errorTip)+`
  `)]):f._e()])},x=[],I=p(2995);const L={name:"",props:{rowIndex:{type:Number,default:-1},rowCount:{type:Number,default:-1},rowLabelClass:{type:String,default:""},rowLabel:{type:String,default:""},showOperationButton:{type:Boolean,default:!1},errorTip:{type:String,default:""},isRequired:{type:Boolean,default:!1}},data(){return{}},methods:{addRow(){this.$emit("addRow")},removeRow(){this.$emit("removeRow")}}};var O=p(1900),E=(0,O.Z)(L,R,x,!1,null,"2347b40d",null);const N=E.exports},4648:(P,A,p)=>{"use strict";p.d(A,{Z:()=>O});var R=p(3800),x=p(4533),I=p(5331),T=p(8517),L=p(4174);const O={inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{},keyForm:{type:Object,default:()=>({})}},data(){return{dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"]}},components:{Description:R.Z,ExtentionRowItem:x.Z},beforeCreate(){this.$t=L.ZP.t.bind(L.ZP)},methods:{addRow(E,$){E.push((0,I.Z)($))},removeRow(E,$){E.splice($,1)},removeOption(E){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",E||[])},commonApi(E,$,N){const{hideColumns:f,displayKeys:u}=N;return new Promise(v=>{this.network.post(E,(0,T.d)($)).then(s=>{if(s.data.code===0){const a=s.data.data.tabth,e=s.data.data.row;for(let l=Math.max(a.length-1,0);l>=0;l--){const o=a[l];u.includes(o.name)?o.isak=!0:o.isak=!1,f.includes(o.colname)&&a.splice(l,1)}f.length>0&&e.forEach(l=>{for(const o in l)f.includes(o)&&delete l[o]}),v(s.data.data)}else v({})}).catch(()=>{v({})})})},selectValue(E,$,N,f){this.$set($,N,E[0][f])},clearValue(E,$){this.$set(E,$,"")}}}},2085:(P,A,p)=>{"use strict";p.d(A,{Z:()=>N});var R=function(){var f=this,u=f.$createElement,v=f._self._c||u;return v("RadioGroup",f._g(f._b({on:{"on-change":f.radioChange},model:{value:f.formData.defaultValue,callback:function(s){f.$set(f.formData,"defaultValue",s)},expression:"formData.defaultValue"}},"RadioGroup",f.$attrs,!1),f.$listeners),f._l(f.formData.selectOptions,function(s){return v("Radio",{key:s.label,attrs:{label:s.label}})}),1)},x=[],I=p(5331);const L={name:"ak-radio",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(f){this.formData=(0,I.Z)(f)},deep:!0,immediate:!0}},data(){return{formData:{}}},methods:{radioChange(f){const u=this.options.selectOptions.find(v=>v.label===f);this.$emit("change",u)}}};var O=p(1900),E=(0,O.Z)(L,R,x,!1,null,"343c4941",null);const N=E.exports},1847:(P,A,p)=>{"use strict";p.d(A,{Z:()=>x});function R(I,T){let L=I;I.tagName!=="INPUT"&&(L=I.querySelector("input")),T.arg&&T.arg==="NUMBER"?L.onkeypress=function(E){E=E||window.event;const $=typeof E.charCode=="number"?E.charCode:E.keyCode,N=/\d/,f=[];T.modifiers.comma&&f.push(44),T.modifiers.decimal&&f.push(46),!N.test(String.fromCharCode($))&&$>9&&!E.ctrlKey&&!f.includes($)&&(E.preventDefault?E.preventDefault():E.returnValue=!1)}:L.onkeypress=function(){}}const x=R},9277:(P,A,p)=>{"use strict";p.d(A,{qq:()=>R,kJ:()=>I});function R(T,L,O){return L.find(O)[T]}function x(T){return T.length===0}function I(T){return Object.prototype.toString.call(T)==="[object Array]"}},8192:(P,A,p)=>{"use strict";p.d(A,{Ds:()=>R,mf:()=>I});function R(T,L=200){let O;return function(...E){const $=this,N=E;clearTimeout(O),O=setTimeout(()=>T.apply($,N),L)}}function x(){return window.navigator.userAgent.indexOf("MSIE")>=1}function I(T){return typeof T=="function"}},8457:(P,A,p)=>{var R=p(2599);typeof R=="string"&&(R=[[P.id,R,""]]);var x,I,T={hmr:!0};T.transform=x,T.insertInto=void 0;var L=p(6723)(R,T);R.locals&&(P.exports=R.locals)},2995:(P,A,p)=>{var R=p(8921);typeof R=="string"&&(R=[[P.id,R,""]]);var x,I,T={hmr:!0};T.transform=x,T.insertInto=void 0;var L=p(6723)(R,T);R.locals&&(P.exports=R.locals)},9118:(P,A,p)=>{"use strict";p.d(A,{Z:()=>N});var R=function(){var f=this,u=f.$createElement,v=f._self._c||u;return v("div",{ref:"radioItemWrapper",staticClass:"radioItemWrapper"},[f._l(f.option.enumerateValue,function(s,a){return v("label",{key:a,staticClass:"radioItem",attrs:{for:f.option.key+"-"+f.guid+"-"+a}},[v("input",{attrs:{id:f.option.key+"-"+f.guid+"-"+a,type:"radio",name:f.option.key+"-"+f.guid},domProps:{value:s.value},on:{change:function(e){return f.radioValueChange(s.value)}}}),f._v(`
    `+f._s(s.text)+`
  `)])}),f._v(" "),v("label",{staticClass:"radioItem",attrs:{for:f.option.key+"-"+f.guid+"-clean"}},[v("input",{attrs:{id:f.option.key+"-"+f.guid+"-clean",type:"radio",name:f.option.key+"-"+f.guid},domProps:{value:"__empty__"},on:{change:function(s){return f.radioValueChange("")}}}),f._v(" "),v("span",[f._v(`
      `+f._s(f.$t("extensionProperty.clearConfig"))+`
    `)])])],2)},x=[],I=p(4174);const T=()=>Math.round(Math.random()*1e10),O={name:"EnumerateRadioItem",data(){return{guid:T()}},methods:{radioValueChange(f){this.$emit("radioValueChange",{key:this.option.key,value:f})}},props:{option:{type:Object,default:()=>({})},breakLine:{type:Boolean,default:!0},defaultData:{type:[Boolean,String],default:"__empty__"}},mounted(){this.$refs.radioItemWrapper.querySelectorAll("input[type=radio]").forEach(f=>{`${f.value}`==`${this.defaultData}`&&(f.checked=!0)})},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var E=p(1900),$=(0,E.Z)(O,R,x,!1,null,"468d9d49",null);const N=$.exports},3384:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>kt});var R=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"extentionProperty tw-mt-10"},[m("div",{staticClass:"left"},[m("div",{staticClass:"search-pannel"},[m("Input",{attrs:{search:"","enter-button":t.$t("tips.find"),placeholder:t.$t("extensionProperty.enterConfig")},on:{"on-change":t.filterConfig},model:{value:t.configName,callback:function(_){t.configName=_},expression:"configName"}})],1),t._v(" "),m("ul",{staticClass:"menu-list"},[t._l(t.configList,function(_,w){return m("li",{key:w,staticClass:"menu",class:{active:w===t.currentIndex},on:{click:function(k){t.scrollIntoView(_,w)}}},[m("span",{staticClass:"config-title"},[t._v(t._s(_.name))]),t._v(" "),m("div",{staticClass:"extentionProperty-key"},[t._v(t._s(_.key==="__root__"?"":_.key))])])}),t._v(" "),t.configList.length===0?m("li",{staticStyle:{"justify-content":"center"}},[t._v(`
        `+t._s(t.$t("extensionProperty.noConfiguration"))+`
      `)]):t._e()],2)]),t._v(" "),m("div",{staticClass:"middle"},[t._l(t.configList,function(_,w){return[w===t.currentIndex?m("div",{key:_.name,staticClass:"item-render-area"},[_.type==="input"?m("ExtentionInput",{attrs:{id:_.key+"-"+w+"-"+t.guid,option:_,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="radio"?m("ExtentionRadio",{attrs:{id:_.key+"-"+w+"-"+t.guid,option:_,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="select"?m("ExtentionSelect",{attrs:{id:_.key+"-"+w+"-"+t.guid,item:_,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="input-group"?m("ExtentionInputGroup",{attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData)),option:_},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="object-group"?m("ExtentionObjectGroup",{attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key],option:_},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="object-value"?m("ExtensionObjectValue",{attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key],option:_},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="options-group"?m("ExtentionOptions",{attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key],option:_},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="keyValue"?m("KeyValueItem",{attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData)),option:_},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),_.type==="custom"?m(_.component,{tag:"components",attrs:{id:_.key+"-"+w+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[_.key],option:_,keyForm:t.keyForm},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e()],1):t._e()]})],2),t._v(" "),m("div",{staticClass:"right"},[m("textarea",{attrs:{readonly:""},domProps:{value:t.formatedRootData}})])])},x=[],I=p(4174),T=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"extentionCellInput"},[m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),m("div",{staticClass:"content"},[m("LabelWithInput",{attrs:{item:t.option,"default-data":t.defaultData},on:{inputValueChange:t.inputValueChange}})],1)],1)},L=[],O=p(3800),E=p(7875);const N={name:"ExtentionInput",components:{Description:O.Z,LabelWithInput:E.Z},methods:{removeOption(t){this.$emit("removeOption",t||[])},inputValueChange({key:t,value:y}){this.$emit("dataChange",{key:t,value:y})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}}};var f=p(1900),u=(0,f.Z)(N,T,L,!1,null,null,null);const v=u.exports;var s=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"extentionRadio"},[m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),m("div",{staticClass:"content"},[m("EnumerateRadioItem",{attrs:{"default-data":t.defaultData,option:t.option},on:{radioValueChange:t.radioValueChange}})],1)],1)},a=[],e=p(9118);const o={name:"ExtentionRadio",components:{Description:O.Z,EnumerateRadioItem:e.Z},methods:{removeOption(t){this.$emit("removeOption",t||[])},radioValueChange({key:t,value:y}){this.$emit("dataChange",{key:t,value:y})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};var n=(0,f.Z)(o,s,a,!1,null,null,null);const c=n.exports;var d=p(3869),i=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"extentionObjectGroup"},[t.showDescription?m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),m("div",{staticClass:"content-row"},[t.option.showLabel?m("div",{staticClass:"left"},[m("label",[t._v(t._s(t.option.name))]),t._v(" "),m("label",[t._v(t._s(t.option.key))])]):t._e(),t._v(" "),m("div",{staticClass:"right"},t._l(t.dataArray,function(_,w){return m("div",{key:w,staticClass:"content"},[w<=t.currentIndex?m("ObjectGroupItem",{attrs:{"object-group-index":w,"default-data":t.defaultData[w]||{},data:_,option:t.option,"show-add-button":t.currentIndex===w&&t.currentIndex!==9,"show-minus-button":t.currentIndex===w&&t.currentIndex!==0},on:{objectGroupItemChange:t.objectGroupItemChange,addButtonClick:t.addButtonClick,minusButtonClick:t.minusButtonClick}}):t._e()],1)}),0)])],1)},r=[],h=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"labelWithObjectGroup"},[t._l(t.option.objectInfo,function(_,w){return[_.type==="input"?m("LabelWithInput",{key:w,attrs:{item:_,"default-data":t.defaultData[_.key]},on:{inputValueChange:t.objectGroupValueChange}}):t._e(),t._v(" "),_.type==="radio"?m("LabelWithRadio",{key:w,attrs:{item:_,"default-data":t.defaultData[_.key]},on:{radioValueChange:t.objectGroupValueChange}}):t._e(),t._v(" "),_.type==="select"?m("LabelWithSelect",{key:w,attrs:{item:_,"default-data":t.defaultData[_.key]},on:{selectValueChange:t.objectGroupValueChange}}):t._e()]}),t._v(" "),t.showAddButton&&!t.currentDataIsEmpty?m("button",{staticClass:"operate-button",on:{click:t.addButtonClick}},[t._v(`
    +
  `)]):t._e(),t._v(" "),t.showMinusButton?m("button",{staticClass:"operate-button",on:{click:t.minusButtonClick}},[t._v(`
    -
  `)]):t._e()],2)},D=[],g=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"input-group-item"},[m("div",{staticClass:"cell"},[m("LabelForInput",{attrs:{item:t.item}}),t._v(" "),m("EnumerateRadioItem",{attrs:{option:t.item,"break-line":!1,"default-data":t.defaultData},on:{radioValueChange:t.radioValueChange}})],1)])},C=[],b=p(6926);const M={name:"LabelWithRadio",components:{LabelForInput:b.Z,EnumerateRadioItem:e.Z},methods:{radioValueChange({key:t,value:y}){this.$emit("radioValueChange",{key:t,value:y})}},props:{item:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};var B=(0,f.Z)(M,g,C,!1,null,"4e551a1b",null);const K=B.exports,q={name:"ObjectGroupItem",data(){return{currentData:{}}},components:{LabelWithInput:E.Z,LabelWithRadio:K,LabelWithSelect:d.Z},methods:{objectGroupValueChange({key:t,value:y}){this.currentData=Object.assign({},this.currentData,{[t]:y}),y===""&&delete this.currentData[t],this.$emit("objectGroupItemChange",this.objectGroupIndex,{key:t,value:y,belongKey:this.option.key})},addButtonClick(){this.$emit("addButtonClick",{belongKey:this.option.key})},minusButtonClick(){this.$emit("minusButtonClick",{belongKey:this.option.key})}},props:{option:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},showAddButton:{type:Boolean,default:!1},showMinusButton:{type:Boolean,default:!1},objectGroupIndex:{type:Number,default:0},defaultData:{type:Object,default:()=>({})}},computed:{currentDataIsEmpty(){return JSON.stringify(this.currentData)==="{}"}},mounted(){this.currentData=JSON.parse(JSON.stringify(this.defaultData))}};var tt=(0,f.Z)(q,h,D,!1,null,"b3d595e2",null);const et=tt.exports,at=t=>{const y=[];if(t<=0)return[];for(let m=0;m<t;m++)y.push({});return y},st={name:"ExtentionObjectGroup",data(){return{currentIndex:0,dataArray:at(10)}},components:{Description:O.Z,ObjectGroupItem:et},methods:{removeOption(t){this.$emit("removeOption",t||[])},objectGroupItemChange(t,{key:y,value:m}){let _=JSON.parse(JSON.stringify(this.defaultData||[]));m===""?_[t]&&_[t][y]!==void 0&&(delete _[t][y],_.length===1&&t===0&&JSON.stringify(_[t])==="{}"&&_.splice(t,1)):_[t]=Object.assign({},_[t],{[y]:m}),_=JSON.parse(JSON.stringify(_)).map(w=>w||{}),this.$emit("dataChange",{key:this.option.key,value:_.length===0?"":_},t)},addButtonClick(){this.currentIndex>=9||(this.currentIndex=this.currentIndex+1)},minusButtonClick(){if(this.currentIndex<=0)return;this.currentIndex=this.currentIndex-1;const t=JSON.parse(JSON.stringify(this.defaultData||[]));t.pop(),this.$emit("dataChange",{key:this.option.key,value:t})}},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Array],default:()=>[]}},created(){this.dataArray=this.dataArray.map((t,y)=>t||this.defaultData[y]),this.currentIndex=this.defaultData.length-1>=0?this.defaultData.length-1:0}};var Mt=p(8457),nt=(0,f.Z)(st,i,r,!1,null,"35f3dc3e",null);const G=nt.exports;var it=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"extentionInputGroup"},[m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),m("div",{staticClass:"content"},[t._l(t.option.inputLists,function(_,w){return[_.type==="input"?m("LabelWithInput",{key:w,attrs:{item:_,"default-data":t.option.key==="__root__"?t.defaultData[_.key]:t.defaultData[t.option.key]?t.defaultData[t.option.key][_.key]:""},on:{inputValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),_.type==="radio"?m("LabelWithRadio",{key:w,attrs:{item:_,index:w,"default-data":t.setDefaultData(t.option,_)},on:{radioValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),_.type==="select"?m("LabelWithSelect",{key:w,attrs:{item:_,index:w,"default-data":t.setDefaultData(t.option,_)},on:{selectValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),_.type==="object-group"?m("ExtentionObjectGroup",{key:w,attrs:{"show-description":!1,option:_,index:w,"default-data":t.option.key==="__root__"?t.defaultData[_.key]:(t.defaultData[t.option.key]||{})[_.key]},on:{dataChange:t.objectGroupValueChange}}):t._e()]})],2)],1)},ot=[];const lt={name:"ExtentionInputGroup",components:{Description:O.Z,LabelWithInput:E.Z,LabelWithRadio:K,LabelWithSelect:d.Z,ExtentionObjectGroup:G},methods:{setDefaultData(t,y){return t.key==="queryrule"&&y.key==="required"?this.defaultData.webconf?this.defaultData.webconf.required:"__empty__":t.key==="__root__"?this.defaultData[y.key]:this.defaultData[t.key]?this.defaultData[t.key][y.key]:"__empty__"},removeOption(t){if(this.$emit("removeOption",t||[]),this.option.key==="queryrule"){const y="webconf",m="required";this.$emit("dataChange",{key:y,value:Object.assign(this.defaultData[y]||{},{[m]:void 0})})}},objectGroupValueChange({key:t,value:y}){if(this.option.key==="__root__")this.$emit("dataChange",{key:t,value:y});else if(this.option.key!=="__root__")if(y!=="")this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[t]:y})});else{const m=this.defaultData[this.option.key];delete m[t],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(m)==="{}"?"":m})}},inputGroupValueChange({key:t,value:y}){if(this.option.key==="__root__"){this.$emit("dataChange",{key:t,value:y});return}if(this.option.key==="queryrule"&&t==="required"){const m="webconf";if(y===""){const _=JSON.parse(JSON.stringify(this.defaultData));delete _[m][t],this.$emit("dataChange",{key:m,value:JSON.stringify(_[m])==="{}"?"":_[m]})}else this.$emit("dataChange",{key:m,value:Object.assign(this.defaultData[m]||{},{[t]:y})})}else if(y===""){const m=JSON.parse(JSON.stringify(this.defaultData));delete m[this.option.key][t],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(m[this.option.key])==="{}"?"":m[this.option.key]})}else this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[t]:y})})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})}}};var rt=(0,f.Z)(lt,it,ot,!1,null,"3f116f30",null);const ct=rt.exports;var ut=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",[t.showDescription?m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),m("div",{staticClass:"tw-mt-20 form-group"},t._l(t.option.components,function(_,w){return m("div",{key:w,staticClass:"row tw-mt-20"},[m("div",{staticClass:"label-column"},[m("p",[t._v(t._s(_.name))]),t._v(" "),m("p",[t._v("["+t._s(_.key)+"]\uFF1A")])]),t._v(" "),m("div",{staticClass:"item-column"},[m("div",{staticClass:"item-row tw-flex-grow tw-flex"},[_.type==="input"?m("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:_.inputType}],attrs:{placeholder:_.placeholder},on:{input:function(k){return t.inputChange(k,_.key)}},model:{value:t.formData[_.key],callback:function(k){t.$set(t.formData,_.key,k)},expression:"formData[component.key]"}}):t._e(),t._v(" "),_.type==="select"?m("Select",{attrs:{clearable:""},on:{"on-change":function(k){return t.selectChange(k,_.key)}}},t._l(_.selectOptions,function(k){return m("Option",{key:k.value,attrs:{value:k.value}},[t._v(`
              `+t._s(k.label)+`
            `)])}),1):t._e(),t._v(" "),_.type==="radio"?m("AKRadio",{attrs:{options:_.options},on:{change:function(k){return t.radioChange(k,_.key)}}}):t._e()],1)])])}),0)],1)},dt=[],pt=p(2085),j=p(5331),Y=p(1847),Bt=p(2995);const ht={name:"ObjectValue",directives:{inputNumber:Y.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:O.Z,AKRadio:pt.Z},data(){return{formData:null}},methods:{removeOption(t){this.initData(),this.$emit("removeOption",t||[])},initData(t){if(typeof t=="object")this.formData=(0,j.Z)(t),this.option.components.forEach(y=>{if(y.type==="radio"){const m=y.options.selectOptions.find(_=>_.value===t[y.key]);y.options.defaultValue=m.label}});else{const y={};this.option.components.forEach(m=>{y[m.key]=m.defaultValue,m.type==="radio"&&(m.options=(0,j.Z)(m.options))}),this.formData=y}},inputChange(t,y){this.formData[y]=t,this.valueChange()},radioChange(t,y){this.formData[y]=t.value,this.valueChange()},selectChange(t,y){this.formData[y]=t.value,this.valueChange()},valueChange(t){let y=!1;this.option.components.forEach(m=>{m.isClearConfig&&m.canClear&&m.canClear(this.formData)?y=!0:m.canClear&&m.canClear(this.formData)&&(this.formData[m.key]=void 0)}),Object.keys(JSON.parse(JSON.stringify(this.formData))).length===0||y?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:this.formData})}},created(){this.initData(this.defaultData)}};var ft=(0,f.Z)(ht,ut,dt,!1,null,"86d25eb8",null);const mt=ft.exports;var vt=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",{staticClass:"ExtentionOptions"},[t.showDescription?m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),m("div",{staticClass:"content"},[m("LabelWithInput",{attrs:{item:t.clonameOptions,"default-data":t.defaultData.colnames},on:{inputValueChange:t.inputValueChange,inputBlur:t.inputBlur}})],1),t._v(" "),t._l(t.defaultData.rules,function(_,w){return m("div",{key:w,staticClass:"itme"},t._l(t.defaultData.colnames.split(","),function(k,F){return m("p",{key:F,staticClass:"colnameItem"},[m("span",[t._v(t._s(k))])])}),0)})],2)},_t=[];const yt={name:"ExtentionOptions",components:{Description:O.Z,LabelWithInput:E.Z},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Object],default:()=>({colnames:"",rules:[]})}},data(){return{clonameOptions:{name:this.$t("extensionProperty.conditionField"),key:"colnames",type:"input",description:this.$t("extensionProperty.controlColumnField")},clonameChange:!1}},watch:{"defaultData.colnames":function(t,y){t!==y&&!t?this.clonameChange=!0:this.clonameChange=!1}},methods:{removeOption(){this.$emit("removeOption",{})},inputBlur(){if(this.clonameChange&&this.$Modal.warning({title:this.$t("tips.warning"),content:this.$t("extensionProperty.continueChange"),mask:!0,onOk:()=>{const t="rules",y=[];this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[t]:y})})}}),this.defaultData.colnames&&(!this.defaultData.rules||this.defaultData.rules.length===0)){const t={jsonValue:{},buttons:[]};this.defaultData.colnames.split(",").map(y=>(t.jsonValue[y]=null,y)),this.$set(this.defaultData.rules,0,t),this.$emit("dataChange",{key:this.option.key,value:JSON.parse(JSON.stringify(this.defaultData))})}},inputValueChange({key:t,value:y}){if(y===""){const m=JSON.parse(JSON.stringify(this.defaultData));delete m[this.option.key][t],this.$emit("dataChange",{key:this.option.key,value:JSON.stringify(m[this.option.key])==="{}"?"":m[this.option.key]})}else{const m=JSON.parse(JSON.stringify(this.defaultData));m[t]=y,this.$emit("dataChange",{key:this.option.key,value:m})}}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var Dt=(0,f.Z)(yt,vt,_t,!1,null,"6a3f7bfc",null);const gt=Dt.exports;var Ct=function(){var t=this,y=t.$createElement,m=t._self._c||y;return m("div",[t.showDescription?m("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),t._l(t.option.components,function(_,w){return[!_.isShow||_.isShow&&_.isShow(t.formData)?m("div",{key:w,staticClass:"tw-mt-20 form-group"},[m("div",{staticClass:"row tw-mt-20"},[m("div",{staticClass:"label-column"},[m("p",[t._v(t._s(_.name))]),t._v(" "),m("p",[t._v("["+t._s(_.key)+"]\uFF1A")])]),t._v(" "),m("div",{staticClass:"item-column"},[m("div",{staticClass:"item-row tw-flex-grow tw-flex"},[_.type==="input"?m("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:_.inputType}],attrs:{placeholder:_.placeholder},on:{input:function(k){return t.valueChange(k,w)}},model:{value:t.formData[_.key],callback:function(k){t.$set(t.formData,_.key,k)},expression:"formData[component.key]"}}):t._e(),t._v(" "),_.type==="select"?m("Select",{attrs:{clearable:""},on:{"on-change":function(k){return t.valueChange(k,w)}},model:{value:t.formData[_.key],callback:function(k){t.$set(t.formData,_.key,k)},expression:"formData[component.key]"}},t._l(_.selectOptions,function(k){return m("Option",{key:k.value,attrs:{value:k.value}},[t._v(`
                `+t._s(k.label)+`
              `)])}),1):t._e()],1)])])]):t._e()]})],2)},bt=[];const It={name:"KeyValueItem",directives:{inputNumber:Y.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:O.Z},data(){return{formData:{}}},methods:{removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.option.components.forEach(y=>{this.$emit("dataChange",{key:y.key,value:""})})},initData(){this.option.components.forEach(t=>{this.formData[t.key]=void 0}),typeof this.defaultData=="object"&&(this.formData=(0,j.Z)(this.defaultData))},clearHiddenComponent(){this.option.components.forEach(t=>{t.isShow&&!t.isShow(this.formData)&&(this.formData[t.key]=void 0,this.$emit("dataChange",{key:t.key,value:""}))})},valueChange(t,y){this.clearHiddenComponent(),t?this.$emit("dataChange",{key:this.option.components[y].key,value:t}):this.$emit("dataChange",{key:this.option.components[y].key,value:""})}},created(){this.initData()}};var Et=(0,f.Z)(It,Ct,bt,!1,null,"1e8aa183",null);const Ot=Et.exports;var St=p(3529),W=p(8666),At=p(4470),Lt=Object.defineProperty,z=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,H=(t,y,m)=>y in t?Lt(t,y,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[y]=m,$t=(t,y)=>{for(var m in y||(y={}))Tt.call(y,m)&&H(t,m,y[m]);if(z)for(var m of z(y))Rt.call(y,m)&&H(t,m,y[m]);return t},Nt=(t,y,m)=>new Promise((_,w)=>{var k=Z=>{try{V(m.next(Z))}catch(U){w(U)}},F=Z=>{try{V(m.throw(Z))}catch(U){w(U)}},V=Z=>Z.done?_(Z.value):Promise.resolve(Z.value).then(k,F);V((m=m.apply(t,y)).next())});const Q=p(9109),X={};Q.keys().forEach(t=>{const y=Q(t).default;X[y.name]=y});const xt=()=>Math.round(Math.random()*1e10),wt={name:"ExtentionPropertyWrap",data(){return{guid:xt(),rootData:{},currentIndex:0,formatedRootData:"",configName:"",configList:[],keyForm:{},supportType:""}},components:$t({ExtentionInput:v,ExtentionRadio:c,ExtentionSelect:d.Z,ExtentionObjectGroup:G,ExtensionObjectValue:mt,ExtentionInputGroup:ct,ExtentionOptions:gt,KeyValueItem:Ot},X),props:{defaultData:{},realData:{type:[String,Object],default:()=>({})},formInfo:{type:Object,default:()=>({})},tableName:{tableName:String},extentionConfig:{type:Array,default:()=>[]},webconf:{type:Object,default:()=>({})}},computed:{options(){const t=this.tableName,y=this.keyForm,m=(0,St.Z)();let _=[];if((0,At.Q)(y))return _;if(t==="AD_COLUMN"){_=m,this.supportType&&this.supportType!=="ALL"&&(_=_.filter(F=>!F.supportType||F.supportType&&F.supportType.indexOf(this.supportType)!==-1)),this.supportType==="byPage"&&y.DISPLAYTYPE!=="image"&&(_=_.filter(F=>F.key!=="ImageSize")),this.supportType==="byPage"&&y.DISPLAYTYPE!=="doc"&&(_=_.filter(F=>!["filesLength","filesize","UploadAccept"].includes(F.key)));const w=["display","targetField"];if(_=_.filter(F=>!w.includes(F.key)),y.DESCRIPTION==="\u6269\u5C55\u5C5E\u6027"){const F=m.find(V=>V.name===this.$t("extensionProperty.displayControl"));_.push(F)}if(y.DESCRIPTION==="\u6269\u5C55\u5C5E\u6027"&&y.AD_TABLE_ID_LABEL==="AD_COLUMN"){const F=m.find(V=>V.key==="targetField");_.push(F)}if(y.DESCRIPTION==="\u8BFB\u5199\u89C4\u5219"||y.DESCRIPTION==="\u8BFB\u5199\u6253\u5370\u89C4\u5219"){const F=m.find(V=>V.name===this.$t("extensionProperty.readWriteDisplay"));_.push(F)}const k=(0,j.Z)(m.find(F=>F.name===this.$t("extensionProperty.expansionComponent")));this.supportType==="byPage"&&y.DISPLAYTYPE&&(y.DISPLAYTYPE.startsWith("textarea")||y.DISPLAYTYPE.startsWith("text"))&&y.DESCRIPTION!=="\u6269\u5C55\u5C5E\u6027"&&y.DESCRIPTION!=="\u8BFB\u5199\u89C4\u5219"&&k.components[0].selectOptions.push({label:"YearMonth",value:"YearMonth"},{label:"MonthDay",value:"MonthDay"}),_.push(k)}else if(t==="AD_TABLE"){const w=["hiddenSubtable"],k=(0,W.Z)().filter(F=>!w.includes(F.key));if(this.$route.params.itemId!=="New"){const F=(0,W.Z)().find(V=>V.key==="hiddenSubtable");k.push(F)}_=k}else _=this.extentionConfig;return _}},provide(){return{keyForm:this.keyForm}},watch:{defaultData:{handler(t){this.formatedRootData=this.setDisplayValue(t)},immediate:!0},realData:{handler(t){if(!t){this.rootData={};return}this.rootData=(0,j.Z)(t)},immediate:!0},options:{handler(t){this.configList=(0,j.Z)(t)}}},methods:{filterConfig(t){const y=t.target.value;if(y===""){this.configList=(0,j.Z)(this.options);return}this.configList=this.options.filter(m=>m.name.includes(y)),this.configList.length>0&&(this.currentIndex=0)},scrollIntoView(t,y){this.currentIndex=y},updateRootData(t,y){y===""?(delete this.rootData[t],this.rootData=Object.assign({},this.rootData)):this.rootData=Object.assign({},this.rootData,{[t]:y}),this.$emit("valueChange",this.rootData)},rootDataChange({key:t,value:y}){this.updateRootData(t,y)},removeOption(t){const y={};Object.keys(this.rootData).forEach(m=>{t.indexOf(m)===-1&&(y[m]=this.rootData[m])}),this.rootData=y,this.$emit("valueChange",this.rootData)},setDisplayValue(t){let y="";return Object.keys(t).length===0?y="":y=JSON.stringify(t,null,2),y}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)},created(){Object.keys(this.formInfo).length===0?this.$nextTick(()=>Nt(this,null,function*(){const t=window.vm.$_live_getChildComponent(window.vm,this.webconf.moduleName),y=window.vm.$_live_getChildComponent(t,"panelForm"),m=yield y.getFormData(),_=yield y.getFormDataLabel();if(this.keyForm={DESCRIPTION:m.DESCRIPTION,DISPLAYTYPE:m.DISPLAYTYPE,OBTAINMANNER:m.OBTAINMANNER,AD_TABLE_ID:m.AD_TABLE_ID,AD_TABLE_ID_LABEL:_.AD_TABLE_ID&&_.AD_TABLE_ID[0].Label,COLTYPE:m.COLTYPE,NAME:m.NAME},this.webconf.webconf&&this.webconf.webconf.targetField){const w=this.webconf.webconf.targetField.split(","),k=[];w.forEach(F=>{k.push(m[F])}),this.supportType=k.join(",")}})):this.keyForm=this.formInfo}};var Pt=(0,f.Z)(wt,R,x,!1,null,null,null);const kt=Pt.exports},6926:(P,A,p)=>{"use strict";p.d(A,{Z:()=>E});var R=function(){var $=this,N=$.$createElement,f=$._self._c||N;return f("label",{staticClass:"label"},[$._v(`
  `+$._s($.item.name)+"\uFF1A"),f("br"),$._v("[ "+$._s($.item.key)+` ] \xA0\xA0
`)])},x=[];const T={name:"LabelForInput",props:{item:{type:Object,default:()=>({})}}};var L=p(1900),O=(0,L.Z)(T,R,x,!1,null,"e3b01720",null);const E=O.exports},7875:(P,A,p)=>{"use strict";p.d(A,{Z:()=>N});var R=function(){var f=this,u=f.$createElement,v=f._self._c||u;return v("div",{staticClass:"input-group-item"},[v("div",{staticClass:"cell"},[v("LabelForInput",{attrs:{item:f.item}}),f._v(" "),v("input",{ref:"input",staticClass:"input",attrs:{placeholder:f.$t("extensionProperty.pleaseEnter")+"["+f.item.name+"]"+(f.item.outputValueType==="Array"?"\uFF0C"+f.$t("extensionProperty.separatedByCommas"):""),type:f.item.inputType==="Number"?"number":"text"},on:{input:f.inputChange,blur:f.inputBlur}})],1),f._v(" "),f.logInfo!==""?v("div",{staticClass:"logInfo"},[f._v(`
    `+f._s(f.logInfo)+`
  `)]):f._e()])},x=[],I=p(4174),T=p(6926);const O={name:"LabelWithInput",components:{LabelForInput:T.Z},methods:{inputBlur(f){let u="";if(this.item.outputValueType==="Array"&&f.target.value!=="")u=f.target.value.split(",");else if(this.item.outputValueType==="JSON"&&f.target.value!=="")try{u=JSON.parse(f.target.value),this.logInfo=""}catch(v){this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}\uFF1A${v}`;return}else this.item.inputType==="Number"?u=parseInt(f.target.value,10):u=f.target.value;this.$emit("inputBlur",{key:this.item.key,value:u})},inputChange(f){let u="";if(this.item.outputValueType==="Array"&&f.target.value!=="")u=f.target.value.split(",");else if(this.item.outputValueType==="JSON"&&f.target.value!=="")try{u=JSON.parse(f.target.value),this.logInfo=""}catch(v){this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}\uFF1A${v}`;return}else this.item.inputType==="Number"?u=parseInt(f.target.value,10)||"":u=f.target.value;this.$emit("inputValueChange",{key:this.item.key,value:u})}},data(){return{logInfo:""}},props:{item:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)},mounted(){this.item.outputValueType==="JSON"&&this.defaultData!==""?this.$refs.input.value=JSON.stringify(this.defaultData):this.$refs.input.value=this.defaultData}};var E=p(1900),$=(0,E.Z)(O,R,x,!1,null,"1b486698",null);const N=$.exports},3869:(P,A,p)=>{"use strict";p.d(A,{Z:()=>$});var R=function(){var N=this,f=N.$createElement,u=N._self._c||f;return u("div",{staticClass:"input-group-item"},[u("div",{staticClass:"cell"},[u("LabelForInput",{attrs:{item:N.item}}),N._v(" "),u("select",{ref:"select",staticClass:"select",on:{change:N.selectValueChange}},N._l(N.item.selectOptions,function(v,s){return u("option",{key:s,domProps:{value:v.value}},[N._v(`
        `+N._s(v.text)+`
      `)])}),0)],1)])},x=[],I=p(6926);const L={name:"LabelWithSelect",components:{LabelForInput:I.Z},methods:{selectValueChange(N){this.$emit("selectValueChange",{key:this.item.key,value:N.target.value})}},props:{item:{type:Object,default:()=>({})},defaultData:{default:""}},mounted(){this.defaultData&&this.defaultData==="__empty__"?this.$refs.select.value="":this.$refs.select.value=this.defaultData}};var O=p(1900),E=(0,O.Z)(L,R,x,!1,null,"03e9a0a2",null);const $=E.exports},362:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>s});var R=function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"bindKey"},[l("Description",{attrs:{option:a.option},on:{removeOption:a.removeOption}}),a._v(" "),a._l(a.resultList,function(o,n){return l("div",{key:n,staticClass:"tabContent"},[l("div",{staticClass:"label-input"},[l("div",{staticClass:"required-item ml-5"},[a._v(`
        `+a._s(a.$t("extensionProperty.displayAreaField"))+`\uFF1A
      `)])]),a._v(" "),l("div",{staticClass:"target-key mb-10 ml-10"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[n].target,placeholder:a.$t("extensionProperty.enterNameInTable"),"columns-key":a.targetColumnsKey},on:{"on-popper-show":function(c){return a.getKeys(c,"target",{tableName:"AD_COLUMN"})},"on-page-change":function(c){return a.getKeys(c,"target",{tableName:"AD_COLUMN"})},"on-input-value-change":function(c){return a.getSearchKeys(c,"target",{tableName:"AD_COLUMN",groupIndex:n})},"on-fkrp-selected":function(c){return a.handlerSelected(n,"target","",c)},"on-clear":function(c){return a.handleClear(n,"target","",c)}}})],1),a._v(" "),l("p",{staticClass:"blank"}),a._v(" "),l("SlickList",{attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:o.source,callback:function(c){a.$set(o,"source",c)},expression:"item.source"}},a._l(o.source,function(c,d){return l("SlickItem",{key:d,attrs:{index:d}},[l("div",{staticClass:"colnameContent",on:{mouseenter:a.handleEnter,mouseleave:a.handleLeave}},[l("div",{staticClass:"colname"},[l("p",{staticClass:"required-item ml-5"},[a._v(`
              `+a._s(a.$t("extensionProperty.sourceField"))+`:
            `)]),a._v(" "),l("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[n].source[d][0],"columns-key":a.targetColumnsKey,placeholder:a.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(i){return a.getKeys(i,"source",{tableName:"AD_COLUMN"})},"on-page-change":function(i){return a.getKeys(i,"source",{tableName:"AD_COLUMN"})},"on-input-value-change":function(i){return a.getSearchKeys(i,"source",{tableName:"AD_COLUMN",groupIndex:n,rowIndex:d})},"on-fkrp-selected":function(i){return a.handlerSelected(n,"source",d,i,0)},"on-clear":function(i){return a.handleClear(n,"source",d,0)}}})],1),a._v(" "),l("div",{staticClass:"colname"},[l("p",{staticClass:"required-item ml-5"},[a._v(`
              `+a._s(a.$t("extensionProperty.sourceFieldOptionGroup"))+`:
            `)]),a._v(" "),l("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:a.keyList,"auto-data":a.searchKeyList,"page-size":a.pageSize,"total-row-count":a.totalCount,"default-selected":a.defaultSelected[n].source[d][1],"columns-key":a.sourceColumnsKey,placeholder:a.$t("extensionProperty.enterName")},on:{"on-popper-show":function(i){return a.getKeys(i,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-page-change":function(i){return a.getKeys(i,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-input-value-change":function(i){return a.getSearchKeys(i,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0,groupIndex:n,rowIndex:d})},"on-fkrp-selected":function(i){return a.handlerSelected(n,"source",d,i,1)},"on-clear":function(i){return a.handleClear(n,"source",d,1)}}})],1),a._v(" "),l("div",{staticClass:"oprate"},[l("p"),a._v(" "),o.source.length-1===Number(d)?l("button",{staticClass:"operate-button",on:{click:function(i){return a.addColname(o.source,n)}}},[l("i",{staticClass:"iconfont"},[a._v("\uEC3F")])]):a._e(),a._v(" "),o.source.length>1?l("button",{staticClass:"operate-button",on:{click:function(i){return a.deleteColname(o.source,n,d)}}},[l("i",{staticClass:"iconfont"},[a._v("\uED15")])]):a._e()])])])}),1),a._v(" "),a.resultList.length-1===n?l("button",{staticClass:"operate-button ml-10 mb-10",on:{click:a.addButtonClick}},[l("i",{staticClass:"iconfont"},[a._v("\uEC3F")])]):a._e(),a._v(" "),a.resultList.length>1?l("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(c){return a.removeButtonClick(n)}}},[l("i",{staticClass:"iconfont"},[a._v("\uED15")])]):a._e()],1)})],2)},x=[],I=p(4174),T=p(6247),L=p(3800),O=p(8517),E=(a,e,l)=>new Promise((o,n)=>{var c=r=>{try{i(l.next(r))}catch(h){n(h)}},d=r=>{try{i(l.throw(r))}catch(h){n(h)}},i=r=>r.done?o(r.value):Promise.resolve(r.value).then(c,d);i((l=l.apply(a,e)).next())});const $={target:{col_id:""},source:[{col_id:"",label:""}]},f={name:"BindKey",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},components:{Description:L.Z,SlickList:T.SlickList,SlickItem:T.SlickItem},data(){return{resultList:[JSON.parse(JSON.stringify($))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,targetColumnsKey:["DBNAME"],sourceColumnsKey:["NAME"],defaultSelected:[{target:[],source:[[[],[]]]}]}},watch:{resultList:{handler(){this.syncData()},deep:!0}},created(){return E(this,null,function*(){this.init(),this.setHover()})},methods:{init(){return E(this,null,function*(){const a=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const e=[],l=[];this.defaultData.forEach(i=>{e.push(`=${i.target.col_id}`),i.source.forEach(r=>{e.push(`=${r.col_id}`),l.push(`=${r.label}`)})});let o={table:"AD_COLUMN",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],ID:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete o.fixedcolumns.AD_TABLE_ID;const n=(yield this.requestKeysData(o)).row||[];o={table:"AD_LIMITVALUE_GROUP",startindex:0,range:l.length,fixedcolumns:{ISACTIVE:["=Y"],ID:l},column_include_uicontroller:!0,isolr:!1};const c=(yield this.requestKeysData(o)).row||[],d=[];this.defaultData.forEach((i,r)=>{d.push({target:[],source:[[[],[]]]});const h=n.find(D=>D.ID.val===i.target.col_id);d[r].target=[{ID:i.target.col_id,Label:h.DBNAME.val}],i.source.forEach((D,g)=>{d[r].source[g]=[[],[]];const C=n.find(S=>S.ID.val===D.col_id),b=c.find(S=>S.ID.val===D.label);d[r].source[g][0]=[{ID:D.col_id,Label:C.DBNAME.val}],d[r].source[g][1]=[{ID:D.label,Label:b.NAME.val}]})}),this.defaultSelected=d,this.resultList=JSON.parse(JSON.stringify(a))}else this.resultList=[JSON.parse(JSON.stringify($))]})},setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)})},setPos(a){this.tipStyle=`left: ${a.clientX+20}px;top:${a.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},removeOption(a){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",a||[])},addButtonClick(){const a=JSON.parse(JSON.stringify($));this.resultList.push(a),this.defaultSelected.push({target:[],source:[[[],[]]]})},removeButtonClick(a){this.resultList.splice(a,1),this.defaultSelected.splice(a,1)},addColname(a,e){a.push({col_id:"",label:""}),this.defaultSelected[e].source.push([[],[]])},deleteColname(a,e,l){a.splice(l,1),this.defaultSelected[e].source.splice(l,1)},getKeys(a,e,l){return E(this,null,function*(){const{tableName:o,deleteTableId:n}=l;let c=0;typeof a=="number"&&(c=(a-1)*this.pageSize);const{itemId:d}=this.$route.params,i={table:o,startindex:c,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[d]},column_include_uicontroller:!0,isolr:!1};(d==="New"||n)&&delete i.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(i),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(a,e,l){return E(this,null,function*(){const{tableName:o,deleteTableId:n}=l;if(a===""){this.searchKeyList=[];return}const{itemId:c}=this.$route.params,d={table:o,startindex:0,fixedcolumns:{AD_TABLE_ID:[c],ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};o==="AD_COLUMN"?d.fixedcolumns.DBNAME=a:d.fixedcolumns.NAME=a,(c==="New"||n)&&delete d.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout(()=>E(this,null,function*(){const i=(yield this.requestKeysData(d)).row||[];this.searchKeyList=i.map(r=>(Object.keys(r).forEach(h=>{r[h]=r[h].val}),r))}),200)):this.timer=setTimeout(()=>E(this,null,function*(){const i=(yield this.requestKeysData(d)).row||[];this.searchKeyList=i.map(r=>(Object.keys(r).forEach(h=>{r[h]=r[h].val}),r))}),200)})},requestKeysData(a){return E(this,null,function*(){return new Promise(e=>{this.network.post("/p/cs/QueryList",(0,O.d)({searchdata:a})).then(l=>{if(l.data.code===0){const o=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],n=l.data.data.tabth,c=l.data.data.row;for(let d=Math.max(n.length-1,0);d>=0;d--){const i=n[d];i.colname==="DBNAME"?i.isak=!0:i.isak=!1,o.includes(i.colname)&&n.splice(d,1)}c.forEach(d=>{for(const i in d)o.includes(i)&&delete d[i]}),e(l.data.data)}else e({})}).catch(()=>{e({})})})})},handlerSelected(a,e,l,o,n){if(e==="target"){const c={col_id:o[0].ID,label:o[0].Label};this.resultList[a][e]=c,this.defaultSelected[a][e]=o}if(e==="source")if(o[0].Label=o[0].Label?o[0].Label:o[0].rowItem.NAME.val,n===0){const c={col_id:o[0].ID},d=this.resultList[a][e][l]||$.source;this.defaultSelected[a][e][l][0]=o,this.$set(this.resultList[a][e],l,Object.assign(d,c))}else{const c={label:o[0].ID},d=this.resultList[a][e][l]||$.source;this.defaultSelected[a][e][l][1]=o,this.$set(this.resultList[a][e],l,Object.assign(d,c))}},setDisplayData(a){const e=JSON.parse(JSON.stringify(a));for(let l=Math.max(e.length-1,0);l>=0;l--){const o=e[l];delete o.target.defaultselected,delete o.target.label;for(let n=Math.max(o.source.length-1,0);n>=0;n--){const c=o.source[n];delete c.defaultselected,(!c.col_id||!c.label)&&o.source.splice(n,1)}(!o.target.col_id||o.source.length===0)&&e.splice(l,1)}return e},syncData(){const a=JSON.parse(JSON.stringify(this.resultList)),e=this.setDisplayData(a);e.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},handleClear(a,e,l,o){e==="target"?this.resultList[a][e]={}:o===0?this.resultList[a][e][l].col_id="":this.resultList[a][e][l].label=""}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var u=p(1900),v=(0,u.Z)(f,R,x,!1,null,"6d0afbd8",null);const s=v.exports},3927:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>u});var R=function(){var v=this,s=v.$createElement,a=v._self._c||s;return a("div",{staticClass:"ak-date-shortcut"},[a("Description",{attrs:{option:v.option},on:{removeOption:v.removeOption}}),v._v(" "),a("div",{staticClass:"form-group"},v._l(v.formData,function(e,l){return a("ExtentionRowItem",{key:l,attrs:{"row-index":l,"row-count":v.formData.length,"show-operation-button":""},on:{addRow:function(o){return v.addRow(v.formData,{key:"",value:""})},removeRow:function(o){return v.removeRow(v.formData,l)}}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:v.$t("extensionProperty.enterDateDesc")},model:{value:e.key,callback:function(o){v.$set(e,"key",o)},expression:"rowObj.key"}})],1),v._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:v.$t("extensionProperty.enterValue")},model:{value:e.value,callback:function(o){v.$set(e,"value",o)},expression:"rowObj.value"}})],1)])}),1)],1)},x=[],I=p(4648),T=p(4533),L=p(5331);const O={key:"",value:""},$={name:"DateShortcut",mixins:[I.Z],components:{ExtentionRowItem:T.Z},data(){return{formData:[(0,L.Z)(O)]}},watch:{formData:{handler(v){const s=this.filterForm(v);s.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:s})},deep:!0}},methods:{filterForm(v){const s=(0,L.Z)(v);for(let a=s.length-1;a>=0;a--){const e=s[a];(!e.key||!e.value)&&s.splice(a,1)}return s},init(){!this.defaultData||(this.formData=(0,L.Z)(this.defaultData))}},created(){this.init()}};var N=p(1900),f=(0,N.Z)($,R,x,!1,null,"4fb78f3c",null);const u=f.exports},3178:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>v});var R=function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"R3ButtonConfig"},[e("Description",{attrs:{option:s.option},on:{removeOption:s.removeOption}}),s._v(" "),s._l(s.dataList,function(l,o){return e("div",{key:o,staticClass:"group"},[e("div",{staticClass:"row border-b pt-10"},[e("div",{staticClass:"name required-item"},[s._v(`
        `+s._s(s.$t("extensionProperty.buttonName"))+`\uFF1A
      `)]),s._v(" "),e("div",{staticClass:"item",staticStyle:{flex:"50% 0 0"}},[e("DropDownSelectFilter",{attrs:{single:"",data:s.keyList,"auto-data":s.searchKeyList,"page-size":s.pageSize,"total-row-count":s.totalCount,"is-back-row-item":"","columns-key":s.actionColumnsKey,"default-selected":s.defaultSelected[o].action_id,placeholder:s.$t("extensionProperty.enterButtonName")},on:{"on-popper-show":function(n){return s.getKeys(n,{key:"action_id"})},"on-page-change":function(n){return s.getKeys(n,{key:"action_id"})},"on-input-value-change":function(n){return s.getSearchKeys(n,{key:"action_id"})},"on-fkrp-selected":function(n){return s.handlerSelected(n,{groupIndex:o,key:"action_id"})},"on-clear":function(n){return s.handleClear("action_id",o)}}})],1)]),s._v(" "),e("div",{staticClass:"header"},[e("p",{staticClass:"title"},[e("span",[s._v(s._s(s.$t("extensionProperty.field")))])]),s._v(" "),e("p",{staticClass:"title"},[e("span",[s._v(s._s(s.$t("extensionProperty.value")))])])]),s._v(" "),s._l(l.filter,function(n,c){return e("div",{key:c,staticClass:"row"},[e("div",{staticClass:"name"},[s._v(`
        `+s._s(s.$t("extensionProperty.condition"))+s._s(c+1)+`\uFF1A
      `)]),s._v(" "),e("div",{staticClass:"item"},[e("DropDownSelectFilter",{attrs:{single:"",data:s.keyList,"auto-data":s.searchKeyList,"page-size":s.pageSize,"total-row-count":s.totalCount,"is-back-row-item":"","columns-key":s.columnsKey,"default-selected":s.defaultSelected[o].filter[c],placeholder:s.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(d){return s.getKeys(d,{key:"filter"})},"on-page-change":function(d){return s.getKeys(d,{key:"filter"})},"on-input-value-change":function(d){return s.getSearchKeys(d,{key:"filter"})},"on-fkrp-selected":function(d){return s.handlerSelected(d,{groupIndex:o,rowIndex:c,key:"filter"})},"on-clear":function(d){return s.handleClear("filter",o,c)}}})],1),s._v(" "),e("div",{staticClass:"item"},[e("Input",{attrs:{placeholder:s.$t("extensionProperty.enterValueWithComma")},model:{value:n.match_value,callback:function(d){s.$set(n,"match_value",d)},expression:"row.match_value"}})],1),s._v(" "),e("div",{staticClass:"btn-wrap"},[l.filter.length-1===c?e("button",{staticClass:"operate-button",on:{click:function(d){return s.addRow(l.filter,o)}}},[e("i",{staticClass:"iconfont"},[s._v("\uEC3F")])]):s._e(),s._v(" "),l.filter.length>1?e("button",{staticClass:"operate-button",on:{click:function(d){return s.delRow(l.filter,o,c)}}},[e("i",{staticClass:"iconfont"},[s._v("\uED15")])]):s._e()])])}),s._v(" "),e("div",{staticClass:"group-btn"},[s.dataList.length-1===o?e("button",{staticClass:"operate-button",on:{click:s.addGroup}},[e("i",{staticClass:"iconfont"},[s._v("\uEC3F")])]):s._e(),s._v(" "),s.dataList.length>1?e("button",{staticClass:"operate-button",on:{click:function(n){return s.delGroup(o)}}},[e("i",{staticClass:"iconfont"},[s._v("\uED15")])]):s._e()])],2)})],2)},x=[],I=p(4174),T=p(3800),L=p(8517),O=(s,a,e)=>new Promise((l,o)=>{var n=i=>{try{d(e.next(i))}catch(r){o(r)}},c=i=>{try{d(e.throw(i))}catch(r){o(r)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(n,c);d((e=e.apply(s,a)).next())});const E={action_id:"",filter:[{col_id:"",match_value:""}]},N={name:"DisableButton",inject:["network"],components:{Description:T.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]}},data(){return{keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],dataList:[JSON.parse(JSON.stringify(E))],currentGroupIndex:0,currentRowIndex:0,actionColumnsKey:["DESCRIPTION"],defaultSelected:[{action_id:[],filter:[[]]}]}},watch:{dataList:{handler(){this.syncData()},deep:!0}},created(){return O(this,null,function*(){const{itemId:s}=this.$route.params;this._table_id_=s,this.init()})},methods:{init(){return O(this,null,function*(){const s=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const a=[],e=[];s.forEach(d=>{a.push(`=${d.action_id}`),d.filter.forEach(i=>{e.push(`=${i.col_id}`)})});let l={table:"AD_ACTION",startindex:0,range:a.length,fixedcolumns:{ISACTIVE:["=Y"],ID:a,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID;const o=(yield this.requestKeysData(l)).row||[];l={table:"AD_COLUMN",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],ID:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1},this._table_id_||delete l.fixedcolumns.AD_TABLE_ID;const n=(yield this.requestKeysData(l)).row||[],c=[];s.forEach((d,i)=>{const r=o.find(h=>h.ID.val===d.action_id);c.push({action_id:[{ID:r.ID.val,Label:r.DESCRIPTION.val}],filter:[]}),d.filter.forEach(h=>{const D=n.find(g=>g.ID.val===h.col_id);c[i].filter.push([{ID:D.ID.val,Label:D.DBNAME.val}])})}),this.defaultSelected=c,this.dataList=s}else this.dataList=[JSON.parse(JSON.stringify(E))]})},addRow(s,a){const e=JSON.parse(JSON.stringify(E.filter[0]));s.push(e),this.defaultSelected[a].filter.push([])},delRow(s,a,e){s.splice(e,1),this.defaultSelected[a].filter.splice(a,1)},addGroup(){const s=JSON.parse(JSON.stringify(E));this.dataList.push(s),this.defaultSelected.push({action_id:[],filter:[[]]})},delGroup(s){this.dataList.splice(s,1),this.defaultSelected.splice(s,1)},removeOption(s){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",s||[])},getKeys(s,a){return O(this,null,function*(){const{key:e}=a,{itemId:l}=this.$route.params;let o=0,n=null;typeof s=="number"&&(o=(s-1)*this.pageSize),e==="action_id"&&(n={table:"AD_ACTION",startindex:o,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[l]},column_include_uicontroller:!0,isolr:!1}),e==="filter"&&(n={table:"AD_COLUMN",startindex:o,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[l]},column_include_uicontroller:!0,isolr:!1}),l==="New"&&delete n.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(n,e),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(s,a){return O(this,null,function*(){const{key:e}=a,{itemId:l}=this.$route.params;let o=null;if(s===""){this.searchKeyList=[];return}e==="action_id"&&(o={table:"AD_ACTION",startindex:0,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[l],DESCRIPTION:s},column_include_uicontroller:!0,isolr:!1}),e==="filter"&&(o={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[l],DBNAME:s},column_include_uicontroller:!0,isolr:!1},l==="New"&&delete o.fixedcolumns.AD_TABLE_ID);const n=()=>O(this,null,function*(){const c=(yield this.requestKeysData(o,e)).row||[];this.searchKeyList=c.map(d=>(Object.keys(d).forEach(i=>{d[i]=d[i].val}),d))});this.timer?(clearTimeout(this.timer),this.timer=setTimeout(n,200)):this.timer=setTimeout(n,200)})},requestKeysData(s,a){return O(this,null,function*(){return new Promise(e=>{this.network.post("/p/cs/QueryList",(0,L.d)({searchdata:s})).then(l=>{if(l.data.code===0){const c=a==="action_id"?["NAME","PRIORITY","AD_VERSION_ID","CUSTOMIZENO","ISACTIVE","ISHIDE","ISREFRSH","AD_SUBSYSTEM_ID","AD_TABLECATEGORY_ID","FILTER","CUSCOMPONENT","PROPS","MODIFIERNAME","MODIFIEDDATE","AD_ACTION_ID"]:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],d=l.data.data.tabth,i=l.data.data.row;for(let r=Math.max(d.length-1,0);r>=0;r--){const h=d[r],D=a==="action_id"?"DESCRIPTION":"DBNAME";h.colname===D?h.isak=!0:h.isak=!1,c.includes(h.colname)&&d.splice(r,1)}i.forEach(r=>{for(const h in r)c.includes(h)&&delete r[h]}),e(l.data.data)}else e({})}).catch(()=>{e({})})})})},handlerSelected(s,a){const{groupIndex:e,rowIndex:l,key:o}=a;o==="action_id"&&(this.dataList[e].action_id=s[0].ID,this.defaultSelected[e].action_id=s),o==="filter"&&(this.dataList[e].filter[l].col_id=s[0].ID,this.defaultSelected[e].filter[l]=s)},handleClear(s,a,e){s==="action_id"&&(this.dataList[a].action_id=""),s==="filter"&&(this.dataList[a].filter[e].col_id="")},setDisplayData(s){const a=JSON.parse(JSON.stringify(s));for(let e=Math.max(a.length-1,0);e>=0;e--){const l=a[e];delete l.defaultselected;for(let o=Math.max(l.filter.length-1,0);o>=0;o--){const n=l.filter[o];delete n.defaultselected,(!n.col_id||!n.match_value)&&l.filter.splice(o,1)}(!l.action_id||l.filter.length===0)&&a.splice(e,1)}return a},syncData(){const s=JSON.parse(JSON.stringify(this.dataList)),a=this.setDisplayData(s);a.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:a})}},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var f=p(1900),u=(0,f.Z)(N,R,x,!1,null,"31bbcf09",null);const v=u.exports},2013:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>o});var R=function(){var n=this,c=n.$createElement,d=n._self._c||c;return d("div",[n.showDescription?d("Description",{attrs:{option:n.option},on:{removeOption:n.removeOption}}):n._e(),n._v(" "),d("div",{staticClass:"form-group"},[d("ExtentionRowItem",{attrs:{"row-label":n.$t("extensionProperty.sourceField"),"is-required":"","row-label-class":"rowLabel","error-tip":n.fieldValidateTips}},[d("div",{staticClass:"col"},[d("div",{staticClass:"row"},[d("DropDownSelectFilter",{staticStyle:{width:"100%"},attrs:{single:"",data:n.dropList,"auto-data":n.searchList,"page-size":n.pageSize,"total-row-count":n.totalCount,"columns-key":n.columnsKey,hidecolumns:n.hidecolumns,placeholder:n.$t("extensionProperty.selectSourceField"),"default-selected":n.defaultFields},on:{"on-popper-show":n.getSearchData,"on-page-change":n.getSearchData,"on-input-value-change":n.inputSearchData,"on-fkrp-selected":function(i){return n.selectValue(i)},"on-clear":n.clearTableName}})],1)])]),n._v(" "),d("ExtentionRowItem",{attrs:{"row-label":n.$t("extensionProperty.correspondence"),"is-required":"","row-label-class":"rowLabel"}},[d("div",{staticClass:"col"},[n._l(n.formData.list,function(i,r){return d("div",{key:r,staticClass:"row"},[d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:n.$t("extensionProperty.enterOptionKey")},on:{"on-blur":n.validCondition},model:{value:i.key,callback:function(h){n.$set(i,"key",h)},expression:"row.key"}})],1),n._v(" "),d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:n.$t("extensionProperty.enterOptionValue")},on:{"on-blur":n.validCondition},model:{value:i.value,callback:function(h){n.$set(i,"value",h)},expression:"row.value"}})],1),n._v(" "),d("div",{staticClass:"col btn-group"},[n.formData.list.length-1===r?d("button",{staticClass:"operate-button",on:{click:n.addRow}},[d("i",{staticClass:"iconfont"},[n._v("\uEC3F")])]):n._e(),n._v(" "),n.formData.list.length>1?d("button",{staticClass:"operate-button",on:{click:function(h){return n.removeRow(r)}}},[d("i",{staticClass:"iconfont"},[n._v("\uED15")])]):n._e()])])}),n._v(" "),n.conditionValidateTips?d("div",{staticClass:"tip"},[n._v(`
          `+n._s(n.conditionValidateTips)+`
        `)]):n._e()],2)])],1)],1)},x=[],I=p(4174),T=p(3800),L=p(4533),O=p(5331),E=p(4470),$=p(8192),N=p(8517),f=(n,c,d)=>new Promise((i,r)=>{var h=C=>{try{g(d.next(C))}catch(b){r(b)}},D=C=>{try{g(d.throw(C))}catch(b){r(b)}},g=C=>C.done?i(C.value):Promise.resolve(C.value).then(h,D);g((d=d.apply(n,c)).next())});const u={key:"",value:""},v={col:"",map:{},list:[u]},a={name:"FilterColVal",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:T.Z,ExtentionRowItem:L.Z},watch:{formData:{handler(n){const c=this.filterForm(n);(0,E.Q)(c)?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:c})},deep:!0}},data(){return{formData:(0,O.Z)(v),fieldValidateTips:"",conditionValidateTips:"",defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}},methods:{filterForm(n){const c=(0,O.Z)(n),d={};return c.list.forEach(i=>{i.key&&i.value&&(d[i.key]=i.value.split(","))}),!c.col||(0,E.Q)(d)?{}:(c.map=d,delete c.list,c)},removeOption(n){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",n||[])},addRow(){this.formData.list.push((0,O.Z)(u))},removeRow(n){this.formData.list.splice(n,1)},validField(){this.formData.col?this.fieldValidateTips="":this.fieldValidateTips=this.$t("extensionProperty.enterSourceField")},validCondition(){const n=this.formData.list.some(c=>c.key&&c.value);this.conditionValidateTips=n?"":this.$t("extensionProperty.correspondenceIsRequired")},commonApi(n,c,d){const{hideColumns:i,displayKeys:r,bindId:h}=d;return new Promise(D=>{this.network.post(n,(0,N.d)(c)).then(g=>{if(g.data.code===0){const C=g.data.data.tabth,b=g.data.data.row;for(let S=Math.max(C.length-1,0);S>=0;S--){const M=C[S];r.includes(M.colname)?M.isak=!0:M.isak=!1,i.includes(M.colname)&&C.splice(S,1)}i.length>0&&b.forEach(S=>{for(const M in S)i.includes(M)&&delete S[M]}),D(g.data.data)}else D({})}).catch(()=>{D({})})})},getKeyList(n){return f(this,null,function*(){return new Promise(c=>{const d=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],i="/p/cs/QueryList",r=this.commonApi(i,{searchdata:n},{hideColumns:d,displayKeys:["DBNAME"]});c(r)})})},getSearchData(n){return f(this,null,function*(){let c=0;typeof n=="number"&&(c=(n-1)*this.pageSize);const d={table:"AD_COLUMN",startindex:c,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete d.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(d),this.totalCount=this.dropList.totalRowCount})},selectValue(n){this.formData.col=n.map(c=>c.Label).join(","),this.validField()},clearTableName(){this.formData.col="",this.validField()},inputSearchData:(0,$.Ds)(function(n){if(n===""){this.searchList=[];return}const c={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:n,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete c.fixedcolumns.AD_TABLE_ID,this.getKeyList(c).then(d=>{const i=d.row||[];this.searchList=i.map(r=>(Object.keys(r).forEach(h=>{r[h]=r[h].val}),r)),this.totalCount=this.dropList.totalRowCount})}),getFieldDefaultValue(){return f(this,null,function*(){const n=this.defaultData.col,c={table:"AD_COLUMN",startindex:0,range:1,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:n,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete c.fixedcolumns.AD_TABLE_ID;const d=(yield this.getKeyList(c)).row||[];this.defaultFields=[{ID:d[0].ID.val,Label:d[0].DBNAME.val}]})},init(){const n=(0,O.Z)(this.defaultData);if((0,E.Q)(n))return;const c=[];Object.keys(n.map).forEach(d=>{c.push({key:d,value:n.map[d].join(",")})}),n.list=c,this.formData=n,this.getFieldDefaultValue()}},created(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var e=p(1900),l=(0,e.Z)(a,R,x,!1,null,"6d62e9a0",null);const o=l.exports},2012:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>a});var R=function(){var e=this,l=e.$createElement,o=e._self._c||l;return o("div",[e.showDescription?o("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),o("div",{staticClass:"form-group"},[o("ExtentionRowItem",{attrs:{"is-required":"","row-label":e.$t("extensionProperty.assignValues"),"error-tip":e.fieldValidateTip}},[o("div",{staticClass:"col"},[o("DropDownSelectFilter",{attrs:{single:!1,data:e.dropList,"auto-data":e.searchList,"page-size":e.pageSize,"total-row-count":e.totalCount,"columns-key":e.columnsKey,hidecolumns:e.hidecolumns,placeholder:e.$t("extensionProperty.selectKnownField"),"default-selected":e.defaultFields},on:{"on-popper-show":e.getSearchData,"on-page-change":e.getSearchData,"on-input-value-change":e.inputSearchData,"on-fkrp-selected":function(n){return e.selectTable(n)},"on-clear":e.clearTableName}})],1),e._v(" "),o("div",{staticClass:"col"},[o("Input",{attrs:{placeholder:e.$t("extensionProperty.enterApi")},on:{"on-blur":e.validateField},model:{value:e.formData.url,callback:function(n){e.$set(e.formData,"url",n)},expression:"formData.url"}})],1)])],1)],1)},x=[],I=p(4174),T=p(3800),L=p(4533),O=p(5331),E=p(8192),$=p(8517),N=(e,l,o)=>new Promise((n,c)=>{var d=h=>{try{r(o.next(h))}catch(D){c(D)}},i=h=>{try{r(o.throw(h))}catch(D){c(D)}},r=h=>h.done?n(h.value):Promise.resolve(h.value).then(d,i);r((o=o.apply(e,l)).next())});const u={name:"FormRequest",components:{Description:T.Z,ExtentionRowItem:L.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},data(){return{formData:{refcolumn:"",url:""},defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}},inject:["network"],watch:{formData:{handler(e){const l=this.filterForm(e);Object.keys(l).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{filterForm(e){let l=(0,O.Z)(e);return(l.refcolumn===""||l.url==="")&&(l={}),l},removeOption(e){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",e||[])},selectTable(e){this.formData.refcolumn=e.map(l=>l.Label).join(","),this.validateField()},clearTableName(){this.formData.refcolumn="",this.validateField()},validateField(){const e=(0,O.Z)(this.formData);e.refcolumn===""||e.url===""?this.fieldValidateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.fieldValidateTip=""},getSearchData(e){return N(this,null,function*(){let l=0;typeof e=="number"&&(l=(e-1)*this.pageSize);const o={table:"AD_COLUMN",startindex:l,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete o.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(o),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,E.Ds)(function(e){if(e===""){this.searchList=[];return}const l={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.getKeyList(l).then(o=>{const n=o.row||[];this.searchList=n.map(c=>(Object.keys(c).forEach(d=>{c[d]=c[d].val}),c)),this.totalCount=this.dropList.totalRowCount})}),commonApi(e,l,o){const{hideColumns:n,displayKeys:c,bindId:d}=o;return new Promise(i=>{this.network.post(e,(0,$.d)(l)).then(r=>{if(r.data.code===0){const h=r.data.data.tabth,D=r.data.data.row;for(let g=Math.max(h.length-1,0);g>=0;g--){const C=h[g];c.includes(C.colname)?C.isak=!0:C.isak=!1,n.includes(C.colname)&&h.splice(g,1)}n.length>0&&D.forEach(g=>{for(const C in g)n.includes(C)&&delete g[C]}),i(r.data.data)}else i({})}).catch(()=>{i({})})})},getKeyList(e){return N(this,null,function*(){return new Promise(l=>{const o=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],n="/p/cs/QueryList",c=this.commonApi(n,{searchdata:e},{hideColumns:o,displayKeys:["DBNAME"]});l(c)})})},getFieldDefaultValue(){return N(this,null,function*(){if(Object.keys(this.defaultData).length===0)return;const e=this.defaultData.refcolumn.split(","),o={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:e.join(","),AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete o.fixedcolumns.AD_TABLE_ID;const n=(yield this.getKeyList(o)).row||[],c=[];e.forEach(d=>{const i=n.find(r=>r.DBNAME.val===d);c.push({ID:i.ID.val,Label:d})}),this.defaultFields=c})},init(){const e=(0,O.Z)(this.defaultData);Object.keys(e).length>0&&(this.formData=e)}},created(){return N(this,null,function*(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()})},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var v=p(1900),s=(0,v.Z)(u,R,x,!1,null,"51e5a455",null);const a=s.exports},6430:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>a});var R=function(){var e=this,l=e.$createElement,o=e._self._c||l;return o("div",{staticClass:"ak-hidden-subtable"},[o("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}),e._v(" "),Object.keys(e.formData).length>0?e._l(e.formData,function(n,c){return o("div",{key:n.tableId,staticClass:"form-group"},[o("h4",[e._v(e._s(e.$t("extensionProperty.subtable"))+"-"+e._s(c))]),e._v(" "),e._l(n,function(d,i){return o("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":n.length,"row-label":""+e.$t("extensionProperty.condition")+i,"show-operation-button":""},on:{addRow:function(r){return e.addRow(n,e.ROW_ITEM)},removeRow:function(r){return e.removeRow(n,i)}}},[o("div",{staticClass:"col"},[o("DropDownSelectFilter",{attrs:{single:"",data:e.dropList,"auto-data":e.searchList,"page-size":e.pageSize,"total-row-count":e.totalCount,"columns-key":e.columnsKey,hidecolumns:e.hidecolumns,"default-selected":e.defaultFields[c]?e.defaultFields[c][i]:void 0,placeholder:e.$t("extensionProperty.selectField")},on:{"on-popper-show":e.getSearchData,"on-page-change":e.getSearchData,"on-input-value-change":e.inputSearchData,"on-fkrp-selected":function(r){return e.selectValue(r,d,"colName","Label")},"on-clear":function(r){return e.clearValue(d,"colName")}}})],1),e._v(" "),o("div",{staticClass:"col"},[o("Input",{attrs:{placeholder:e.$t("extensionProperty.enterValue")},model:{value:d.value,callback:function(r){e.$set(d,"value",r)},expression:"condition.value"}})],1)])})],2)}):[o("h2",{staticClass:"text-center"},[e._v(e._s(e.$t("extensionProperty.associateSubtable")))])]],2)},x=[],I=p(4174),T=p(8517),L=p(4648),O=p(5331),E=p(8192),$=(e,l,o)=>new Promise((n,c)=>{var d=h=>{try{r(o.next(h))}catch(D){c(D)}},i=h=>{try{r(o.throw(h))}catch(D){c(D)}},r=h=>h.done?n(h.value):Promise.resolve(h.value).then(d,i);r((o=o.apply(e,l)).next())});const N={colName:"",value:""},u={name:"HiddenSubtable",mixins:[L.Z],data(){return{formData:[],ROW_ITEM:N,defaultFields:{}}},watch:{formData:{handler(e){const l=this.filterForm(e);l===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{init(){return $(this,null,function*(){const e=yield this.getSubTables();if(!this.defaultData){this.formData=e;return}const l=[];for(let d in this.defaultData)this.defaultData[d].forEach(r=>{r.colName&&l.push(`=${r.colName}`)});const o={table:"AD_COLUMN",startindex:0,range:l.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:l,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete o.fixedcolumns.AD_TABLE_ID;const n=(yield this.getKeyList(o)).row||[],c={};for(let d in e)if(this.defaultData[d]){e[d]=(0,O.Z)(this.defaultData[d]);const i=this.defaultData[d];c[d]={},i.forEach((r,h)=>{if(r.colName){const D=n.find(g=>g.DBNAME.val===r.colName);c[d][h]=[{Label:r.colName,ID:D.ID.val}]}})}this.formData=(0,O.Z)(e),this.defaultFields=c})},removeOption(e){return $(this,null,function*(){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",e||[]),this.formData=yield this.getSubTables()})},filterForm(e){const l=(0,O.Z)(e);if(Object.keys(l).length===0)return"";for(let o in l){const n=l[o];for(let c=n.length-1;c>=0;c--){const d=n[c];(!d.colName||!d.value)&&n.splice(c,1)}n.length===0&&delete l[o]}return Object.keys(l).length===0?"":l},getSubTables(){return $(this,null,function*(){const e="/p/cs/objectTableItem",l={table:"AD_REFBYTABLE",objid:this.$route.params.itemId,mainTableName:"AD_TABLE",refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,fixedcolumns:{}}};return yield this.network.post(e,(0,T.d)(l)).then(n=>{const c={};return n.data.data.row.filter(i=>i.ISACTIVE.val==="\u662F").forEach(i=>{c[i.AD_REFBY_TABLE_ID.val]=[(0,O.Z)(N)]}),c})})},getSearchData(e){return $(this,null,function*(){let l=0;typeof e=="number"&&(l=(e-1)*this.pageSize);const o={table:"AD_COLUMN",startindex:l,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete o.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(o),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,E.Ds)(function(e){if(e===""){this.searchList=[];return}const l={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.getKeyList(l).then(o=>{const n=o.row||[];this.searchList=n.map(c=>(Object.keys(c).forEach(d=>{c[d]=c[d].val}),c)),this.totalCount=this.dropList.totalRowCount})}),getKeyList(e){return $(this,null,function*(){return new Promise(l=>{const o=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],n="/p/cs/QueryList",c=this.commonApi(n,{searchdata:e},{hideColumns:o,displayKeys:["\u8868\u5185\u540D\u79F0"]});l(c)})})}},created(){this._table_name_=this.keyForm.NAME,this._table_id_=this.$route.params.itemId==="New"?null:this.$route.params.itemId,this._table_name_&&this.init()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var v=p(1900),s=(0,v.Z)(u,R,x,!1,null,"10fa3ff1",null);const a=s.exports},4302:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>f});var R=function(){var u=this,v=u.$createElement,s=u._self._c||v;return s("div",{staticClass:"highlight-wrap"},[s("Description",{attrs:{option:u.option},on:{removeOption:u.removeOption}}),u._v(" "),s("div",{},[s("ExtentionRowItem",{attrs:{"row-label":""+u.$t("tips.scope")}},[s("Select",{on:{"on-change":u.handleChange},model:{value:u.formData.scope,callback:function(a){u.$set(u.formData,"scope",a)},expression:"formData.scope"}},u._l(u.scopeOptions,function(a){return s("Option",{key:a.value,attrs:{value:a.value}},[u._v(`
          `+u._s(a.label)+`
        `)])}),1)],1),u._v(" "),s("div",{staticClass:" highlight-rules"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"tw-mb-10"},[s("span",[u._v(u._s(u.$t("extensionProperty.value"))+"\xA0\xA0\xA0\uFF1A")]),u._v(" "),s("i-switch",{on:{"on-change":u.valueChange},model:{value:u.formData.value,callback:function(a){u.$set(u.formData,"value",a)},expression:"formData.value"}})],1),u._v(" "),u.formData.value?[s("span",{staticClass:"tw-mt-10"},[u._v(u._s(u.$t("tips.rule"))+"\uFF1A")]),u._v(" "),s("Poptip",{attrs:{trigger:"hover",content:"content"}},[s("Icon",{staticClass:"help",attrs:{type:"ios-help-circle-outline"}}),u._v(" "),s("div",{staticClass:"highlight-rules-wrap",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"title"},[u._v("\u7528\u6CD5\u793A\u4F8B\uFF1A")]),u._v(" "),s("div",[u._v(`
                \u4E0D\u7B49\u4E8E\u7A7A\u5B57\u7B26\u4E32: v!==''
              `)]),u._v(" "),s("div",[u._v(`
                \u7B49\u4E8E\u5B57\u7B26\u4E32'\u554A': v==='\u554A'
              `)]),u._v(" "),s("div",[u._v(`
                \u5927\u4E8E\u6570\u5B570: v > 0
              `)]),u._v(" "),s("div",[u._v(`
                0\u5230100\u4E4B\u95F4: v >= 0 && v <= 100
              `)]),u._v(" "),s("div",[u._v(`
                \u5C0F\u4E8E0\u6216\u8005\u5927\u4E8E100:  v<0 || v>100
              `)])])],1),u._v(" "),u._l(u.formData.rules,function(a,e){return s("ExtentionRowItem",{key:e,attrs:{"row-index":e,"row-count":u.formData.rules.length,"show-operation-button":""},on:{addRow:function(l){return u.addRow(u.formData.rules,u.RULE)},removeRow:function(l){return u.removeRow(u.formData.rules,e)}}},[s("div",{staticClass:"col"},[s("Input",{attrs:{placeholder:u.$t("extensionProperty.expressionPlaceholder"),clearable:""},model:{value:a.operator,callback:function(l){u.$set(a,"operator",typeof l=="string"?l.trim():l)},expression:"rule.operator"}})],1),u._v(" "),s("div",{staticClass:"col"},[s("Poptip",{attrs:{trigger:"click",content:"content"}},[s("div",{staticClass:"style-button",style:a.style},[u._v(u._s(u.$t("extensionProperty.setStyle")))]),u._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"style-item"},[s("div",[u._v(u._s(u.$t("tips.color"))+":")]),u._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:a.style.color,expression:"rule.style.color"}],attrs:{type:"color"},domProps:{value:a.style.color},on:{input:function(l){l.target.composing||u.$set(a.style,"color",l.target.value)}}})])]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.backgroundColor"))+":")]),u._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:a.style.backgroundColor,expression:"rule.style.backgroundColor"}],attrs:{type:"color"},domProps:{value:a.style.backgroundColor},on:{input:function(l){l.target.composing||u.$set(a.style,"backgroundColor",l.target.value)}}})])]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.textDecoration"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:a.style.textDecoration,callback:function(l){u.$set(a.style,"textDecoration",l)},expression:"rule.style.textDecoration"}},u._l(u.decorationOptions,function(l){return s("Option",{key:l.value,attrs:{value:l.value}},[u._v(`
                          `+u._s(l.label)+`
                        `)])}),1)],1)]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.fontWeight"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:a.style.fontWeight,callback:function(l){u.$set(a.style,"fontWeight",l)},expression:"rule.style.fontWeight"}},u._l(u.weightOptions,function(l){return s("Option",{key:l.value,attrs:{value:l.value}},[u._v(`
                          `+u._s(l.label)+`
                        `)])}),1)],1)]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.fontStyle"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:a.style.fontStyle,callback:function(l){u.$set(a.style,"fontStyle",l)},expression:"rule.style.fontStyle"}},u._l(u.fontStyleOptions,function(l){return s("Option",{key:l.value,attrs:{value:l.value}},[u._v(`
                          `+u._s(l.label)+`
                        `)])}),1)],1)])])])],1)])})]:u._e()],2),u._v(" "),s("div",{staticClass:"tw-mt-10 form-group"},[s("span",[u._v(u._s(u.$t("tips.label"))+"\uFF1A")]),u._v(" "),s("i-switch",{attrs:{disabled:u.formData.scope==="table"},on:{"on-change":u.labelChange},model:{value:u.formData.label,callback:function(a){u.$set(u.formData,"label",a)},expression:"formData.label"}}),u._v(" "),u.formData.label?[s("div",{staticClass:"tw-mt-10"},[s("Poptip",{attrs:{trigger:"click",content:"content"}},[s("div",{staticClass:"style-button",style:u.formData.labelStyle},[u._v(u._s(u.$t("extensionProperty.setStyle")))]),u._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"style-item"},[s("div",[u._v(u._s(u.$t("tips.color"))+":")]),u._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:u.formData.labelStyle.color,expression:"formData.labelStyle.color"}],attrs:{type:"color"},domProps:{value:u.formData.labelStyle.color},on:{input:function(a){a.target.composing||u.$set(u.formData.labelStyle,"color",a.target.value)}}})])]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.backgroundColor"))+":")]),u._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:u.formData.labelStyle.backgroundColor,expression:"formData.labelStyle.backgroundColor"}],attrs:{type:"color"},domProps:{value:u.formData.labelStyle.backgroundColor},on:{input:function(a){a.target.composing||u.$set(u.formData.labelStyle,"backgroundColor",a.target.value)}}})])]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.textDecoration"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:u.formData.labelStyle.textDecoration,callback:function(a){u.$set(u.formData.labelStyle,"textDecoration",a)},expression:"formData.labelStyle.textDecoration"}},u._l(u.decorationOptions,function(a){return s("Option",{key:a.value,attrs:{value:a.value}},[u._v(`
                        `+u._s(a.label)+`
                      `)])}),1)],1)]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.fontWeight"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:u.formData.labelStyle.fontWeight,callback:function(a){u.$set(u.formData.labelStyle,"fontWeight",a)},expression:"formData.labelStyle.fontWeight"}},u._l(u.weightOptions,function(a){return s("Option",{key:a.value,attrs:{value:a.value}},[u._v(`
                        `+u._s(a.label)+`
                      `)])}),1)],1)]),u._v(" "),s("div",{staticClass:"tw-mt-4 style-item"},[s("div",[u._v(u._s(u.$t("tips.fontStyle"))+":")]),u._v(" "),s("div",[s("Select",{model:{value:u.formData.labelStyle.fontStyle,callback:function(a){u.$set(u.formData.labelStyle,"fontStyle",a)},expression:"formData.labelStyle.fontStyle"}},u._l(u.fontStyleOptions,function(a){return s("Option",{key:a.value,attrs:{value:a.value}},[u._v(`
                        `+u._s(a.label)+`
                      `)])}),1)],1)])])])],1)]:u._e()],2)])],1)],1)},x=[],I=p(5331),T=p(4648);const L={operator:"",style:{fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},E={name:"Highlight",mixins:[T.Z],data(){return{formData:{scope:"global",rules:[(0,I.Z)(L)],label:!1,value:!1,labelStyle:{fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},scopeOptions:[{value:"form",label:"\u8868\u5355"},{value:"table",label:"\u5217\u8868"},{value:"global",label:"\u5168\u5C40"}],weightOptions:[{value:"normal",label:"\u6B63\u5E38"},{value:"bold",label:"\u52A0\u7C97"}],fontStyleOptions:[{value:"normal",label:"\u6B63\u5E38"},{value:"italic",label:"\u659C\u4F53"}],decorationOptions:[{value:"none",label:"\u65E0\u88C5\u9970"},{value:"underline",label:"\u4E0B\u5212\u7EBF"},{value:"line-through",label:"\u5220\u9664\u7EBF"}],RULE:(0,I.Z)(L)}},watch:{formData:{handler(u){const v=this.filterForm(u);v===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:v})},deep:!0}},methods:{valueChange(){this.formData.rules=[(0,I.Z)(L)]},labelChange(){this.formData.labelStyle={fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"}},handleChange(){this.formData.scope==="table"&&(this.formData.label=!1,this.formData.labelStyle={fontWeight:"normal",fontStyle:"normal",textDecoration:"none",backgroundColor:"#ffffff",color:"#000000"})},filterForm(u){const v=(0,I.Z)(u);for(let e=v.rules.length-1;e>=0;e--){const l=v.rules[e];if(!l.operator){v.rules.splice(e,1);continue}if(JSON.stringify(l.style)===JSON.stringify((0,I.Z)(L.style))){v.rules.splice(e,1);continue}l.style.color==="#000000"&&(l.style.color=""),l.style.backgroundColor==="#ffffff"&&(l.style.backgroundColor="")}const s=v.value&&v.rules.length!==0,a=v.scope!=="table"&&v.label&&JSON.stringify(v.labelStyle)!==JSON.stringify((0,I.Z)(L.style));return!s&&!a?"":(v.labelStyle.color==="#000000"&&(v.labelStyle.color=""),v.labelStyle.backgroundColor==="#ffffff"&&(v.labelStyle.backgroundColor=""),v)},removeOption(u){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",u||[])},initData(){if(!this.defaultData)return;const u=(0,I.Z)(this.defaultData);this.formData=u,this.formData.rules.forEach(v=>{v.style.color===""&&(v.style.color="#000000"),v.style.backgroundColor===""&&(v.style.backgroundColor="#ffffff")}),this.formData.labelStyle.color===""&&(this.formData.labelStyle.color="#000000"),this.formData.labelStyle.backgroundColor===""&&(this.formData.labelStyle.backgroundColor="#ffffff")}},mounted(){this.initData()}};var $=p(1900),N=(0,$.Z)(E,R,x,!1,null,null,null);const f=N.exports},4246:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>d});var R=function(){var i=this,r=i.$createElement,h=i._self._c||r;return h("div",{staticClass:"MultiTab"},[h("Description",{attrs:{option:i.option},on:{removeOption:i.removeOption}}),i._v(" "),h("SlickList",{staticClass:"drag-scroll",attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:i.sumTabs,callback:function(D){i.sumTabs=D},expression:"sumTabs"}},i._l(i.sumTabs,function(D,g){return h("SlickItem",{key:g,attrs:{index:g}},[h("div",{staticClass:"tabContent",on:{mouseenter:i.handleEnter,mouseleave:i.handleLeave}},[h("p",{staticClass:"label-input"},[h("validate",{attrs:{data:D.tab_name}},[h("span",{staticClass:"required-item ml-5"},[i._v(i._s(i.$t("tips.label"))+"\uFF1A")]),i._v(" "),h("Input",{staticClass:"tab-label-name",on:{input:function(C){return i.handlerInput(g)}},model:{value:D.tab_name,callback:function(C){i.$set(D,"tab_name",C)},expression:"item.tab_name"}})],1)],1),i._v(" "),h("p",{staticClass:"blank"}),i._v(" "),i._l(D.tab_value,function(C,b){return h("div",{key:b,staticClass:"colnameContent",attrs:{index:b}},[h("div",{staticClass:"colname"},[h("p",{staticClass:"required-item ml-5"},[i._v(`
              `+i._s(i.$t("extensionProperty.associateField"))+`:
            `)]),i._v(" "),h("validate",{attrs:{data:C.col_name,"validate-function":i.validateKey,index:g+"-"+b}},[h("DropDownSelectFilter",{attrs:{single:"",data:i.keyList,"auto-data":i.searchKeyList,"page-size":i.pageSize,"total-row-count":i.totalCount,"default-selected":i.defaultSelected[g][b],"is-back-row-item":"","columns-key":i.columnsKey,placeholder:i.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":i.getKeys,"on-page-change":i.getKeys,"on-input-value-change":function(S){return i.getSearchKeys(g,b,S)},"on-fkrp-selected":function(S){return i.handlerSelected(g,b,S)},"on-clear":function(S){return i.handleClear(g,b,S)}}})],1)],1),i._v(" "),h("div",{staticClass:"operator"},[h("p",{staticClass:"required-item ml-5"},[i._v(`
              `+i._s(i.$t("tips.operator"))+`:
            `)]),i._v(" "),h("validate",{attrs:{data:C.operator}},[h("Select",{attrs:{clearable:""},on:{"on-open-change":function(S){return i.handleSelectExpand(g,b,S)}},model:{value:C.operator,callback:function(S){i.$set(C,"operator",S)},expression:"temp.operator"}},i._l(C.selectOptions,function(S){return h("Option",{key:S.value,attrs:{value:S.value}},[i._v(`
                  `+i._s(S.label)+`
                `)])}),1)],1)],1),i._v(" "),h("div",{staticClass:"contrastValue"},[h("p",{staticClass:"required-item ml-5"},[i._v(`
              `+i._s(i.$t("extensionProperty.contrastValue"))+`:
            `)]),i._v(" "),h("validate",{attrs:{data:C.contrast_value}},[C.type&&C.type.toUpperCase().startsWith("DATE")?i._e():h("Input",{directives:[{name:"input-number",rawName:"v-input-number:[temp.type]",arg:C.type}],model:{value:C.contrast_value,callback:function(S){i.$set(C,"contrast_value",S)},expression:"temp.contrast_value"}}),i._v(" "),C.type&&C.type.toUpperCase().startsWith("DATE")?h("DatePicker",{staticStyle:{width:"100%"},attrs:{value:C.contrast_value,type:C.type&&C.type.toUpperCase()==="DATETIME"?"datetimerange":"daterange",placeholder:i.$t("tips.pleaseSelect"),editable:!1,transfer:"",format:C.type&&C.type.toUpperCase()==="DATETIME"?"yyyy/MM/dd HH:mm:ss":"yyyy/MM/dd"},on:{"on-change":function(S){return i.handleChangeDate(g,b,S)}}}):i._e()],1)],1),i._v(" "),h("div",{staticClass:"oprate"},[h("p"),i._v(" "),D.tab_value.length-1===Number(b)?h("button",{staticClass:"operate-button",on:{click:function(S){return i.addColname(D.tab_value,g)}}},[h("i",{staticClass:"iconfont"},[i._v("\uEC3F")])]):i._e(),i._v(" "),D.tab_value.length>1?h("button",{staticClass:"operate-button",on:{click:function(S){return i.deleteColname(D.tab_value,g,b)}}},[h("i",{staticClass:"iconfont"},[i._v("\uED15")])]):i._e()])])}),i._v(" "),i.sumTabs.length-1===g?h("button",{staticClass:"operate-button ml-10 mb-10",on:{click:i.addButtonClick}},[h("i",{staticClass:"iconfont"},[i._v("\uEC3F")])]):i._e(),i._v(" "),i.sumTabs.length>1?h("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(C){return i.removeButtonClick(g)}}},[h("i",{staticClass:"iconfont"},[i._v("\uED15")])]):i._e()],2)])}),1)],1)},x=[],I=p(4174),T=p(6247),L=p(3800),O=function(){var i=this,r=i.$createElement,h=i._self._c||r;return h("div",[i._t("default"),i._v(" "),i.result.msg?h("div",{staticClass:"validate-msg"},[i._v(`
    `+i._s(i.result.msg)+`
  `)]):i._e()],2)},E=[];const N={props:{validateFunction:{type:Function},data:{},index:{type:String}},name:"",watch:{data:{handler(){this.validateValue()},immediate:!0}},data(){return{ruleList:[],result:{isPass:!0,msg:""}}},methods:{validateValue(){this.ruleList=[],this.validateFunction&&typeof this.validateFunction=="function"&&this.ruleList.push(this.validateFunction),this.ruleList.every(i=>(this.result=i(this.index),this.result.isPass))}}};var f=p(1900),u=(0,f.Z)(N,O,E,!1,null,null,null);const v=u.exports;var s=p(1847),a=p(8517),e=(i,r,h)=>new Promise((D,g)=>{var C=M=>{try{S(h.next(M))}catch(B){g(B)}},b=M=>{try{S(h.throw(M))}catch(B){g(B)}},S=M=>M.done?D(M.value):Promise.resolve(M.value).then(C,b);S((h=h.apply(i,r)).next())});const l={tab_name:"",tab_value:[{col_name:"",operator:"",contrast_value:"",selectOptions:[]}]},n={components:{Description:L.Z,Validate:v,SlickList:T.SlickList,SlickItem:T.SlickItem},name:"MultiTab",directives:{inputNumber:s.Z},inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},data(){return{currentTabIndex:0,currentKeyIndex:0,sumTabs:[JSON.parse(JSON.stringify(l))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],tipStyle:"",defaultSelected:[[]]}},watch:{sumTabs:{handler(){this.syncData()},deep:!0}},computed:{currentData(){return this.sumTabs[this.currentTabIndex]}},created(){return e(this,null,function*(){const{itemId:i}=this.$route.params;this._table_id_=i,this.initData(),this.setHover()})},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)},methods:{setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)})},setPos(i){this.tipStyle=`left: ${i.clientX+20}px;top:${i.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},initData(){return e(this,null,function*(){const i=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const r=[];i.forEach(C=>{C.tab_value.forEach(b=>{const S=`=${b.col_name}`;r.includes(S)||r.push(S)})});const h={table:"AD_COLUMN",startindex:0,range:r.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:r,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete h.fixedcolumns.AD_TABLE_ID;const D=(yield this.requestKeysData(h)).row||[],g=[];i.forEach((C,b)=>{g.push([]),C.tab_value.forEach((S,M)=>{g[b].push([]);const B=D.find(J=>J.DBNAME.val===S.col_name);g[b][M]=[{ID:B.ID.val,Label:B.DBNAME.val}],S.type=B.COLTYPE.val;const K=this.getSelectItems(S.type);S.selectOptions=K,S.type&&S.type.toUpperCase().startsWith("DATE")&&(S.contrast_value=S.contrast_value.split("~"))})}),this.defaultSelected=g,this.sumTabs=i}else this.sumTabs=[JSON.parse(JSON.stringify(l))]})},removeOption(i){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",i||[])},addButtonClick(){const i=JSON.parse(JSON.stringify(l));this.sumTabs.push(i),this.defaultSelected.push([[]])},removeButtonClick(i){this.sumTabs.splice(i,1),this.defaultSelected.splice(i,1)},addColname(i,r){i.push({col_name:"",operator:"",contrast_value:""}),this.defaultSelected[r].push([])},deleteColname(i,r,h){i.splice(h,1),this.defaultSelected[r].splice(h,1)},getKeys(i){return e(this,null,function*(){let r=0;typeof i=="number"&&(r=(i-1)*this.pageSize);const{itemId:h}=this.$route.params,D={table:"AD_COLUMN",startindex:r,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[h]},column_include_uicontroller:!0,isolr:!1};h==="New"&&delete D.fixedcolumns.AD_TABLE_ID,this.keyList=yield this.requestKeysData(D),this.totalCount=this.keyList.totalRowCount})},getSearchKeys(i,r,h){return e(this,null,function*(){if(this.currentTabIndex=i,this.currentKeyIndex=r,this.sumTabs[i].tab_value[r].col_name=h,h===""){this.searchKeyList=[];return}const{itemId:D}=this.$route.params,g={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[D],DBNAME:h,ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};D==="New"&&delete g.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout(()=>e(this,null,function*(){const C=(yield this.requestKeysData(g)).row||[];this.searchKeyList=C.map(b=>(Object.keys(b).forEach(S=>{b[S]=b[S].val}),b))}),200)):this.timer=setTimeout(()=>e(this,null,function*(){const C=(yield this.requestKeysData(g)).row||[];this.searchKeyList=C.map(b=>(Object.keys(b).forEach(S=>{b[S]=b[S].val}),b))}),200)})},requestKeysData(i){return e(this,null,function*(){return new Promise(r=>{this.network.post("/p/cs/QueryList",(0,a.d)({searchdata:i})).then(h=>{if(h.data.code===0){const D=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],g=h.data.data.tabth,C=h.data.data.row;for(let b=Math.max(g.length-1,0);b>=0;b--){const S=g[b];S.colname==="DBNAME"?S.isak=!0:S.isak=!1,D.includes(S.colname)&&g.splice(b,1)}C.forEach(b=>{for(const S in b)D.includes(S)&&delete b[S]}),r(h.data.data)}else r({})}).catch(()=>{r({})})})})},handlerInput(i){this.currentTabIndex=i},formatResult(i){const r=JSON.parse(JSON.stringify(i));for(let h=Math.max(r.length-1,0);h>=0;h--){const g=r[h];for(let C=Math.max(g.tab_value.length-1,0);C>=0;C--){const b=g.tab_value[C];b.type&&b.type.toUpperCase().startsWith("DATE")&&b.contrast_value[0]&&b.contrast_value[1]&&(b.contrast_value=b.contrast_value.join("~"))}}return r},setDisplayData(i){const r=JSON.parse(JSON.stringify(i));for(let h=Math.max(r.length-1,0);h>=0;h--){const D=h,g=r[D];for(let C=Math.max(g.tab_value.length-1,0);C>=0;C--){const b=g.tab_value[C];delete b.type,delete b.selectOptions,delete b.defaultSelected,(!b.col_name||!b.operator||!b.contrast_value)&&g.tab_value.splice(C,1)}(!g.tab_name||g.tab_value.length===0)&&r.splice(D,1)}return r},syncData(){const i=JSON.parse(JSON.stringify(this.formatResult(this.sumTabs))),r=this.setDisplayData(i);r.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:r})},handlerSelected(i,r,h){this.currentTabIndex=i,this.currentKeyIndex=r,this.sumTabs[i].tab_value[r].col_name=h[0].rowItem.DBNAME.val||h[0].rowItem.DBNAME,this.sumTabs[i].tab_value[r].operator="",this.sumTabs[i].tab_value[r].contrast_value="",this.sumTabs[i].tab_value[r].type=h[0].rowItem.COLTYPE.val||h[0].rowItem.COLTYPE,this.defaultSelected[i][r]=[h[0]]},handleClear(i,r){this.currentTabIndex=i,this.currentKeyIndex=r,this.sumTabs[i].tab_value[r].col_name="",this.sumTabs[i].tab_value[r].operator=""},handleSelectExpand(i,r){const h=this.sumTabs[i].tab_value[r].type||"",D=this.getSelectItems(h);this.$set(this.sumTabs[i].tab_value[r],"selectOptions",D)},formatType(i){let r;return i.toUpperCase().startsWith("NUMBER")?r="NUMBER":i.toUpperCase().startsWith("DATE")?r="DATE":(i.toUpperCase().startsWith("CHAR")||i.toUpperCase().startsWith("VARCHAR"))&&(r="STRING"),r},getSelectItems(i){switch(this.formatType(i)){case"STRING":return[{value:"=",label:"="}];case"NUMBER":return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}];case"DATE":return[{value:"between",label:"between"},{value:"=",label:"="}];default:return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"between",label:"between"}]}},validateKey(i){const[r,h]=i.split("-");if(!this.sumTabs[r].tab_value[h].col_name)return{isPass:!0,msg:""};const D=this.currentTabIndex,g=this.currentKeyIndex,C=this.sumTabs[D].tab_value[g].col_name;return this.sumTabs[D].tab_value.filter(S=>C!==""&&C!==null&&C!==void 0&&S.col_name===C).length>1?{isPass:!1,msg:this.$t("extensionProperty.selectOtherField")}:{isPass:!0,msg:""}},handleChangeDate(i,r,h){this.sumTabs[i].tab_value[r].contrast_value=h}}};var c=(0,f.Z)(n,R,x,!1,null,"4a0c8be3",null);const d=c.exports},4055:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>i});var R=function(){var r=this,h=r.$createElement,D=r._self._c||h;return D("div",[r.showDescription?D("Description",{attrs:{option:r.option},on:{removeOption:r.removeOption}}):r._e(),r._v(" "),D("div",{staticClass:"form-group"},r._l(r.listConfig,function(g,C){return D("ExtentionRowItem",{key:C,attrs:{"row-index":C,"row-count":r.listConfig.length,"row-label":""+r.$t("tips.button")+(C+1),"is-required":"","row-label-class":"rowLabel","show-operation-button":"","error-tip":r.rowValidateTips[C]},on:{addRow:r.addRow,removeRow:function(b){return r.removeRow(C)}}},[D("div",{staticClass:"col"},[D("div",{staticClass:"row"},[D("Input",{attrs:{placeholder:r.$t("extensionProperty.buttonField")},on:{"on-blur":function(b){return r.validateKey(C)}},model:{value:g.input,callback:function(b){r.$set(g,"input",b)},expression:"group.input"}})],1),r._v(" "),r.inputValidateTips[C]?D("div",{staticClass:"tip"},[r._v(`
          `+r._s(r.inputValidateTips[C])+`
        `)]):r._e(),r._v(" "),g.input?D("div",{staticClass:"row"},[D("div",{staticClass:"col"},[D("R3Select",{attrs:{options:g.selectConfig},on:{change:function(b){return r.getSelect(b,C)}}})],1),r._v(" "),D("div",{staticClass:"col"},[D("Input",{attrs:{placeholder:r.$t("extensionProperty.correspondingValue")},on:{"on-blur":function(b){return r.validateKey(C)}},model:{value:g.value,callback:function(b){r.$set(g,"value",b)},expression:"group.value"}})],1),r._v(" "),D("div",{staticClass:"col"},[D("Input",{attrs:{placeholder:r.$t("extensionProperty.optionalPrompt")},model:{value:g.desc,callback:function(b){r.$set(g,"desc",b)},expression:"group.desc"}})],1)]):r._e()])])}),1)],1)},x=[],I=p(4174),T=function(){var r=this,h=r.$createElement,D=r._self._c||h;return D("Select",r._g(r._b({attrs:{placeholder:r.formData.placeholder,clearable:""},model:{value:r.formData.defaultValue,callback:function(g){r.$set(r.formData,"defaultValue",g)},expression:"formData.defaultValue"}},"Select",r.$attrs,!1),r.$listeners),r._l(r.formData.selectOptions,function(g){return D("Option",{key:g.value,attrs:{value:g.value}},[r._v(`
    `+r._s(g.label)+`
  `)])}),1)},L=[],O=p(5331);const $={name:"ak-select",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(r){this.formData=(0,O.Z)(r)},deep:!0,immediate:!0}},data(){return{formData:{}}},methods:{}};var N=p(1900),f=(0,N.Z)($,T,L,!1,null,"7c705cef",null);const v=f.exports;var s=p(3800),a=p(4533),e=p(4470);const l=[{label:I.ZP.t("tips.modal"),value:"modal"},{label:I.ZP.t("tips.request"),value:"request"},{label:I.ZP.t("tips.route"),value:"route"}],o={input:"",selectConfig:{placeholder:I.ZP.t("extensionProperty.triggerType"),defaultValue:"",selectOptions:(0,O.Z)(l)},value:"",desc:""},c={name:"OperateColumnButton",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},components:{Description:s.Z,R3Select:v,ExtentionRowItem:a.Z},watch:{listConfig:{handler(r){const h=this.filterForm(r);Object.keys(h).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:h})},deep:!0},defaultData:{handler(r){(0,e.Q)(r)&&Object.assign(this.$data,this.$options.data.call(this))},deep:!0}},data(){return{listConfig:[(0,O.Z)(o)],inputValidateTips:[],rowValidateTips:[]}},methods:{filterForm(r){const h=(0,O.Z)(r);if(r.length===0)return{};const D={};return h.forEach(g=>{g.input&&g.selectConfig.defaultValue&&g.value&&(D[g.input]={type:g.selectConfig.defaultValue,value:g.value,desc:g.desc})}),D},removeOption(r){this.$emit("removeOption",r||[])},addRow(){this.listConfig.push((0,O.Z)(o))},removeRow(r){this.listConfig.splice(r,1)},getSelect(r,h){this.listConfig[h].selectConfig.defaultValue=r,this.validateKey(h)},validateKey(){const r=[],h=[];this.listConfig.forEach(D=>{D.input===""?r.push(this.$t("extensionProperty.buttonField")):r.push(""),D.input&&(D.value===""||!D.selectConfig.defaultValue)?h.push(this.$t("extensionProperty.confirmEventAndValue")):h.push("")}),this.inputValidateTips=r,this.rowValidateTips=h},init(){const r=(0,O.Z)(this.defaultData);if(Object.keys(r).length===0)return;const h=[];Object.keys(r).forEach(D=>{const g=r[D];h.push({input:D,selectConfig:{placeholder:this.$t("extensionProperty.triggerType"),defaultValue:g.type,selectOptions:(0,O.Z)(l)},value:g.value,desc:g.desc})}),this.listConfig=h}},created(){this.init()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var d=(0,N.Z)(c,R,x,!1,null,"3b6bf463",null);const i=d.exports},7486:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>v});var R=function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"PassWord"},[e("Description",{attrs:{option:s.option},on:{removeOption:s.removeOption}}),s._v(" "),e("div",{staticClass:"cell"},[e("EnumerateRadioItem",{attrs:{option:s.option,"break-line":!1,"default-data":s.value},on:{radioValueChange:s.radioValueChange}})],1),s._v(" "),s.value?e("div",{staticClass:"cell"},[e("LabelWithSelect",{attrs:{item:{key:"is_all",name:s.$t("extensionProperty.encryptionMethod"),selectOptions:[{text:s.$t("extensionProperty.hideAll"),value:!0},{text:s.$t("extensionProperty.customHide"),value:!1}]},"default-data":s.selectValue},on:{selectValueChange:s.selectValueChange}})],1):s._e(),s._v(" "),s.value&&!s.selectValue?e("div",{staticClass:"cell"},[e("LabelWithInput",{attrs:{"default-data":s.password_prefix_digit,item:{key:"password_prefix_digit",name:s.$t("extensionProperty.frontHiddenDigits"),type:"input"}},on:{inputValueChange:s.inputValueChange}})],1):s._e(),s._v(" "),s.value&&!s.selectValue?e("div",{staticClass:"cell"},[e("LabelWithInput",{attrs:{"default-data":s.password_suffix_digit,item:{key:"password_suffix_digit",name:s.$t("extensionProperty.endHiddenDigits"),type:"input"}},on:{inputValueChange:s.inputValueChange}})],1):s._e()],1)},x=[],I=p(4174),T=p(3800),L=p(3869),O=p(9118),E=p(7875);const N={name:"PassWord",components:{Description:T.Z,LabelWithSelect:L.Z,EnumerateRadioItem:O.Z,LabelWithInput:E.Z},props:{option:{type:Object,default:()=>({})}},data(){return{value:!1,selectValue:!0,password_prefix_digit:null,password_suffix_digit:null}},methods:{removeOption(s){this.value=!1,this.selectValue=0,this.$emit("removeOption",s||[]),this.$emit("dataChange",{key:"password_type",value:void 0})},selectValueChange({value:s}){this.selectValue=JSON.parse(s),this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}})},radioValueChange({key:s,value:a}){a?this.selectValue=!0:(a=void 0,this.selectValue=!1),this.value=a,this.$emit("dataChange",{key:s,value:a}),a?this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}}):this.$emit("dataChange",{key:"password_type",value:void 0})},inputValueChange({key:s,value:a}){const e=this.$parent.rootData?this.$parent.rootData.password_type:{};e[s]=a,this.$emit("dataChange",{key:"password_type",value:e})}},created(){const s=this.$parent.rootData;s.ispassword&&(this.value=s.ispassword),s.password_type&&(this.selectValue=s.password_type.is_all,this.password_prefix_digit=s.password_type.password_prefix_digit,this.password_suffix_digit=s.password_type.password_suffix_digit)},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var f=p(1900),u=(0,f.Z)(N,R,x,!1,null,null,null);const v=u.exports},6888:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>s});var R=function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",[l("Description",{attrs:{option:a.option},on:{removeOption:a.removeOption}}),a._v(" "),l("div",{staticClass:"form-group"},[l("h4",[a._v(a._s(a.$t("extensionProperty.leftColumnTable")))]),a._v(" "),a._l(a.formData.leftPinnedColumns,function(o,n){return l("ExtentionRowItem",{key:n,attrs:{"row-index":n,"row-count":a.formData.leftPinnedColumns.length,"error-tip":a.fieldValidateTip.leftPinnedColumns[n],"row-label":a.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(c){return a.addRow("leftPinnedColumns")},removeRow:function(c){return a.removeRow("leftPinnedColumns",n)}}},[l("div",{staticClass:"col"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.dropList,"auto-data":a.searchList,"page-size":a.pageSize,"total-row-count":a.totalCount,"columns-key":a.columnsKey,hidecolumns:a.hidecolumns,"default-selected":a.defaultFields.leftPinnedColumns[n],placeholder:a.$t("extensionProperty.selectLeftColumn")},on:{"on-popper-show":a.getSearchData,"on-page-change":a.getSearchData,"on-input-value-change":a.inputSearchData,"on-fkrp-selected":function(c){return a.selectValue(c,"leftPinnedColumns",n)},"on-clear":function(c){return a.clearValue("leftPinnedColumns",n)}}})],1)])})],2),a._v(" "),l("div",{staticClass:"form-group"},[l("h4",[a._v(a._s(a.$t("extensionProperty.rightColumnTable")))]),a._v(" "),a._l(a.formData.rightPinnedColumns,function(o,n){return l("ExtentionRowItem",{key:n,attrs:{"row-index":n,"row-count":a.formData.rightPinnedColumns.length,"error-tip":a.fieldValidateTip.rightPinnedColumns[n],"row-label":a.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(c){return a.addRow("rightPinnedColumns")},removeRow:function(c){return a.removeRow("rightPinnedColumns",n)}}},[l("div",{staticClass:"col"},[l("DropDownSelectFilter",{attrs:{single:"",data:a.dropList,"auto-data":a.searchList,"page-size":a.pageSize,"total-row-count":a.totalCount,"columns-key":a.columnsKey,hidecolumns:a.hidecolumns,"default-selected":a.defaultFields.rightPinnedColumns[n],placeholder:a.$t("extensionProperty.selectRightColumn")},on:{"on-popper-show":a.getSearchData,"on-page-change":a.getSearchData,"on-input-value-change":a.inputSearchData,"on-fkrp-selected":function(c){return a.selectValue(c,"rightPinnedColumns",n)},"on-clear":function(c){return a.clearValue("rightPinnedColumns",n)}}})],1)])})],2)],1)},x=[],I=p(4174),T=p(3800),L=p(4533),O=p(8517),E=p(8192),$=(a,e,l)=>new Promise((o,n)=>{var c=r=>{try{i(l.next(r))}catch(h){n(h)}},d=r=>{try{i(l.throw(r))}catch(h){n(h)}},i=r=>r.done?o(r.value):Promise.resolve(r.value).then(c,d);i((l=l.apply(a,e)).next())});const f={name:"PinnedColumns",inject:["network"],components:{Description:T.Z,ExtentionRowItem:L.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:String,default:""},keyForm:{type:Object,default:()=>({})}},data(){return{formData:{leftPinnedColumns:[""],rightPinnedColumns:[""]},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],defaultFields:{leftPinnedColumns:[],rightPinnedColumns:[]},fieldValidateTip:{leftPinnedColumns:[""],rightPinnedColumns:[""]}}},watch:{formData:{handler(a){const e=this.filterForm(a);e===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(){const a=this.formData.leftPinnedColumns.filter(l=>l!=="").join(","),e=this.formData.rightPinnedColumns.filter(l=>l!=="").join(",");return`${a}${e?"|"+e:""}`},removeOption(a){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",a||[])},addRow(a){this.formData[a].push(""),this.fieldValidateTip[a].push("")},removeRow(a,e){this.formData[a].splice(e,1),this.fieldValidateTip[a].splice(e,1)},getSearchData(a){return $(this,null,function*(){let e=0;typeof a=="number"&&(e=(a-1)*this.pageSize);const l={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete l.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(l),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,E.Ds)(function(a){if(a===""){this.searchList=[];return}const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:a,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then(l=>{const o=l.row||[];this.searchList=o.map(n=>(Object.keys(n).forEach(c=>{n[c]=n[c].val}),n)),this.totalCount=this.dropList.totalRowCount})}),commonApi(a,e,l){const{hideColumns:o,displayKeys:n}=l;return new Promise(c=>{this.network.post(a,(0,O.d)(e)).then(d=>{if(d.data.code===0){const i=d.data.data.tabth,r=d.data.data.row;for(let h=Math.max(i.length-1,0);h>=0;h--){const D=i[h];n.includes(D.colname)?D.isak=!0:D.isak=!1,o.includes(D.colname)&&i.splice(h,1)}o.length>0&&r.forEach(h=>{for(const D in h)o.includes(D)&&delete h[D]}),c(d.data.data)}else c({})}).catch(()=>{c({})})})},getKeyList(a){return $(this,null,function*(){return new Promise(e=>{const l=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],o="/p/cs/QueryList",n=this.commonApi(o,{searchdata:a},{hideColumns:l,displayKeys:["DBNAME"]});e(n)})})},selectValue(a,e,l){this.validateForm(a[0].Label,e,l)&&this.$set(this.formData[e],l,a[0].Label)},clearValue(a,e){this.$set(this.fieldValidateTip[a],e,""),this.$set(this.formData[a],e,"")},validateForm(a,e,l){let o=!0;return this.$set(this.fieldValidateTip[e],l,""),this.formData.leftPinnedColumns.forEach(n=>{a===n&&(o=!1,this.$set(this.fieldValidateTip[e],l,this.$t("extensionProperty.selectOtherField")))}),this.formData.rightPinnedColumns.forEach(n=>{a===n&&(o=!1,this.$set(this.fieldValidateTip[e],l,this.$t("extensionProperty.selectOtherField")))}),o},init(){return $(this,null,function*(){if(!this.defaultData)return;const[a,e]=this.defaultData.split("|");let l=[],o=[];a&&(l=a.split(",").map(i=>`=${i}`)),e&&(o=e.split(",").map(i=>`=${i}`));const n=l.concat(o),c={table:"AD_COLUMN",startindex:0,range:n.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:n,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete c.fixedcolumns.AD_TABLE_ID,((yield this.getKeyList(c)).row||[]).forEach(i=>{const r=`=${i.DBNAME.val}`,h=l.findIndex(D=>D===r);if(h>-1)this.$set(this.formData.leftPinnedColumns,h,i.DBNAME.val),this.$set(this.defaultFields.leftPinnedColumns,h,[{Label:i.DBNAME.val,ID:i.ID.val}]);else{const D=o.findIndex(g=>g===r);this.$set(this.formData.rightPinnedColumns,D,i.DBNAME.val),this.$set(this.defaultFields.rightPinnedColumns,D,[{Label:i.DBNAME.val,ID:i.ID.val}])}})})}},created(){return $(this,null,function*(){this._table_id_=this.$route.params.itemId==="New"?null:this.$route.params.itemId,this.init()})},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var u=p(1900),v=(0,u.Z)(f,R,x,!1,null,"72ac1e8d",null);const s=v.exports},3518:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>u});var R=function(){var v=this,s=v.$createElement,a=v._self._c||s;return a("div",[v.showDescription?a("Description",{attrs:{option:v.option},on:{removeOption:v.removeOption}}):v._e(),v._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"is-required":"","row-label":v.$t("extensionProperty.filterBaseOnField"),"error-tip":v.validateTip}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:v.$t("extensionProperty.selectSourceField")},on:{"on-blur":v.validateInput},model:{value:v.formData.srccols,callback:function(e){v.$set(v.formData,"srccols",e)},expression:"formData.srccols"}})],1),v._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:v.$t("extensionProperty.enterApi")},on:{"on-blur":v.validateInput},model:{value:v.formData.url,callback:function(e){v.$set(v.formData,"url",e)},expression:"formData.url"}})],1)])],1)],1)},x=[],I=p(4174),T=p(3800),L=p(4533),O=p(5331);const $={name:"RefcolFilter",components:{Description:T.Z,ExtentionRowItem:L.Z},data(){return{formData:{srccols:"",url:""},validateTip:""}},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},watch:{formData:{handler(v){const s=this.filterForm(v);Object.keys(s).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:s})},deep:!0}},methods:{removeOption(v){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",v||[])},filterForm(v){let s=(0,O.Z)(v);return(s.srccols===""||s.url==="")&&(s={}),s},validateInput(){const v=(0,O.Z)(this.formData);v.srccols===""||v.url===""?this.validateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.validateTip=""}},created(){const v=(0,O.Z)(this.defaultData);Object.keys(v).length>0&&(this.formData=v)},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var N=p(1900),f=(0,N.Z)($,R,x,!1,null,"4ec47d02",null);const u=f.exports},1882:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>a});var R=function(){var e=this,l=e.$createElement,o=e._self._c||l;return o("div",[e.showDescription?o("Description",{attrs:{option:e.option},on:{removeOption:e.removeOption}}):e._e(),e._v(" "),e._l(e.formData,function(n,c){return o("div",{key:c,staticClass:"form-group"},[o("ExtentionRowItem",{attrs:{"row-index":c,"row-count":e.formData.length,"row-label":""+e.$t("extensionProperty.condition")+(c+1),"show-operation-button":"","row-label-class":"rowLabel","is-required":"","error-tip":e.validateTips[c]},on:{addRow:e.addRow,removeRow:function(d){return e.removeRow(c)}}},[o("div",{staticClass:"col"},[o("div",{staticClass:"row "},[o("div",{staticClass:"col"},[o("span",{staticClass:"label"},[e._v(e._s(e.$t("extensionProperty.ifFieldOnMainTable"))+"\uFF1A")]),e._v(" "),o("R3Radio",{attrs:{options:n.radioConfig},on:{change:function(d){return e.getRadioValue(d,c)}}})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("Input",{attrs:{placeholder:e.$t("extensionProperty.knownConditionField")},on:{"on-blur":e.validateForm},model:{value:n.srccol,callback:function(d){e.$set(n,"srccol",d)},expression:"row.srccol"}})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("Input",{attrs:{placeholder:e.$t("extensionProperty.filteredFieldInForeignKey")},on:{"on-blur":e.validateForm},model:{value:n.fixcolumn,callback:function(d){e.$set(n,"fixcolumn",d)},expression:"row.fixcolumn"}})],1)])])])],1)})],2)},x=[],I=p(4174),T=p(3800),L=p(5331),O=p(2085),E=p(4533);const $={defaultValue:I.ZP.t("tips.no"),label:I.ZP.t("extensionProperty.ifSourceOnMainTable"),selectOptions:[{value:!0,label:I.ZP.t("tips.yes")},{value:!1,label:I.ZP.t("tips.no")}]},N={srccol:"",fixcolumn:"",maintable:!1,radioConfig:(0,L.Z)($)},u={name:"RefcolSearch",components:{Description:T.Z,ExtentionRowItem:E.Z,R3Radio:O.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]},showDescription:{type:Boolean,default:!0}},data(){return{formData:[(0,L.Z)(N)],defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[],validateTips:[]}},watch:{formData:{handler(e){const l=this.filterForm(e);l.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:l})},deep:!0}},methods:{filterForm(e){const l=(0,L.Z)(e);if(l.length===0)return[];const o=[];l.forEach((n,c)=>{delete n.radioConfig,(n.srccol===""||n.fixcolumn==="")&&o.push(c)});for(let n=o.length-1;n>-1;n--)l.splice(o[n],1);return l},validateForm(){const e=[];this.formData.forEach(l=>{l.srccol===""||l.fixcolumn===""?e.push(this.$t("extensionProperty.confirmConditionAndFilter")):e.push("")}),this.validateTips=e},removeOption(e){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",e||[])},addRow(){this.formData.push((0,L.Z)(N))},removeRow(e){this.formData.splice(e,1)},getRadioValue(e,l){this.formData[l].maintable=e.value},init(){const e=(0,L.Z)(this.defaultData);Object.keys(e).length>0&&(e.forEach(l=>{l.radioConfig=(0,L.Z)($),l.radioConfig.defaultValue=l.maintable?this.$t("tips.yes"):this.$t("tips.no"),l.maintable===void 0&&(l.maintable=!1)}),this.formData=e)}},created(){this.init()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var v=p(1900),s=(0,v.Z)(u,R,x,!1,null,"7c44e35f",null);const a=s.exports},4061:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>v});var R=function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"RowToColumn"},[e("Description",{attrs:{option:s.option},on:{removeOption:s.removeOption}}),s._v(" "),s.isInited?e("div",{staticClass:"form-group"},[e("ExtentionRowItem",{attrs:{"row-label":""+s.$t("extensionProperty.sourceTable"),errorTip:s.tableErrorTip}},[e("div",{staticClass:"col"},[e("DropDownSelectFilter",{attrs:{single:"",placeholder:s.$t("tips.pleaseSelect"),data:s.dropTableList,"auto-data":s.searchTableList,"page-size":s.pageSize,"total-row-count":s.totalTableCount,"columns-key":s.columnsTable,hidecolumns:s.hidecolumns,"default-selected":s.defaultForm.table?s.defaultForm.table:void 0},on:{"on-popper-show":s.getTableData,"on-page-change":s.getTableData,"on-input-value-change":s.inputTableData,"on-fkrp-selected":function(l){return s.selectValue(l,s.formData,"table","ID")},"on-clear":function(l){return s.clearValue(s.formData,"table")}}})],1)]),s._v(" "),e("ExtentionRowItem",{attrs:{"row-label":""+s.$t("tips.find")+s.$t("extensionProperty.field"),errorTip:s.fieldErrorTip}},[e("div",{staticClass:"col"},[e("DropDownSelectFilter",{ref:"fieldDrop",attrs:{single:"",placeholder:s.$t("tips.pleaseSelect"),data:s.dropList,"auto-data":s.searchList,"page-size":s.pageSize,"total-row-count":s.totalCount,"columns-key":s.columnsKey,hidecolumns:s.hidecolumns,"default-selected":s.defaultForm.refcolumn?s.defaultForm.refcolumn:void 0},on:{"on-popper-show":s.getSearchData,"on-page-change":s.getSearchData,"on-input-value-change":s.inputSearchData,"on-fkrp-selected":function(l){return s.selectValue(l,s.formData,"refcolumn","ID")},"on-clear":function(l){return s.clearValue(s.formData,"refcolumn")}}})],1)]),s._v(" "),e("ExtentionRowItem",{attrs:{"row-label":""+s.$t("tips.find")+s.$t("extensionProperty.condition"),errorTip:s.conditionErrorTip}},[e("div",{staticClass:"col"},[e("Input",{attrs:{placeholder:s.$t("extensionProperty.enterValue")},model:{value:s.formData.value,callback:function(l){s.$set(s.formData,"value",l)},expression:"formData.value"}})],1)])],1):s._e()],1)},x=[],I=p(4174),T=p(5331),L=p(8192),O=p(4648),E=(s,a,e)=>new Promise((l,o)=>{var n=i=>{try{d(e.next(i))}catch(r){o(r)}},c=i=>{try{d(e.throw(i))}catch(r){o(r)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(n,c);d((e=e.apply(s,a)).next())});const N={name:"RowToColumn",mixins:[O.Z],data(){return{formData:{table:"",refcolumn:"",value:""},columnsTable:["DESCRIPTION"],dropTableList:{},searchTableList:[],totalTableCount:0,defaultForm:{},isInited:!1,tableErrorTip:"",fieldErrorTip:"",conditionErrorTip:""}},watch:{formData:{handler(s){s.table||(this.formData.refcolumn="",this.defaultForm.refcolumn=void 0,this.$refs.fieldDrop.inputValue=""),this.checkValue();const a=this.filterForm(s);a===""?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:a})},deep:!0}},methods:{removeOption(s){return E(this,null,function*(){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",s||[]),this.isInited=!0})},filterForm(s){return s.table&&s.refcolumn&&s.value?(0,T.Z)(s):""},checkValue(){this.formData.table?this.tableErrorTip="":this.tableErrorTip=`${this.$t("tips.pleaseSelect")}${this.$t("extensionProperty.sourceTable")}`,this.formData.refcolumn?this.fieldErrorTip="":this.fieldErrorTip=`${this.$t("tips.pleaseSelect")}${this.$t("tips.find")}${this.$t("extensionProperty.field")}`,this.formData.value?this.conditionErrorTip="":this.conditionErrorTip=`${this.$t("extensionProperty.enterValue")}${this.$t("tips.find")}${this.$t("extensionProperty.condition")}`},getTableData(s){return E(this,null,function*(){let a=0;typeof s=="number"&&(a=(s-1)*this.pageSize);const e={table:"AD_TABLE",startindex:a,range:10,fixedcolumns:{ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};this.dropTableList=yield this.getTableList(e),this.totalTableCount=this.dropTableList.totalRowCount})},getTableList(s){return E(this,null,function*(){return new Promise(a=>{const e=["ORDERNO","MASK","URL","AD_OBJUICONF_ID","AD_VERSION_ID","CUSTOMIZENO","DISP_COLUMN_ID","FILTER","ISACTIVE","ISDISPATCHABLE","ISTREE","REALTABLE_ID","PROPS","PROC_SUBMIT","MODIFIERNAME","MODIFIEDDATE"],l="/p/cs/QueryList",o=this.commonApi(l,{searchdata:s},{hideColumns:e,displayKeys:["\u663E\u793A\u540D\u79F0"]});a(o)})})},inputTableData:(0,L.Ds)(function(s){if(s===""){this.searchTableList=[];return}const a={table:"AD_TABLE",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DESCRIPTION:s},column_include_uicontroller:!0,isolr:!1};this.getTableList(a).then(e=>{const l=e.row||[];this.searchTableList=l.map(o=>(Object.keys(o).forEach(n=>{o[n]=o[n].val}),o)),this.totalTableCount=this.dropTableList.totalRowCount})}),getSearchData(s){return E(this,null,function*(){let a=0;typeof s=="number"&&(a=(s-1)*this.pageSize);const e=this.formData.table,l={table:"AD_COLUMN",startindex:a,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[e]},column_include_uicontroller:!0,isolr:!1};e||delete l.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(l),this.totalCount=this.dropList.totalRowCount})},getKeyList(s){return E(this,null,function*(){return new Promise(a=>{const e=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],l="/p/cs/QueryList",o=this.commonApi(l,{searchdata:s},{hideColumns:e,displayKeys:["\u8868\u5185\u540D\u79F0"]});a(o)})})},inputSearchData:(0,L.Ds)(function(s){if(s===""){this.searchList=[];return}const a=this.formData.table,e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:s,AD_TABLE_ID:[a]},column_include_uicontroller:!0,isolr:!1};a||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then(l=>{const o=l.row||[];this.searchList=o.map(n=>(Object.keys(n).forEach(c=>{n[c]=n[c].val}),n)),this.totalCount=this.dropList.totalRowCount})}),init(){return E(this,null,function*(){if(!this.defaultData){this.isInited=!0;return}this.formData=(0,T.Z)(this.defaultData);let s={table:"AD_TABLE",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],ID:this.formData.table},column_include_uicontroller:!0,isolr:!1};const a=(yield this.getKeyList(s)).row||[];a.length>0&&(this.defaultForm.table=[{Label:a[0].DESCRIPTION.val,ID:this.formData.table}]),s={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:this.formData.table,ID:this.formData.refcolumn},column_include_uicontroller:!0,isolr:!1};const e=(yield this.getTableList(s)).row||[];e.length>0&&(this.defaultForm.refcolumn=[{Label:e[0].DBNAME.val,ID:this.formData.refcolumn}]),this.isInited=!0})}},created(){this.init()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var f=p(1900),u=(0,f.Z)(N,R,x,!1,null,null,null);const v=u.exports},6566:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>o});var R=function(){var n=this,c=n.$createElement,d=n._self._c||c;return d("div",[n.showDescription?d("Description",{attrs:{option:n.option},on:{removeOption:n.removeOption}}):n._e(),n._v(" "),d("div",{staticClass:"form-group"},[d("ExtentionRowItem",{attrs:{"row-label":n.$t("extensionProperty.targetFieldEditable")}},[d("div",{staticClass:"col"},[d("R3Radio",{attrs:{options:n.disabledConfig},on:{change:function(i){return n.getRadioValue(i,n.disabledConfig.key)}}})],1)]),n._v(" "),d("ExtentionRowItem",{attrs:{"row-label":n.$t("extensionProperty.ifFieldRequired"),"error-tip":n.radioValidateTip}},[d("div",{staticClass:"col"},[d("R3Radio",{attrs:{options:n.requiredConfig},on:{change:function(i){return n.getRadioValue(i,n.requiredConfig.key)}}})],1)]),n._v(" "),n._l(n.formData.field,function(i,r){return d("ExtentionRowItem",{key:r,attrs:{"row-index":r,"row-count":n.formData.field.length,"row-label":n.$t("extensionProperty.sourceField"),"show-operation-button":"","is-required":"","error-tip":n.fieldValidateTip[r]},on:{addRow:n.addRow,removeRow:function(h){return n.removeRow(r)}}},[d("div",{staticClass:"col"},[d("DropDownSelectFilter",{attrs:{single:"",data:n.dropList,"auto-data":n.searchList,"page-size":n.pageSize,"total-row-count":n.totalCount,"columns-key":n.columnsKey,hidecolumns:n.hidecolumns,"default-selected":n.defaultFields[i.refcolumn],placeholder:n.$t("extensionProperty.selectField")},on:{"on-popper-show":n.getSearchData,"on-page-change":n.getSearchData,"on-input-value-change":n.inputSearchData,"on-fkrp-selected":function(h){return n.selectTable(h,r)},"on-clear":function(h){return n.clearTableName(r)}}})],1),n._v(" "),d("div",{staticClass:"col"},[d("Input",{attrs:{placeholder:n.$t("extensionProperty.enterValue")},on:{"on-blur":n.validateField},model:{value:n.formData.field[r].refval,callback:function(h){n.$set(n.formData.field[r],"refval",h)},expression:"formData.field[index].refval"}})],1)])})],2)],1)},x=[],I=p(4174),T=p(2085),L=p(3800),O=p(4533),E=p(5331),$=p(8192),N=p(9277),f=p(8517),u=(n,c,d)=>new Promise((i,r)=>{var h=C=>{try{g(d.next(C))}catch(b){r(b)}},D=C=>{try{g(d.throw(C))}catch(b){r(b)}},g=C=>C.done?i(C.value):Promise.resolve(C.value).then(h,D);g((d=d.apply(n,c)).next())});const v={refcolumn:"",refval:""},a={name:"StaticRules",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:L.Z,R3Radio:T.Z,ExtentionRowItem:O.Z},inject:["network"],data(){return{formData:{field:[(0,E.Z)(v)],props:{disabled:void 0,required:void 0}},disabledConfig:{key:"disabled",defaultValue:this.$t("extensionProperty.clearConfig"),selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},requiredConfig:{defaultValue:this.$t("extensionProperty.clearConfig"),key:"required",selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[]}},watch:{formData:{handler(n){const c=this.filterForm(n);Object.keys(c).length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:c})},deep:!0}},methods:{filterForm(n){const c=(0,E.Z)(n);if(Object.keys(c.props).length===0&&delete c.props,c.props&&(c.props.required!==void 0||c.props.disabled!==void 0)){for(let i=c.field.length-1;i>=0;i--)c.field[i].refcolumn===""&&c.field.splice(i,1);return Object.keys(c.field).length===0?{}:c}return{}},addRow(){this.formData.field.push((0,E.Z)(v))},removeRow(n){this.formData.field.splice(n,1)},removeOption(n){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",n||[])},getRadioValue(n,c){this.formChange({key:c,value:n}),this.validateRadio()},validateRadio(){this.formData.props.required===void 0&&this.formData.props.disabled===void 0?this.radioValidateTip=this.$t("extensionProperty.selectRequiredOrUneditable"):this.radioValidateTip=""},validateField(){const n=(0,E.Z)(this.formData);if(n.length===0){this.fieldValidateTip=[];return}this.fieldValidateTip=[],n.field.forEach(c=>{c.refcolumn===""?this.fieldValidateTip.push(this.$t("extensionProperty.confirmFieldFilled")):this.fieldValidateTip.push("")})},formChange(n){const c=(0,E.Z)(this.formData),d=n.key;switch(d){case"disabled":case"required":c.props[d]=n.value.value;break;default:break}this.formData=c},selectTable(n,c){this.formData.field[c].refcolumn=n[0].Label,this.validateField()},clearTableName(n){this.formData.field[n].refcolumn="",this.validateField()},getSearchData(n){return u(this,null,function*(){let c=0;typeof n=="number"&&(c=(n-1)*this.pageSize);const d={table:"AD_COLUMN",startindex:c,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete d.fixedcolumns.AD_TABLE_ID,this.dropList=yield this.getKeyList(d),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,$.Ds)(function(n){if(n===""){this.searchList=[];return}const c={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:n,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete c.fixedcolumns.AD_TABLE_ID,this.getKeyList(c).then(d=>{const i=d.row||[];this.searchList=i.map(r=>(Object.keys(r).forEach(h=>{r[h]=r[h].val}),r)),this.totalCount=this.dropList.totalRowCount})}),commonApi(n,c,d){const{hideColumns:i,displayKeys:r}=d;return new Promise(h=>{this.network.post(n,(0,f.d)(c)).then(D=>{if(D.data.code===0){const g=D.data.data.tabth,C=D.data.data.row;for(let b=Math.max(g.length-1,0);b>=0;b--){const S=g[b];r.includes(S.colname)?S.isak=!0:S.isak=!1,i.includes(S.colname)&&g.splice(b,1)}i.length>0&&C.forEach(b=>{for(const S in b)i.includes(S)&&delete b[S]}),h(D.data.data)}else h({})}).catch(()=>{h({})})})},getKeyList(n){return u(this,null,function*(){return new Promise(c=>{const d=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],i="/p/cs/QueryList",r=this.commonApi(i,{searchdata:n},{hideColumns:d,displayKeys:["DBNAME"]});c(r)})})},getFieldDefaultValue(){return u(this,null,function*(){const n=this.defaultData.field||[];if(n.length===0)return;const d=n.map(h=>h.refcolumn).join(","),i={table:"AD_COLUMN",startindex:0,range:20,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:d,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete i.fixedcolumns.AD_TABLE_ID;const r=(yield this.getKeyList(i)).row||[];n.forEach(h=>{const D=r.find(g=>g.DBNAME.val===h.refcolumn);this.$set(this.defaultFields,h.refcolumn,[{ID:D.ID.val,Label:D.DBNAME.val}])})})},init(){const n=(0,E.Z)(this.defaultData);n.props&&(this.disabledConfig.defaultValue=(0,N.qq)("label",this.disabledConfig.selectOptions,c=>c.value===n.props.disabled),this.requiredConfig.defaultValue=(0,N.qq)("label",this.requiredConfig.selectOptions,c=>c.value===n.props.required)),Object.keys(n).length>0&&(n.field?this.formData=n:this.formData=Object.assign({field:[(0,E.Z)(v)]},n))}},created(){return u(this,null,function*(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()})},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var e=p(1900),l=(0,e.Z)(a,R,x,!1,null,"19e2036c",null);const o=l.exports},700:(P,A,p)=>{"use strict";p.r(A),p.d(A,{default:()=>l});var R=function(){var o=this,n=o.$createElement,c=o._self._c||n;return c("div",[c("Description",{attrs:{option:o.option},on:{removeOption:o.removeOption}}),o._v(" "),o.showConfig?c("div",{staticClass:"tw-mt-20"},[o._v(`
    `+o._s(o.$t("extensionProperty.onlySelectType"))+`
  `)]):c("div",{staticClass:"tw-mt-20 form-group"},o._l(o.formData,function(d,i){return c("div",{key:i,staticClass:"tw-mt-10"},[c("div",{staticClass:"row"},[c("div",{staticClass:"col row-title required-remark"},[o._v(`
          `+o._s(o.$t("extensionProperty.condition"))+o._s(i+1)+`\uFF1A
        `)]),o._v(" "),c("div",{staticClass:"col "},[c("Select",{attrs:{placeholder:o.$t("extensionProperty.selectQueryConditions"),clearable:""},on:{"on-change":o.validateForm},model:{value:d.operator,callback:function(r){o.$set(d,"operator",r)},expression:"condition.operator"}},o._l(o.operateOptions,function(r){return c("Option",{key:r.value,attrs:{value:r.value}},[o._v(`
              `+o._s(r.label)+`
            `)])}),1)],1),o._v(" "),c("div",{staticClass:"col"},[c("Input",{on:{"on-blur":o.validateForm},model:{value:d.key_value,callback:function(r){o.$set(d,"key_value",r)},expression:"condition.key_value"}})],1),o._v(" "),c("div",{staticClass:"col"},[c("DropDownSelectFilter",{attrs:{single:"","default-selected":o.dropDefaultList[d.table_id],data:o.dropList,"auto-data":o.searchList,"page-size":o.pageSize,"total-row-count":o.totalCount,"columns-key":o.columnsKey,hidecolumns:o.hidecolumns,placeholder:o.$t("extensionProperty.selectTable")},on:{"on-popper-show":o.getSearchData,"on-page-change":o.getSearchData,"on-input-value-change":o.inputSearchData,"on-fkrp-selected":function(r){return o.selectTable(r,i)},"on-clear":function(r){return o.clearTableName(i)}}})],1),o._v(" "),c("div",{staticClass:"col btn-group"},[o.formData.length-1===i?c("button",{staticClass:"operate-button",on:{click:o.addRow}},[c("i",{staticClass:"iconfont"},[o._v("\uEC3F")])]):o._e(),o._v(" "),o.formData.length>1?c("button",{staticClass:"operate-button",on:{click:function(r){return o.removeRow(i)}}},[c("i",{staticClass:"iconfont"},[o._v("\uED15")])]):o._e()])]),o._v(" "),o.errorList[i]?c("div",{staticClass:"error-tip tw-mt-10"},[o._v(`
        `+o._s(o.errorList[i])+`
      `)]):o._e()])}),0)],1)},x=[],I=p(4174),T=p(3800),L=p(5331),O=p(8192),E=p(8517),$=p(2995),N=(o,n,c)=>new Promise((d,i)=>{var r=g=>{try{D(c.next(g))}catch(C){i(C)}},h=g=>{try{D(c.throw(g))}catch(C){i(C)}},D=g=>g.done?d(g.value):Promise.resolve(g.value).then(r,h);D((c=c.apply(o,n)).next())});const f="AD_TABLE",u={key_value:"",operator:"",table_id:""},s={name:"TableQuery",props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]},keyForm:{type:Object,default:()=>({})}},components:{Description:T.Z},inject:["network"],data(){return{formData:[(0,L.Z)(u)],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["AD_REFBY_TABLE_ID"],hidecolumns:["ID"],tableIdOfKey:"",displayTypeOfKey:"",typeOfKey:"",operateOptions:[],dropDefaultList:{},errorList:[]}},computed:{showConfig(){return this.tableIdOfKey&&this.displayTypeOfKey.includes("select")}},watch:{formData:{handler(){this.submitData()},deep:!0}},methods:{validateForm(){const o=(0,L.Z)(this.formData);if(o.length===0){this.errorList=[];return}this.errorList=[],o.forEach((n,c)=>{n.key_value===""||!n.operator||!n.table_id?this.errorList.push(this.$t("extensionProperty.checkCondition",{row:c+1})):this.errorList.push("")})},removeOption(o){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",o||[])},addRow(){this.formData.push((0,L.Z)(u))},removeRow(o){this.formData.splice(o,1)},clearTableName(o){this.formData[o].table_id="",this.validateForm()},getOperateOptions(o){return[{value:"=",label:"="}]},getSearchData(o){return N(this,null,function*(){let n=0;typeof o=="number"&&(n=(o-1)*this.pageSize);const c={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:n,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.dropList=yield this.getRelativeTable(c,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}),this.totalCount=this.dropList.totalRowCount})},inputSearchData:(0,O.Ds)(function(o){if(o===""){this.searchList=[];return}const n={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.getRelativeTable(n,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}).then(c=>{const d=c.row||[];this.searchList=d.map(i=>(Object.keys(i).forEach(r=>{i[r]=i[r].val}),i)).filter(i=>i.AD_REFBY_TABLE_ID.toUpperCase().includes(o.toUpperCase())),this.totalCount=this.dropList.totalRowCount})}),selectTable(o,n){this.formData[n].table_id=o[0].ID,this.validateForm()},commonApi(o,n,c){const{hideColumns:d,displayKeys:i,bindId:r}=c;return new Promise(h=>{this.network.post(o,(0,E.d)(n)).then(D=>{if(D.data.code===0){const g=D.data.data.tabth,C=D.data.data.row;r&&C.forEach(b=>{const[S,M]=r.targetKey.split(".");b.ID.val=b[S][M]});for(let b=Math.max(g.length-1,0);b>=0;b--){const S=g[b];i.includes(S.colname)?S.isak=!0:S.isak=!1,d.includes(S.colname)&&g.splice(b,1)}d.length>0&&C.forEach(b=>{for(const S in b)d.includes(S)&&delete b[S]}),h(D.data.data)}else h({})}).catch(()=>{h({})})})},requestKeysData(o){return N(this,null,function*(){return new Promise(n=>{const c=["ORDERNO","MASK","AD_VERSION_ID","ISACTIVE","MODIFIERNAME","MODIFIEDDATE","REALTABLE_ID","AD_TABLECATEGORY_ID","AD_OBJUICONF_ID","FILTER","PROPS","ISDISPATCHABLE","PROC_SUBMIT","URL","CUSTOMIZENO","DISP_COLUMN_ID","ISTREE"],d="/p/cs/QueryList",i=this.commonApi(d,o,{hideColumns:c,displayKeys:["NAME"]});n(i)})})},getRelativeTable(o,n){return N(this,null,function*(){return new Promise(c=>{const d=["ISACTIVE","ORDERNO","AD_REFBY_COLUMN_ID","FILTER","ASSOCTYPE","INLINEMODE","AD_VERSION_ID","MODIFIERNAME","MODIFIEDDATE"],i="/p/cs/objectTableItem",r=this.commonApi(i,o,{hideColumns:d,displayKeys:["\u5173\u8054\u8868","\u63CF\u8FF0"],bindId:n});c(r)})})},initData(){const{DISPLAYTYPE:o,AD_TABLE_ID:n,COLTYPE:c,AD_TABLE_ID_LABEL:d}=this.keyForm||{};this._table_id_=n,this.displayTypeOfKey=o,this.tableIdOfKey=d,this.typeOfKey=c,this.operateOptions=this.getOperateOptions(this.typeOfKey);const i=(0,L.Z)(this.defaultData);this.defaultData&&this.defaultData.length>0&&(this.formData=i)},filterForm(){const o=(0,L.Z)(this.formData);for(let n=o.length-1;n>=0;n--){const c=o[n];(c.key_value===""||!c.operator||!c.table_id)&&o.splice(n,1)}return o},submitData(){const o=this.filterForm();o.length===0?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:o})},restoreFormData(){return N(this,null,function*(){const o=this.defaultData,n=o.length;if(n===0)return;const c=o.map(r=>r.table_id),d={searchdata:{table:f,startindex:0,range:n,fixedcolumns:{ID:c,ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1}},i=(yield this.requestKeysData(d)).row||[];o.forEach(r=>{const h=i.find(D=>Number(D.ID.val)===Number(r.table_id));this.$set(this.dropDefaultList,r.table_id,[{ID:r.table_id,Label:h.NAME.val}])})})}},created(){this.initData(),this.restoreFormData()},beforeCreate(){this.$t=I.ZP.t.bind(I.ZP)}};var a=p(1900),e=(0,a.Z)(s,R,x,!1,null,"f0369434",null);const l=e.exports},9109:(P,A,p)=>{var R={"./BindKey.vue":362,"./DateShortcut.vue":3927,"./DisableButton.vue":3178,"./FilterColVal.vue":2013,"./FormRequest.vue":2012,"./HiddenSubtable.vue":6430,"./Highlight.vue":4302,"./MultiTab.vue":4246,"./OperateColumnButton.vue":4055,"./PassWord.vue":7486,"./PinnedColumns.vue":6888,"./RefcolFilter.vue":3518,"./RefcolSearch.vue":1882,"./RowToColumn.vue":4061,"./StaticRules.vue":6566,"./TableQuery.vue":700};function x(T){var L=I(T);return p(L)}function I(T){if(!p.o(R,T)){var L=new Error("Cannot find module '"+T+"'");throw L.code="MODULE_NOT_FOUND",L}return R[T]}x.keys=function(){return Object.keys(R)},x.resolve=I,P.exports=x,x.id=9109}}]);

//# sourceMappingURL=ExtensionPropertyWrap.js.map