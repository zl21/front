(self.webpackChunk$Bcl=self.webpackChunk$Bcl||[]).push([[64],{3237:(t,e,a)=>{"use strict";a.d(e,{Z:()=>l});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"description"},[a("div",{staticStyle:{flex:"1"}},[a("span",{staticClass:"fieldName"},[t._v("\n      "+t._s(t.option.name)+" ：\n    ")]),t._v(" "),a("span",{staticClass:"content"},[t._v("\n      "+t._s(t.option.description)+"\n    ")])]),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:t.removeOption}},[a("Button",{attrs:{title:t.$t("extensionProperty.clearConfig"),icon:"iconbj_delete",type:"primary",shape:"circle"}})],1)])};i._withStripped=!0;var o=a(2370);const s={name:"Description",props:{option:{type:Object,default:()=>({})}},methods:{clearDomValue(){document.querySelector(".extentionProperty .middle").querySelectorAll("input,select").forEach((t=>{t.value="","radio"===t.type&&""===t.value?t.checked=!0:t.checked=!1}))},removeOption(){switch(this.option.type){case"input":case"radio":case"object-group":this.$emit("removeOption",[this.option.key]);break;case"input-group":"__root__"===this.option.key?this.$emit("removeOption",this.option.inputLists.map((t=>t.key))):this.$emit("removeOption",[this.option.key]);break;default:this.$emit("removeOption",[this.option.key])}this.clearDomValue()}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};var n=(0,a(1900).Z)(s,i,[],!1,null,"01ff076d",null);n.options.__file="src/components/extension-property/description/Description.vue";const l=n.exports},6623:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-mt-10"},[a("div",{staticClass:"row"},[t.rowLabel?a("div",{staticClass:"col row-title",class:[t.rowLabelClass]},[a("span",{class:[t.isRequired?"required-remark":""]},[t._v(t._s(t.rowLabel)+"：")])]):t._e(),t._v(" "),t._t("default"),t._v(" "),t.showOperationButton?a("div",{staticClass:"col btn-group"},[t.rowCount-1===t.rowIndex?a("button",{staticClass:"operate-button",on:{click:t.addRow}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.rowCount>1?a("button",{staticClass:"operate-button",on:{click:t.removeRow}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()]):t._e()],2),t._v(" "),t.errorTip?a("div",{staticClass:"error-tip tw-mt-10"},[a("div",{staticClass:"tw-inline-block row-title label-placeholder",class:[t.rowLabelClass]}),t._v("\n    "+t._s(t.errorTip)+"\n  ")]):t._e()])};i._withStripped=!0;a(2995);const o={name:"",props:{rowIndex:{type:Number,default:-1},rowCount:{type:Number,default:-1},rowLabelClass:{type:String,default:""},rowLabel:{type:String,default:""},showOperationButton:{type:Boolean,default:!1},errorTip:{type:String,default:""},isRequired:{type:Boolean,default:!1}},data:()=>({}),methods:{addRow(){this.$emit("addRow")},removeRow(){this.$emit("removeRow")}}};a(6966);var s=(0,a(1900).Z)(o,i,[],!1,null,"52d5b9cd",null);s.options.__file="src/components/extension-property/extension-row-item/ExtensionRowItem.vue";const n=s.exports},1238:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(3237),o=a(6623),s=a(3986),n=a(6015),l=a(2370);const r={inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{},keyForm:{type:Object,default:()=>({})}},data:()=>({dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"]}),components:{Description:i.Z,ExtentionRowItem:o.Z},beforeCreate(){this.$t=l.ZP.t.bind(l.ZP)},methods:{addRow(t,e){t.push((0,s.Z)(e))},removeRow(t,e){t.splice(e,1)},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},commonApi(t,e,a){const{hideColumns:i,displayKeys:o}=a;return new Promise((a=>{this.network.post(t,(0,n.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,s=t.data.data.row;for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.name)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&s.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},selectValue(t,e,a,i){this.$set(e,a,t[0][i])},clearValue(t,e){this.$set(t,e,"")}}}},8080:(t,e,a)=>{"use strict";a.d(e,{Z:()=>l});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("RadioGroup",t._g(t._b({on:{"on-change":t.radioChange},model:{value:t.formData.defaultValue,callback:function(e){t.$set(t.formData,"defaultValue",e)},expression:"formData.defaultValue"}},"RadioGroup",t.$attrs,!1),t.$listeners),t._l(t.formData.selectOptions,(function(t){return a("Radio",{key:t.label,attrs:{label:t.label}})})),1)};i._withStripped=!0;var o=a(3986);const s={name:"ak-radio",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(t){this.formData=(0,o.Z)(t)},deep:!0,immediate:!0}},data:()=>({formData:{}}),methods:{radioChange(t){const e=this.options.selectOptions.find((e=>e.label===t));this.$emit("change",e)}}};var n=(0,a(1900).Z)(s,i,[],!1,null,"808cc132",null);n.options.__file="src/components/radio/Radio.vue";const l=n.exports},4582:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});const i=function(t,e){let a=t;"INPUT"!==t.tagName&&(a=t.querySelector("input")),e.arg&&"NUMBER"===e.arg?a.onkeypress=function(t){const a="number"==typeof(t=t||window.event).charCode?t.charCode:t.keyCode,i=[];e.modifiers.comma&&i.push(44),e.modifiers.decimal&&i.push(46),!/\d/.test(String.fromCharCode(a))&&a>9&&!t.ctrlKey&&!i.includes(a)&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}:a.onkeypress=function(){}}},5813:(t,e,a)=>{"use strict";function i(t,e,a){return e.find(a)[t]}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}a.d(e,{qq:()=>i,kJ:()=>o})},2667:(t,e,a)=>{"use strict";function i(t,e=200){let a;return function(...i){const o=this,s=i;clearTimeout(a),a=setTimeout((()=>t.apply(o,s)),e)}}function o(t){return"function"==typeof t}a.d(e,{Ds:()=>i,mf:()=>o})},2260:(t,e,a)=>{(t.exports=a(3645)(!1)).push([t.id,"\n.extentionObjectGroup[data-v-b8ca65a4] {\n  display: flex;\n  flex-direction: column;\n}\n",""])},8921:(t,e,a)=>{(t.exports=a(3645)(!1)).push([t.id,"/* tailwind插件弃用了，所以把之前的样式直接放这里管理 */\n.tw-inline-block {\n  display: inline-block\n}\n\n.tw-flex {\n  display: flex\n}\n\n.tw-flex-grow {\n  flex-grow: 1\n}\n\n.tw-mt-10 {\n  margin-top: 10px\n}\n\n.tw-mt-20 {\n  margin-top: 20px\n}\n\n.one-line-flow {\n  overflow: hidden;\n  white-space: nowrap; \n  text-overflow: ellipsis; \n}\n\n.text-right {\n  text-align: right\n}\n\n.text-center {\n  text-align: center\n}\n\n.text-left {\n  text-align: left\n}\n\n.flex-right {\n  justify-content: flex-end\n}\n\n.flex-center {\n  justify-content: center\n}\n\n.flex-left {\n  justify-content: flex-start\n}",""])},2729:()=>{},1669:()=>{},829:()=>{},8166:()=>{},349:()=>{},8209:()=>{},8125:()=>{},1403:()=>{},8846:()=>{},8842:()=>{},4954:()=>{},4158:()=>{},9827:()=>{},7834:()=>{},2107:()=>{},4502:()=>{},3824:()=>{},5603:()=>{},7882:()=>{},8721:()=>{},4171:()=>{},1382:()=>{},3501:()=>{},1075:()=>{},4008:()=>{},6457:()=>{},4893:()=>{},6966:()=>{},7208:()=>{},6166:(t,e,a)=>{var i=a(2260);"string"==typeof i&&(i=[[t.id,i,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};a(6723)(i,o);i.locals&&(t.exports=i.locals)},2995:(t,e,a)=>{var i=a(8921);"string"==typeof i&&(i=[[t.id,i,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};a(6723)(i,o);i.locals&&(t.exports=i.locals)},3585:(t,e,a)=>{"use strict";a.d(e,{Z:()=>l});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"radioItemWrapper",staticClass:"radioItemWrapper"},[t._l(t.option.enumerateValue,(function(e,i){return a("label",{key:i,staticClass:"radioItem",attrs:{for:t.option.key+"-"+t.guid+"-"+i}},[a("input",{attrs:{id:t.option.key+"-"+t.guid+"-"+i,type:"radio",name:t.option.key+"-"+t.guid},domProps:{value:e.value},on:{change:function(a){return t.radioValueChange(e.value)}}}),t._v("\n    "+t._s(e.text)+"\n  ")])})),t._v(" "),a("label",{staticClass:"radioItem",attrs:{for:t.option.key+"-"+t.guid+"-clean"}},[a("input",{attrs:{id:t.option.key+"-"+t.guid+"-clean",type:"radio",name:t.option.key+"-"+t.guid},domProps:{value:"__empty__"},on:{change:function(e){return t.radioValueChange("")}}}),t._v(" "),a("span",[t._v("\n      "+t._s(t.$t("extensionProperty.clearConfig"))+"\n    ")])])],2)};i._withStripped=!0;var o=a(2370);const s={name:"EnumerateRadioItem",data:()=>({guid:Math.round(1e10*Math.random())}),methods:{radioValueChange(t){this.$emit("radioValueChange",{key:this.option.key,value:t})}},props:{option:{type:Object,default:()=>({})},breakLine:{type:Boolean,default:!0},defaultData:{type:[Boolean,String],default:"__empty__"}},mounted(){this.$refs.radioItemWrapper.querySelectorAll("input[type=radio]").forEach((t=>{`${t.value}`==`${this.defaultData}`&&(t.checked=!0)}))},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};var n=(0,a(1900).Z)(s,i,[],!1,null,"bf498a54",null);n.options.__file="src/components/extension-property/EnumerateRadioItem.vue";const l=n.exports},8064:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>st});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"extentionProperty tw-mt-10"},[a("div",{staticClass:"left"},[a("div",{staticClass:"search-pannel"},[a("Input",{attrs:{search:"","enter-button":t.$t("tips.find"),placeholder:t.$t("extensionProperty.enterConfig")},on:{"on-change":t.filterConfig},model:{value:t.configName,callback:function(e){t.configName=e},expression:"configName"}})],1),t._v(" "),a("ul",{staticClass:"menu-list"},[t._l(t.configList,(function(e,i){return a("li",{key:i,staticClass:"menu",class:{active:i===t.currentIndex},on:{click:function(a){t.scrollIntoView(e,i)}}},[a("span",{staticClass:"config-title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"extentionProperty-key"},[t._v(t._s("__root__"===e.key?"":e.key))])])})),t._v(" "),0===t.configList.length?a("li",{staticStyle:{"justify-content":"center"}},[t._v("\n        "+t._s(t.$t("extensionProperty.noConfiguration"))+"\n      ")]):t._e()],2)]),t._v(" "),a("div",{staticClass:"middle"},[t._l(t.configList,(function(e,i){return[i===t.currentIndex?a("div",{key:e.name,staticClass:"item-render-area"},["input"===e.type?a("ExtentionInput",{attrs:{id:e.key+"-"+i+"-"+t.guid,option:e,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"radio"===e.type?a("ExtentionRadio",{attrs:{id:e.key+"-"+i+"-"+t.guid,option:e,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"select"===e.type?a("ExtentionSelect",{attrs:{id:e.key+"-"+i+"-"+t.guid,item:e,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key]},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"input-group"===e.type?a("ExtentionInputGroup",{attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData)),option:e},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"object-group"===e.type?a("ExtentionObjectGroup",{attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key],option:e},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"object-value"===e.type?a("ExtensionObjectValue",{attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key],option:e},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"options-group"===e.type?a("ExtentionOptions",{attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key],option:e},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"keyValue"===e.type?a("KeyValueItem",{attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData)),option:e},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e(),t._v(" "),"custom"===e.type?a(e.component,{tag:"components",attrs:{id:e.key+"-"+i+"-"+t.guid,"default-data":JSON.parse(JSON.stringify(t.rootData))[e.key],option:e,keyForm:t.keyForm},on:{dataChange:t.rootDataChange,removeOption:t.removeOption}}):t._e()],1):t._e()]}))],2),t._v(" "),a("div",{staticClass:"right"},[a("textarea",{attrs:{readonly:""},domProps:{value:t.formatedRootData}})])])};i._withStripped=!0;var o=a(2370),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"extentionCellInput"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"content"},[a("LabelWithInput",{attrs:{item:t.option,"default-data":t.defaultData},on:{inputValueChange:t.inputValueChange}})],1)],1)};s._withStripped=!0;var n=a(3237),l=a(9778);const r={name:"ExtentionInput",components:{Description:n.Z,LabelWithInput:l.Z},methods:{removeOption(t){this.$emit("removeOption",t||[])},inputValueChange({key:t,value:e}){this.$emit("dataChange",{key:t,value:e})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}}};a(829);var c=a(1900),u=(0,c.Z)(r,s,[],!1,null,null,null);u.options.__file="src/components/extension-property/ExtentionInput.vue";const d=u.exports;var p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"extentionRadio"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"content"},[a("EnumerateRadioItem",{attrs:{"default-data":t.defaultData,option:t.option},on:{radioValueChange:t.radioValueChange}})],1)],1)};p._withStripped=!0;var h=a(3585);const m={name:"ExtentionRadio",components:{Description:n.Z,EnumerateRadioItem:h.Z},methods:{removeOption(t){this.$emit("removeOption",t||[])},radioValueChange({key:t,value:e}){this.$emit("dataChange",{key:t,value:e})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};a(8209);var f=(0,c.Z)(m,p,[],!1,null,null,null);f.options.__file="src/components/extension-property/ExtentionRadio.vue";const _=f.exports;var v=a(5438),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"extentionObjectGroup"},[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"content-row"},[t.option.showLabel?a("div",{staticClass:"left"},[a("label",[t._v(t._s(t.option.name))]),t._v(" "),a("label",[t._v(t._s(t.option.key))])]):t._e(),t._v(" "),a("div",{staticClass:"right"},t._l(t.dataArray,(function(e,i){return a("div",{key:i,staticClass:"content"},[i<=t.currentIndex?a("ObjectGroupItem",{attrs:{"object-group-index":i,"default-data":t.defaultData[i]||{},data:e,option:t.option,"show-add-button":t.currentIndex===i&&9!==t.currentIndex,"show-minus-button":t.currentIndex===i&&0!==t.currentIndex},on:{objectGroupItemChange:t.objectGroupItemChange,addButtonClick:t.addButtonClick,minusButtonClick:t.minusButtonClick}}):t._e()],1)})),0)])],1)};y._withStripped=!0;var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"labelWithObjectGroup"},[t._l(t.option.objectInfo,(function(e,i){return["input"===e.type?a("LabelWithInput",{key:i,attrs:{item:e,"default-data":t.defaultData[e.key]},on:{inputValueChange:t.objectGroupValueChange}}):t._e(),t._v(" "),"radio"===e.type?a("LabelWithRadio",{key:i,attrs:{item:e,"default-data":t.defaultData[e.key]},on:{radioValueChange:t.objectGroupValueChange}}):t._e(),t._v(" "),"select"===e.type?a("LabelWithSelect",{key:i,attrs:{item:e,"default-data":t.defaultData[e.key]},on:{selectValueChange:t.objectGroupValueChange}}):t._e()]})),t._v(" "),t.showAddButton&&!t.currentDataIsEmpty?a("button",{staticClass:"operate-button",on:{click:t.addButtonClick}},[t._v("\n    +\n  ")]):t._e(),t._v(" "),t.showMinusButton?a("button",{staticClass:"operate-button",on:{click:t.minusButtonClick}},[t._v("\n    -\n  ")]):t._e()],2)};D._withStripped=!0;var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-item"},[a("div",{staticClass:"cell"},[a("LabelForInput",{attrs:{item:t.item}}),t._v(" "),a("EnumerateRadioItem",{attrs:{option:t.item,"break-line":!1,"default-data":t.defaultData},on:{radioValueChange:t.radioValueChange}})],1)])};b._withStripped=!0;const g={name:"LabelWithRadio",components:{LabelForInput:a(2483).Z,EnumerateRadioItem:h.Z},methods:{radioValueChange({key:t,value:e}){this.$emit("radioValueChange",{key:t,value:e})}},props:{item:{type:Object,default:()=>({})},defaultData:{type:[Boolean,String],default:"__empty__"}}};var C=(0,c.Z)(g,b,[],!1,null,"67aee826",null);C.options.__file="src/components/extension-property/LabelWithRadio.vue";const I=C.exports,E={name:"ObjectGroupItem",data:()=>({currentData:{}}),components:{LabelWithInput:l.Z,LabelWithRadio:I,LabelWithSelect:v.Z},methods:{objectGroupValueChange({key:t,value:e}){this.currentData=Object.assign({},this.currentData,{[t]:e}),""===e&&delete this.currentData[t],this.$emit("objectGroupItemChange",this.objectGroupIndex,{key:t,value:e,belongKey:this.option.key})},addButtonClick(){this.$emit("addButtonClick",{belongKey:this.option.key})},minusButtonClick(){this.$emit("minusButtonClick",{belongKey:this.option.key})}},props:{option:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},showAddButton:{type:Boolean,default:!1},showMinusButton:{type:Boolean,default:!1},objectGroupIndex:{type:Number,default:0},defaultData:{type:Object,default:()=>({})}},computed:{currentDataIsEmpty(){return"{}"===JSON.stringify(this.currentData)}},mounted(){this.currentData=JSON.parse(JSON.stringify(this.defaultData))}};var O=(0,c.Z)(E,D,[],!1,null,"efbdb492",null);O.options.__file="src/components/extension-property/ObjectGroupItem.vue";const k=O.exports,w=t=>{const e=[];if(t<=0)return[];for(let a=0;a<t;a++)e.push({});return e},S={name:"ExtentionObjectGroup",data:()=>({currentIndex:0,dataArray:w(10)}),components:{Description:n.Z,ObjectGroupItem:k},methods:{removeOption(t){this.$emit("removeOption",t||[])},objectGroupItemChange(t,{key:e,value:a}){let i=JSON.parse(JSON.stringify(this.defaultData||[]));""===a?i[t]&&void 0!==i[t][e]&&(delete i[t][e],1===i.length&&0===t&&"{}"===JSON.stringify(i[t])&&i.splice(t,1)):i[t]=Object.assign({},i[t],{[e]:a}),i=JSON.parse(JSON.stringify(i)).map((t=>t||{})),this.$emit("dataChange",{key:this.option.key,value:0===i.length?"":i},t)},addButtonClick(){this.currentIndex>=9||(this.currentIndex=this.currentIndex+1)},minusButtonClick(){if(this.currentIndex<=0)return;this.currentIndex=this.currentIndex-1;const t=JSON.parse(JSON.stringify(this.defaultData||[]));t.pop(),this.$emit("dataChange",{key:this.option.key,value:t})}},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Array],default:()=>[]}},created(){this.dataArray=this.dataArray.map(((t,e)=>t||this.defaultData[e])),this.currentIndex=this.defaultData.length-1>=0?this.defaultData.length-1:0}};a(6166);var A=(0,c.Z)(S,y,[],!1,null,"b8ca65a4",null);A.options.__file="src/components/extension-property/ExtentionObjectGroup.vue";const x=A.exports;var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"extentionInputGroup"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"content"},[t._l(t.option.inputLists,(function(e,i){return["input"===e.type?a("LabelWithInput",{key:i,attrs:{item:e,"default-data":"__root__"===t.option.key?t.defaultData[e.key]:t.defaultData[t.option.key]?t.defaultData[t.option.key][e.key]:""},on:{inputValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),"radio"===e.type?a("LabelWithRadio",{key:i,attrs:{item:e,index:i,"default-data":t.setDefaultData(t.option,e)},on:{radioValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),"select"===e.type?a("LabelWithSelect",{key:i,attrs:{item:e,index:i,"default-data":t.setDefaultData(t.option,e)},on:{selectValueChange:t.inputGroupValueChange}}):t._e(),t._v(" "),"object-group"===e.type?a("ExtentionObjectGroup",{key:i,attrs:{"show-description":!1,option:e,index:i,"default-data":"__root__"===t.option.key?t.defaultData[e.key]:(t.defaultData[t.option.key]||{})[e.key]},on:{dataChange:t.objectGroupValueChange}}):t._e()]}))],2)],1)};L._withStripped=!0;const T={name:"ExtentionInputGroup",components:{Description:n.Z,LabelWithInput:l.Z,LabelWithRadio:I,LabelWithSelect:v.Z,ExtentionObjectGroup:x},methods:{setDefaultData(t,e){return"queryrule"===t.key&&"required"===e.key?this.defaultData.webconf?this.defaultData.webconf.required:"__empty__":"__root__"===t.key?this.defaultData[e.key]:this.defaultData[t.key]?this.defaultData[t.key][e.key]:"__empty__"},removeOption(t){if(this.$emit("removeOption",t||[]),"queryrule"===this.option.key){const t="webconf",e="required",a=void 0;this.$emit("dataChange",{key:t,value:Object.assign(this.defaultData[t]||{},{[e]:a})})}},objectGroupValueChange({key:t,value:e}){if("__root__"===this.option.key)this.$emit("dataChange",{key:t,value:e});else if("__root__"!==this.option.key)if(""!==e)this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[t]:e})});else{const e=this.defaultData[this.option.key];delete e[t],this.$emit("dataChange",{key:this.option.key,value:"{}"===JSON.stringify(e)?"":e})}},inputGroupValueChange({key:t,value:e}){if("__root__"!==this.option.key)if("queryrule"===this.option.key&&"required"===t){const a="webconf";if(""===e){const e=JSON.parse(JSON.stringify(this.defaultData));delete e[a][t],this.$emit("dataChange",{key:a,value:"{}"===JSON.stringify(e[a])?"":e[a]})}else this.$emit("dataChange",{key:a,value:Object.assign(this.defaultData[a]||{},{[t]:e})})}else if(""===e){const e=JSON.parse(JSON.stringify(this.defaultData));delete e[this.option.key][t],this.$emit("dataChange",{key:this.option.key,value:"{}"===JSON.stringify(e[this.option.key])?"":e[this.option.key]})}else this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{[t]:e})});else this.$emit("dataChange",{key:t,value:e})}},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})}}};a(8166);var N=(0,c.Z)(T,L,[],!1,null,"41c5cbd2",null);N.options.__file="src/components/extension-property/ExtentionInputGroup.vue";const $=N.exports;var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"tw-mt-20 form-group"},t._l(t.option.components,(function(e,i){return a("div",{key:i,staticClass:"row tw-mt-20"},[a("div",{staticClass:"label-column"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v("["+t._s(e.key)+"]：")])]),t._v(" "),a("div",{staticClass:"item-column"},[a("div",{staticClass:"item-row tw-flex-grow tw-flex"},["input"===e.type?a("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:e.inputType}],attrs:{placeholder:e.placeholder},on:{input:function(a){return t.inputChange(a,e.key)}},model:{value:t.formData[e.key],callback:function(a){t.$set(t.formData,e.key,a)},expression:"formData[component.key]"}}):t._e(),t._v(" "),"select"===e.type?a("Select",{attrs:{clearable:""},on:{"on-change":function(a){return t.selectChange(a,e.key)}}},t._l(e.selectOptions,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})),1):t._e(),t._v(" "),"radio"===e.type?a("AKRadio",{attrs:{options:e.options},on:{change:function(a){return t.radioChange(a,e.key)}}}):t._e()],1)])])})),0)],1)};R._withStripped=!0;var P=a(8080),M=a(3986),V=a(4582);a(2995);const B={name:"ObjectValue",directives:{inputNumber:V.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:n.Z,AKRadio:P.Z},data:()=>({formData:null}),methods:{removeOption(t){this.initData(),this.$emit("removeOption",t||[])},initData(t){if("object"==typeof t)this.formData=(0,M.Z)(t),this.option.components.forEach((e=>{if("radio"===e.type){const a=e.options.selectOptions.find((a=>a.value===t[e.key]));e.options.defaultValue=a.label}}));else{const t={};this.option.components.forEach((e=>{t[e.key]=e.defaultValue,"radio"===e.type&&(e.options=(0,M.Z)(e.options))})),this.formData=t}},inputChange(t,e){this.formData[e]=t,this.valueChange()},radioChange(t,e){this.formData[e]=t.value,this.valueChange()},selectChange(t,e){this.formData[e]=t.value,this.valueChange()},valueChange(t){let e=!1;this.option.components.forEach((t=>{t.isClearConfig&&t.canClear(this.formData)?e=!0:t.canClear(this.formData)&&(this.formData[t.key]=void 0)})),0===Object.keys(JSON.parse(JSON.stringify(this.formData))).length||e?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:this.formData})}},created(){this.initData(this.defaultData)}};a(2729);var F=(0,c.Z)(B,R,[],!1,null,"00b13d5f",null);F.options.__file="src/components/extension-property/ExtensionObjectValue.vue";const j=F.exports;var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ExtentionOptions"},[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"content"},[a("LabelWithInput",{attrs:{item:t.clonameOptions,"default-data":t.defaultData.colnames},on:{inputValueChange:t.inputValueChange,inputBlur:t.inputBlur}})],1),t._v(" "),t._l(t.defaultData.rules,(function(e,i){return a("div",{key:i,staticClass:"itme"},t._l(t.defaultData.colnames.split(","),(function(e,i){return a("p",{key:i,staticClass:"colnameItem"},[a("span",[t._v(t._s(e))])])})),0)}))],2)};Z._withStripped=!0;const K={name:"ExtentionOptions",components:{Description:n.Z,LabelWithInput:l.Z},props:{showDescription:{type:Boolean,default:!0},option:{type:Object,default:()=>({})},defaultData:{type:[Object],default:()=>({colnames:"",rules:[]})}},data(){return{clonameOptions:{name:this.$t("extensionProperty.conditionField"),key:"colnames",type:"input",description:this.$t("extensionProperty.controlColumnField")},clonameChange:!1}},watch:{"defaultData.colnames":function(t,e){this.clonameChange=t!==e&&!t}},methods:{removeOption(){this.$emit("removeOption",{})},inputBlur(){if(this.clonameChange&&this.$Modal.warning({title:this.$t("tips.warning"),content:this.$t("extensionProperty.continueChange"),mask:!0,onOk:()=>{this.$emit("dataChange",{key:this.option.key,value:Object.assign(this.defaultData[this.option.key]||{},{rules:[]})})}}),this.defaultData.colnames&&(!this.defaultData.rules||0===this.defaultData.rules.length)){const t={jsonValue:{},buttons:[]};this.defaultData.colnames.split(",").map((e=>(t.jsonValue[e]=null,e))),this.$set(this.defaultData.rules,0,t),this.$emit("dataChange",{key:this.option.key,value:JSON.parse(JSON.stringify(this.defaultData))})}},inputValueChange({key:t,value:e}){if(""===e){const e=JSON.parse(JSON.stringify(this.defaultData));delete e[this.option.key][t],this.$emit("dataChange",{key:this.option.key,value:"{}"===JSON.stringify(e[this.option.key])?"":e[this.option.key]})}else{const a=JSON.parse(JSON.stringify(this.defaultData));a[t]=e,this.$emit("dataChange",{key:this.option.key,value:a})}}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(349);var J=(0,c.Z)(K,Z,[],!1,null,"14c4fd4c",null);J.options.__file="src/components/extension-property/ExtentionOptions.vue";const U=J.exports;var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),t._l(t.option.components,(function(e,i){return[!e.isShow||e.isShow&&e.isShow(t.formData)?a("div",{key:i,staticClass:"tw-mt-20 form-group"},[a("div",{staticClass:"row tw-mt-20"},[a("div",{staticClass:"label-column"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v("["+t._s(e.key)+"]：")])]),t._v(" "),a("div",{staticClass:"item-column"},[a("div",{staticClass:"item-row tw-flex-grow tw-flex"},["input"===e.type?a("Input",{directives:[{name:"input-number",rawName:"v-input-number:[component.inputType]",arg:e.inputType}],attrs:{placeholder:e.placeholder},on:{input:function(e){return t.valueChange(e,i)}},model:{value:t.formData[e.key],callback:function(a){t.$set(t.formData,e.key,a)},expression:"formData[component.key]"}}):t._e(),t._v(" "),"select"===e.type?a("Select",{attrs:{clearable:""},on:{"on-change":function(e){return t.valueChange(e,i)}},model:{value:t.formData[e.key],callback:function(a){t.$set(t.formData,e.key,a)},expression:"formData[component.key]"}},t._l(e.selectOptions,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),1):t._e()],1)])])]):t._e()]}))],2)};Y._withStripped=!0;const q={name:"KeyValueItem",directives:{inputNumber:V.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:[String,Object,Array],default:""},showDescription:{type:Boolean,default:!0}},components:{Description:n.Z},data:()=>({formData:{}}),methods:{removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.option.components.forEach((t=>{this.$emit("dataChange",{key:t.key,value:""})}))},initData(){this.option.components.forEach((t=>{this.formData[t.key]=void 0})),"object"==typeof this.defaultData&&(this.formData=(0,M.Z)(this.defaultData))},clearHiddenComponent(){this.option.components.forEach((t=>{t.isShow&&!t.isShow(this.formData)&&(this.formData[t.key]=void 0,this.$emit("dataChange",{key:t.key,value:""}))}))},valueChange(t,e){this.clearHiddenComponent(),t?this.$emit("dataChange",{key:this.option.components[e].key,value:t}):this.$emit("dataChange",{key:this.option.components[e].key,value:""})}},created(){this.initData()}};a(7208);var G=(0,c.Z)(q,Y,[],!1,null,"96f7090a",null);G.options.__file="src/components/extension-property/key-value-item/KeyValueItem.vue";const z=G.exports;var W=a(9538),H=a(1919),Q=a(6250);function X(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function tt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const et=a(9109),at={};et.keys().forEach((t=>{const e=et(t).default;at[e.name]=e}));const it={name:"ExtentionPropertyWrap",data:()=>({guid:Math.round(1e10*Math.random()),rootData:{},currentIndex:0,formatedRootData:"",configName:"",configList:[],keyForm:{},supportType:""}),components:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?X(Object(a),!0).forEach((function(e){tt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({ExtentionInput:d,ExtentionRadio:_,ExtentionSelect:v.Z,ExtentionObjectGroup:x,ExtensionObjectValue:j,ExtentionInputGroup:$,ExtentionOptions:U,KeyValueItem:z},at),props:{defaultData:{},realData:{type:[String,Object],default:()=>({})},formInfo:{type:Object,default:()=>({})},tableName:{tableName:String},extentionConfig:{type:Array,default:()=>[]},webconf:{type:Object,default:()=>({})}},computed:{options(){const t=this.tableName,e=this.keyForm,a=(0,W.Z)();let i=[];if((0,Q.Q)(e))return i;if("AD_COLUMN"===t){i=a,this.supportType&&"ALL"!==this.supportType&&(i=i.filter((t=>!t.supportType||t.supportType&&-1!==t.supportType.indexOf(this.supportType)))),"byPage"===this.supportType&&"image"!==e.DISPLAYTYPE&&(i=i.filter((t=>"ImageSize"!==t.key))),"byPage"===this.supportType&&"doc"!==e.DISPLAYTYPE&&(i=i.filter((t=>!["filesLength","filesize","UploadAccept"].includes(t.key))));const t=["display","targetField"];if(i=i.filter((e=>!t.includes(e.key))),"扩展属性"===e.DESCRIPTION){const t=a.find((t=>t.name===this.$t("extensionProperty.displayControl")));i.push(t)}if("扩展属性"===e.DESCRIPTION&&"AD_COLUMN"===e.AD_TABLE_ID_LABEL){const t=a.find((t=>"targetField"===t.key));i.push(t)}if("读写规则"===e.DESCRIPTION||"读写打印规则"===e.DESCRIPTION){const t=a.find((t=>t.name===this.$t("extensionProperty.readWriteDisplay")));i.push(t)}const o=(0,M.Z)(a.find((t=>t.name===this.$t("extensionProperty.expansionComponent"))));"byPage"===this.supportType&&e.DISPLAYTYPE&&(e.DISPLAYTYPE.startsWith("textarea")||e.DISPLAYTYPE.startsWith("text"))&&"扩展属性"!==e.DESCRIPTION&&"读写规则"!==e.DESCRIPTION&&o.components[0].selectOptions.push({label:"YearMonth",value:"YearMonth"},{label:"MonthDay",value:"MonthDay"}),i.push(o)}else if("AD_TABLE"===t){const t=["hiddenSubtable"],e=(0,H.Z)().filter((e=>!t.includes(e.key)));if("New"!==this.$route.params.itemId){const t=(0,H.Z)().find((t=>"hiddenSubtable"===t.key));e.push(t)}i=e}else i=this.extentionConfig;return i}},provide(){return{keyForm:this.keyForm}},watch:{defaultData:{handler(t){this.formatedRootData=this.setDisplayValue(t)},immediate:!0},realData:{handler(t){this.rootData=t?(0,M.Z)(t):{}},immediate:!0},options:{handler(t){this.configList=(0,M.Z)(t)}}},methods:{filterConfig(t){const e=t.target.value;""!==e?(this.configList=this.options.filter((t=>t.name.includes(e))),this.configList.length>0&&(this.currentIndex=0)):this.configList=(0,M.Z)(this.options)},scrollIntoView(t,e){this.currentIndex=e},updateRootData(t,e){""===e?(delete this.rootData[t],this.rootData=Object.assign({},this.rootData)):this.rootData=Object.assign({},this.rootData,{[t]:e}),this.$emit("valueChange",this.rootData)},rootDataChange({key:t,value:e}){this.updateRootData(t,e)},removeOption(t){const e={};Object.keys(this.rootData).forEach((a=>{-1===t.indexOf(a)&&(e[a]=this.rootData[a])})),this.rootData=e,this.$emit("valueChange",this.rootData)},setDisplayValue(t){let e="";return e=0===Object.keys(t).length?"":JSON.stringify(t,null,2),e}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)},created(){0===Object.keys(this.formInfo).length?this.$nextTick((async()=>{const t=window.vm.$_live_getChildComponent(window.vm,this.webconf.moduleName),e=window.vm.$_live_getChildComponent(t,"panelForm"),a=await e.getFormData(),i=await e.getFormDataLabel();if(this.keyForm={DESCRIPTION:a.DESCRIPTION,DISPLAYTYPE:a.DISPLAYTYPE,OBTAINMANNER:a.OBTAINMANNER,AD_TABLE_ID:a.AD_TABLE_ID,AD_TABLE_ID_LABEL:i.AD_TABLE_ID&&i.AD_TABLE_ID[0].Label,COLTYPE:a.COLTYPE,NAME:a.NAME},this.webconf.webconf&&this.webconf.webconf.targetField){const t=this.webconf.webconf.targetField.split(","),e=[];t.forEach((t=>{e.push(a[t])})),this.supportType=e.join(",")}})):this.keyForm=this.formInfo}};a(1669);var ot=(0,c.Z)(it,i,[],!1,null,null,null);ot.options.__file="src/components/extension-property/ExtensionPropertyWrap.vue";const st=ot.exports},2483:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"label"},[t._v("\n  "+t._s(t.item.name)+"："),a("br"),t._v("[ "+t._s(t.item.key)+" ]   \n")])};i._withStripped=!0;const o={name:"LabelForInput",props:{item:{type:Object,default:()=>({})}}};var s=(0,a(1900).Z)(o,i,[],!1,null,"a0b1e4ce",null);s.options.__file="src/components/extension-property/LabelForInput.vue";const n=s.exports},9778:(t,e,a)=>{"use strict";a.d(e,{Z:()=>l});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-item"},[a("div",{staticClass:"cell"},[a("LabelForInput",{attrs:{item:t.item}}),t._v(" "),a("input",{ref:"input",staticClass:"input",attrs:{placeholder:t.$t("extensionProperty.pleaseEnter")+"["+t.item.name+"]"+("Array"===t.item.outputValueType?"，"+t.$t("extensionProperty.separatedByCommas"):""),type:"Number"===t.item.inputType?"number":"text"},on:{input:t.inputChange,blur:t.inputBlur}})],1),t._v(" "),""!==t.logInfo?a("div",{staticClass:"logInfo"},[t._v("\n    "+t._s(t.logInfo)+"\n  ")]):t._e()])};i._withStripped=!0;var o=a(2370);const s={name:"LabelWithInput",components:{LabelForInput:a(2483).Z},methods:{inputBlur(t){let e="";if("Array"===this.item.outputValueType&&""!==t.target.value)e=t.target.value.split(",");else if("JSON"===this.item.outputValueType&&""!==t.target.value)try{e=JSON.parse(t.target.value),this.logInfo=""}catch(t){return void(this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}：${t}`)}else e="Number"===this.item.inputType?parseInt(t.target.value,10):t.target.value;this.$emit("inputBlur",{key:this.item.key,value:e})},inputChange(t){let e="";if("Array"===this.item.outputValueType&&""!==t.target.value)e=t.target.value.split(",");else if("JSON"===this.item.outputValueType&&""!==t.target.value)try{e=JSON.parse(t.target.value),this.logInfo=""}catch(t){return void(this.logInfo=`${this.$t("extensionProperty.JSONFormatError")}：${t}`)}else e="Number"===this.item.inputType?parseInt(t.target.value,10)||"":t.target.value;this.$emit("inputValueChange",{key:this.item.key,value:e})}},data:()=>({logInfo:""}),props:{item:{type:Object,default:()=>({})},defaultData:{type:[String,Number,Array,Object],default:""}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)},mounted(){"JSON"===this.item.outputValueType&&""!==this.defaultData?this.$refs.input.value=JSON.stringify(this.defaultData):this.$refs.input.value=this.defaultData}};var n=(0,a(1900).Z)(s,i,[],!1,null,"6bbb503c",null);n.options.__file="src/components/extension-property/LabelWithInput.vue";const l=n.exports},5438:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-item"},[a("div",{staticClass:"cell"},[a("LabelForInput",{attrs:{item:t.item}}),t._v(" "),a("select",{ref:"select",staticClass:"select",on:{change:t.selectValueChange}},t._l(t.item.selectOptions,(function(e,i){return a("option",{key:i,domProps:{value:e.value}},[t._v("\n        "+t._s(e.text)+"\n      ")])})),0)],1)])};i._withStripped=!0;const o={name:"LabelWithSelect",components:{LabelForInput:a(2483).Z},methods:{selectValueChange(t){this.$emit("selectValueChange",{key:this.item.key,value:t.target.value})}},props:{item:{type:Object,default:()=>({})},defaultData:{default:""}},mounted(){this.defaultData&&"__empty__"===this.defaultData?this.$refs.select.value="":this.$refs.select.value=this.defaultData}};var s=(0,a(1900).Z)(o,i,[],!1,null,"58f429fa",null);s.options.__file="src/components/extension-property/LabelWithSelect.vue";const n=s.exports},5724:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bindKey"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),t._l(t.resultList,(function(e,i){return a("div",{key:i,staticClass:"tabContent"},[a("div",{staticClass:"label-input"},[a("div",{staticClass:"required-item ml-5"},[t._v("\n        "+t._s(t.$t("extensionProperty.displayAreaField"))+"：\n      ")])]),t._v(" "),a("div",{staticClass:"target-key mb-10 ml-10"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"default-selected":t.defaultSelected[i].target,placeholder:t.$t("extensionProperty.enterNameInTable"),"columns-key":t.targetColumnsKey},on:{"on-popper-show":function(e){return t.getKeys(e,"target",{tableName:"AD_COLUMN"})},"on-page-change":function(e){return t.getKeys(e,"target",{tableName:"AD_COLUMN"})},"on-input-value-change":function(e){return t.getSearchKeys(e,"target",{tableName:"AD_COLUMN",groupIndex:i})},"on-fkrp-selected":function(e){return t.handlerSelected(i,"target","",e)},"on-clear":function(e){return t.handleClear(i,"target","",e)}}})],1),t._v(" "),a("p",{staticClass:"blank"}),t._v(" "),a("SlickList",{attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:e.source,callback:function(a){t.$set(e,"source",a)},expression:"item.source"}},t._l(e.source,(function(o,s){return a("SlickItem",{key:s,attrs:{index:s}},[a("div",{staticClass:"colnameContent",on:{mouseenter:t.handleEnter,mouseleave:t.handleLeave}},[a("div",{staticClass:"colname"},[a("p",{staticClass:"required-item ml-5"},[t._v("\n              "+t._s(t.$t("extensionProperty.sourceField"))+":\n            ")]),t._v(" "),a("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"default-selected":t.defaultSelected[i].source[s][0],"columns-key":t.targetColumnsKey,placeholder:t.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(e){return t.getKeys(e,"source",{tableName:"AD_COLUMN"})},"on-page-change":function(e){return t.getKeys(e,"source",{tableName:"AD_COLUMN"})},"on-input-value-change":function(e){return t.getSearchKeys(e,"source",{tableName:"AD_COLUMN",groupIndex:i,rowIndex:s})},"on-fkrp-selected":function(e){return t.handlerSelected(i,"source",s,e,0)},"on-clear":function(e){return t.handleClear(i,"source",s,0)}}})],1),t._v(" "),a("div",{staticClass:"colname"},[a("p",{staticClass:"required-item ml-5"},[t._v("\n              "+t._s(t.$t("extensionProperty.sourceFieldOptionGroup"))+":\n            ")]),t._v(" "),a("DropDownSelectFilter",{attrs:{single:"",isBackRowItem:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"default-selected":t.defaultSelected[i].source[s][1],"columns-key":t.sourceColumnsKey,placeholder:t.$t("extensionProperty.enterName")},on:{"on-popper-show":function(e){return t.getKeys(e,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-page-change":function(e){return t.getKeys(e,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0})},"on-input-value-change":function(e){return t.getSearchKeys(e,"source",{tableName:"AD_LIMITVALUE_GROUP",deleteTableId:!0,groupIndex:i,rowIndex:s})},"on-fkrp-selected":function(e){return t.handlerSelected(i,"source",s,e,1)},"on-clear":function(e){return t.handleClear(i,"source",s,1)}}})],1),t._v(" "),a("div",{staticClass:"oprate"},[a("p"),t._v(" "),e.source.length-1===Number(s)?a("button",{staticClass:"operate-button",on:{click:function(a){return t.addColname(e.source,i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),e.source.length>1?a("button",{staticClass:"operate-button",on:{click:function(a){return t.deleteColname(e.source,i,s)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])])])})),1),t._v(" "),t.resultList.length-1===i?a("button",{staticClass:"operate-button ml-10 mb-10",on:{click:t.addButtonClick}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.resultList.length>1?a("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(e){return t.removeButtonClick(i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)}))],2)};i._withStripped=!0;var o=a(2370),s=a(6247),n=a(3237),l=a(6015);const r={target:{col_id:""},source:[{col_id:"",label:""}]},c={name:"BindKey",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},components:{Description:n.Z,SlickList:s.SlickList,SlickItem:s.SlickItem},data:()=>({resultList:[JSON.parse(JSON.stringify(r))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,targetColumnsKey:["DBNAME"],sourceColumnsKey:["NAME"],defaultSelected:[{target:[],source:[[[],[]]]}]}),watch:{resultList:{handler(){this.syncData()},deep:!0}},async created(){this.init(),this.setHover()},methods:{async init(){const t=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const e=[],a=[];this.defaultData.forEach((t=>{e.push(`=${t.target.col_id}`),t.source.forEach((t=>{e.push(`=${t.col_id}`),a.push(`=${t.label}`)}))}));let i={table:"AD_COLUMN",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],ID:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete i.fixedcolumns.AD_TABLE_ID;const o=(await this.requestKeysData(i)).row||[];i={table:"AD_LIMITVALUE_GROUP",startindex:0,range:a.length,fixedcolumns:{ISACTIVE:["=Y"],ID:a},column_include_uicontroller:!0,isolr:!1};const s=(await this.requestKeysData(i)).row||[],n=[];this.defaultData.forEach(((t,e)=>{n.push({target:[],source:[[[],[]]]});const a=o.find((e=>e.ID.val===t.target.col_id));n[e].target=[{ID:t.target.col_id,Label:a.DBNAME.val}],t.source.forEach(((t,a)=>{n[e].source[a]=[[],[]];const i=o.find((e=>e.ID.val===t.col_id)),l=s.find((e=>e.ID.val===t.label));n[e].source[a][0]=[{ID:t.col_id,Label:i.DBNAME.val}],n[e].source[a][1]=[{ID:t.label,Label:l.NAME.val}]}))})),this.defaultSelected=n,this.resultList=JSON.parse(JSON.stringify(t))}else this.resultList=[JSON.parse(JSON.stringify(r))]},setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",(()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)}))},setPos(t){this.tipStyle=`left: ${t.clientX+20}px;top:${t.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addButtonClick(){const t=JSON.parse(JSON.stringify(r));this.resultList.push(t),this.defaultSelected.push({target:[],source:[[[],[]]]})},removeButtonClick(t){this.resultList.splice(t,1),this.defaultSelected.splice(t,1)},addColname(t,e){t.push({col_id:"",label:""}),this.defaultSelected[e].source.push([[],[]])},deleteColname(t,e,a){t.splice(a,1),this.defaultSelected[e].source.splice(a,1)},async getKeys(t,e,a){const{tableName:i,deleteTableId:o}=a;let s=0;"number"==typeof t&&(s=(t-1)*this.pageSize);const{itemId:n}=this.$route.params,l={table:i,startindex:s,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[n]},column_include_uicontroller:!0,isolr:!1};("New"===n||o)&&delete l.fixedcolumns.AD_TABLE_ID,this.keyList=await this.requestKeysData(l),this.totalCount=this.keyList.totalRowCount},async getSearchKeys(t,e,a){const{tableName:i,deleteTableId:o}=a;if(""===t)return void(this.searchKeyList=[]);const{itemId:s}=this.$route.params,n={table:i,startindex:0,fixedcolumns:{AD_TABLE_ID:[s],ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};"AD_COLUMN"===i?n.fixedcolumns.DBNAME=t:n.fixedcolumns.NAME=t,("New"===s||o)&&delete n.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout((async()=>{const t=(await this.requestKeysData(n)).row||[];this.searchKeyList=t.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t)))}),200)):this.timer=setTimeout((async()=>{const t=(await this.requestKeysData(n)).row||[];this.searchKeyList=t.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t)))}),200)},async requestKeysData(t){return new Promise((e=>{this.network.post("/p/cs/QueryList",(0,l.d)({searchdata:t})).then((t=>{if(0===t.data.code){const a=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],i=t.data.data.tabth,o=t.data.data.row;for(let t=Math.max(i.length-1,0);t>=0;t--){const e=i[t];"DBNAME"===e.colname?e.isak=!0:e.isak=!1,a.includes(e.colname)&&i.splice(t,1)}o.forEach((t=>{for(const e in t)a.includes(e)&&delete t[e]})),e(t.data.data)}else e({})})).catch((()=>{e({})}))}))},handlerSelected(t,e,a,i,o){if("target"===e){const a={col_id:i[0].ID,label:i[0].Label};this.resultList[t][e]=a,this.defaultSelected[t][e]=i}if("source"===e)if(i[0].Label=i[0].Label?i[0].Label:i[0].rowItem.NAME.val,0===o){const o={col_id:i[0].ID},s=this.resultList[t][e][a]||r.source;this.defaultSelected[t][e][a][0]=i,this.$set(this.resultList[t][e],a,Object.assign(s,o))}else{const o={label:i[0].ID},s=this.resultList[t][e][a]||r.source;this.defaultSelected[t][e][a][1]=i,this.$set(this.resultList[t][e],a,Object.assign(s,o))}},setDisplayData(t){const e=JSON.parse(JSON.stringify(t));for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];delete a.target.defaultselected,delete a.target.label;for(let t=Math.max(a.source.length-1,0);t>=0;t--){const e=a.source[t];delete e.defaultselected,e.col_id&&e.label||a.source.splice(t,1)}a.target.col_id&&0!==a.source.length||e.splice(t,1)}return e},syncData(){const t=JSON.parse(JSON.stringify(this.resultList)),e=this.setDisplayData(t);0===e.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},handleClear(t,e,a,i){"target"===e?this.resultList[t][e]={}:0===i?this.resultList[t][e][a].col_id="":this.resultList[t][e][a].label=""}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(8125),a(1403);var u=(0,a(1900).Z)(c,i,[],!1,null,"f4a6dfa0",null);u.options.__file="src/components/extension-property/custom/BindKey.vue";const d=u.exports},8661:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ak-date-shortcut"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"form-group"},t._l(t.formData,(function(e,i){return a("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":t.formData.length,"show-operation-button":""},on:{addRow:function(e){return t.addRow(t.formData,{key:"",value:""})},removeRow:function(e){return t.removeRow(t.formData,i)}}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterDateDesc")},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"rowObj.key"}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterValue")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"rowObj.value"}})],1)])})),1)],1)};i._withStripped=!0;var o=a(1238),s=a(6623),n=a(3986);const l={key:"",value:""},r={name:"DateShortcut",mixins:[o.Z],components:{ExtentionRowItem:s.Z},data:()=>({formData:[(0,n.Z)(l)]}),watch:{formData:{handler(t){const e=this.filterForm(t);0===e.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(t){const e=(0,n.Z)(t);for(let t=e.length-1;t>=0;t--){const a=e[t];a.key&&a.value||e.splice(t,1)}return e},init(){this.defaultData&&(this.formData=(0,n.Z)(this.defaultData))}},created(){this.init()}};a(8846);var c=(0,a(1900).Z)(r,i,[],!1,null,"661a2a94",null);c.options.__file="src/components/extension-property/custom/DateShortcut.vue";const u=c.exports},1588:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"R3ButtonConfig"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),t._l(t.dataList,(function(e,i){return a("div",{key:i,staticClass:"group"},[a("div",{staticClass:"row border-b pt-10"},[a("div",{staticClass:"name required-item"},[t._v("\n        "+t._s(t.$t("extensionProperty.buttonName"))+"：\n      ")]),t._v(" "),a("div",{staticClass:"item",staticStyle:{flex:"50% 0 0"}},[a("DropDownSelectFilter",{attrs:{single:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"is-back-row-item":"","columns-key":t.actionColumnsKey,"default-selected":t.defaultSelected[i].action_id,placeholder:t.$t("extensionProperty.enterButtonName")},on:{"on-popper-show":function(e){return t.getKeys(e,{key:"action_id"})},"on-page-change":function(e){return t.getKeys(e,{key:"action_id"})},"on-input-value-change":function(e){return t.getSearchKeys(e,{key:"action_id"})},"on-fkrp-selected":function(e){return t.handlerSelected(e,{groupIndex:i,key:"action_id"})},"on-clear":function(e){return t.handleClear("action_id",i)}}})],1)]),t._v(" "),a("div",{staticClass:"header"},[a("p",{staticClass:"title"},[a("span",[t._v(t._s(t.$t("extensionProperty.field")))])]),t._v(" "),a("p",{staticClass:"title"},[a("span",[t._v(t._s(t.$t("extensionProperty.value")))])])]),t._v(" "),t._l(e.filter,(function(o,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"name"},[t._v("\n        "+t._s(t.$t("extensionProperty.condition"))+t._s(s+1)+"：\n      ")]),t._v(" "),a("div",{staticClass:"item"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"is-back-row-item":"","columns-key":t.columnsKey,"default-selected":t.defaultSelected[i].filter[s],placeholder:t.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":function(e){return t.getKeys(e,{key:"filter"})},"on-page-change":function(e){return t.getKeys(e,{key:"filter"})},"on-input-value-change":function(e){return t.getSearchKeys(e,{key:"filter"})},"on-fkrp-selected":function(e){return t.handlerSelected(e,{groupIndex:i,rowIndex:s,key:"filter"})},"on-clear":function(e){return t.handleClear("filter",i,s)}}})],1),t._v(" "),a("div",{staticClass:"item"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterValueWithComma")},model:{value:o.match_value,callback:function(e){t.$set(o,"match_value",e)},expression:"row.match_value"}})],1),t._v(" "),a("div",{staticClass:"btn-wrap"},[e.filter.length-1===s?a("button",{staticClass:"operate-button",on:{click:function(a){return t.addRow(e.filter,i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),e.filter.length>1?a("button",{staticClass:"operate-button",on:{click:function(a){return t.delRow(e.filter,i,s)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])])})),t._v(" "),a("div",{staticClass:"group-btn"},[t.dataList.length-1===i?a("button",{staticClass:"operate-button",on:{click:t.addGroup}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.dataList.length>1?a("button",{staticClass:"operate-button",on:{click:function(e){return t.delGroup(i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])],2)}))],2)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(6015);const l={action_id:"",filter:[{col_id:"",match_value:""}]},r={name:"DisableButton",inject:["network"],components:{Description:s.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]}},data:()=>({keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],dataList:[JSON.parse(JSON.stringify(l))],currentGroupIndex:0,currentRowIndex:0,actionColumnsKey:["DESCRIPTION"],defaultSelected:[{action_id:[],filter:[[]]}]}),watch:{dataList:{handler(){this.syncData()},deep:!0}},async created(){const{itemId:t}=this.$route.params;this._table_id_=t,this.init()},methods:{async init(){const t=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const e=[],a=[];t.forEach((t=>{e.push(`=${t.action_id}`),t.filter.forEach((t=>{a.push(`=${t.col_id}`)}))}));let i={table:"AD_ACTION",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],ID:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete i.fixedcolumns.AD_TABLE_ID;const o=(await this.requestKeysData(i)).row||[];i={table:"AD_COLUMN",startindex:0,range:a.length,fixedcolumns:{ISACTIVE:["=Y"],ID:a,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1},this._table_id_||delete i.fixedcolumns.AD_TABLE_ID;const s=(await this.requestKeysData(i)).row||[],n=[];t.forEach(((t,e)=>{const a=o.find((e=>e.ID.val===t.action_id));n.push({action_id:[{ID:a.ID.val,Label:a.DESCRIPTION.val}],filter:[]}),t.filter.forEach((t=>{const a=s.find((e=>e.ID.val===t.col_id));n[e].filter.push([{ID:a.ID.val,Label:a.DBNAME.val}])}))})),this.defaultSelected=n,this.dataList=t}else this.dataList=[JSON.parse(JSON.stringify(l))]},addRow(t,e){const a=JSON.parse(JSON.stringify(l.filter[0]));t.push(a),this.defaultSelected[e].filter.push([])},delRow(t,e,a){t.splice(a,1),this.defaultSelected[e].filter.splice(e,1)},addGroup(){const t=JSON.parse(JSON.stringify(l));this.dataList.push(t),this.defaultSelected.push({action_id:[],filter:[[]]})},delGroup(t){this.dataList.splice(t,1),this.defaultSelected.splice(t,1)},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},async getKeys(t,e){const{key:a}=e,{itemId:i}=this.$route.params;let o=0,s=null;"number"==typeof t&&(o=(t-1)*this.pageSize),"action_id"===a&&(s={table:"AD_ACTION",startindex:o,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[i]},column_include_uicontroller:!0,isolr:!1}),"filter"===a&&(s={table:"AD_COLUMN",startindex:o,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[i]},column_include_uicontroller:!0,isolr:!1}),"New"===i&&delete s.fixedcolumns.AD_TABLE_ID,this.keyList=await this.requestKeysData(s,a),this.totalCount=this.keyList.totalRowCount},async getSearchKeys(t,e){const{key:a}=e,{itemId:i}=this.$route.params;let o=null;if(""===t)return void(this.searchKeyList=[]);"action_id"===a&&(o={table:"AD_ACTION",startindex:0,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[i],DESCRIPTION:t},column_include_uicontroller:!0,isolr:!1}),"filter"===a&&(o={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[i],DBNAME:t},column_include_uicontroller:!0,isolr:!1},"New"===i&&delete o.fixedcolumns.AD_TABLE_ID);const s=async()=>{const t=(await this.requestKeysData(o,a)).row||[];this.searchKeyList=t.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t)))};this.timer?(clearTimeout(this.timer),this.timer=setTimeout(s,200)):this.timer=setTimeout(s,200)},async requestKeysData(t,e){return new Promise((a=>{this.network.post("/p/cs/QueryList",(0,n.d)({searchdata:t})).then((t=>{if(0===t.data.code){const i=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],o=["NAME","PRIORITY","AD_VERSION_ID","CUSTOMIZENO","ISACTIVE","ISHIDE","ISREFRSH","AD_SUBSYSTEM_ID","AD_TABLECATEGORY_ID","FILTER","CUSCOMPONENT","PROPS","MODIFIERNAME","MODIFIEDDATE","AD_ACTION_ID"],s="action_id"===e?o:i,n=t.data.data.tabth,l=t.data.data.row;for(let t=Math.max(n.length-1,0);t>=0;t--){const a=n[t],i="action_id"===e?"DESCRIPTION":"DBNAME";a.colname===i?a.isak=!0:a.isak=!1,s.includes(a.colname)&&n.splice(t,1)}l.forEach((t=>{for(const e in t)s.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},handlerSelected(t,e){const{groupIndex:a,rowIndex:i,key:o}=e;"action_id"===o&&(this.dataList[a].action_id=t[0].ID,this.defaultSelected[a].action_id=t),"filter"===o&&(this.dataList[a].filter[i].col_id=t[0].ID,this.defaultSelected[a].filter[i]=t)},handleClear(t,e,a){"action_id"===t&&(this.dataList[e].action_id=""),"filter"===t&&(this.dataList[e].filter[a].col_id="")},setDisplayData(t){const e=JSON.parse(JSON.stringify(t));for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];delete a.defaultselected;for(let t=Math.max(a.filter.length-1,0);t>=0;t--){const e=a.filter[t];delete e.defaultselected,e.col_id&&e.match_value||a.filter.splice(t,1)}a.action_id&&0!==a.filter.length||e.splice(t,1)}return e},syncData(){const t=JSON.parse(JSON.stringify(this.dataList)),e=this.setDisplayData(t);0===e.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})}},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(8842);var c=(0,a(1900).Z)(r,i,[],!1,null,"92d4a1f0",null);c.options.__file="src/components/extension-property/custom/DisableButton.vue";const u=c.exports},8201:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>f});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"row-label":t.$t("extensionProperty.sourceField"),"is-required":"","row-label-class":"rowLabel","error-tip":t.fieldValidateTips}},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("DropDownSelectFilter",{staticStyle:{width:"100%"},attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,placeholder:t.$t("extensionProperty.selectSourceField"),"default-selected":t.defaultFields},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectValue(e)},"on-clear":t.clearTableName}})],1)])]),t._v(" "),a("ExtentionRowItem",{attrs:{"row-label":t.$t("extensionProperty.correspondence"),"is-required":"","row-label-class":"rowLabel"}},[a("div",{staticClass:"col"},[t._l(t.formData.list,(function(e,i){return a("div",{key:i,staticClass:"row"},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterOptionKey")},on:{"on-blur":t.validCondition},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"row.key"}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterOptionValue")},on:{"on-blur":t.validCondition},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"row.value"}})],1),t._v(" "),a("div",{staticClass:"col btn-group"},[t.formData.list.length-1===i?a("button",{staticClass:"operate-button",on:{click:t.addRow}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.formData.list.length>1?a("button",{staticClass:"operate-button",on:{click:function(e){return t.removeRow(i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])])})),t._v(" "),t.conditionValidateTips?a("div",{staticClass:"tip"},[t._v("\n          "+t._s(t.conditionValidateTips)+"\n        ")]):t._e()],2)])],1)],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(6623),l=a(3986),r=a(6250),c=a(2667),u=a(6015);const d={key:"",value:""},p={col:"",map:{},list:[d]},h={name:"FilterColVal",inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:s.Z,ExtentionRowItem:n.Z},watch:{formData:{handler(t){const e=this.filterForm(t);(0,r.Q)(e)?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},data:()=>({formData:(0,l.Z)(p),fieldValidateTips:"",conditionValidateTips:"",defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}),methods:{filterForm(t){const e=(0,l.Z)(t),a={};return e.list.forEach((t=>{t.key&&t.value&&(a[t.key]=t.value.split(","))})),!e.col||(0,r.Q)(a)?{}:(e.map=a,delete e.list,e)},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addRow(){this.formData.list.push((0,l.Z)(d))},removeRow(t){this.formData.list.splice(t,1)},validField(){this.formData.col?this.fieldValidateTips="":this.fieldValidateTips=this.$t("extensionProperty.enterSourceField")},validCondition(){const t=this.formData.list.some((t=>t.key&&t.value));this.conditionValidateTips=t?"":this.$t("extensionProperty.correspondenceIsRequired")},commonApi(t,e,a){const{hideColumns:i,displayKeys:o,bindId:s}=a;return new Promise((a=>{this.network.post(t,(0,u.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,s=t.data.data.row;for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.colname)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&s.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},async getKeyList(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",{searchdata:t},{hideColumns:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],displayKeys:["DBNAME"]}))}))},async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID,this.dropList=await this.getKeyList(a),this.totalCount=this.dropList.totalRowCount},selectValue(t){this.formData.col=t.map((t=>t.Label)).join(","),this.validField()},clearTableName(){this.formData.col="",this.validField()},inputSearchData:(0,c.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then((t=>{const e=t.row||[];this.searchList=e.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))),this.totalCount=this.dropList.totalRowCount}))})),async getFieldDefaultValue(){const t={table:"AD_COLUMN",startindex:0,range:1,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:this.defaultData.col,AD_TABLE_ID:[this._table_id_],OBTAINMANNER:["select"]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete t.fixedcolumns.AD_TABLE_ID;const e=(await this.getKeyList(t)).row||[];this.defaultFields=[{ID:e[0].ID.val,Label:e[0].DBNAME.val}]},init(){const t=(0,l.Z)(this.defaultData);if((0,r.Q)(t))return;const e=[];Object.keys(t.map).forEach((a=>{e.push({key:a,value:t.map[a].join(",")})})),t.list=e,this.formData=t,this.getFieldDefaultValue()}},created(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(4954),a(4158);var m=(0,a(1900).Z)(h,i,[],!1,null,"4b364d8a",null);m.options.__file="src/components/extension-property/custom/FilterColVal.vue";const f=m.exports},6653:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"is-required":"","row-label":t.$t("extensionProperty.assignValues"),"error-tip":t.fieldValidateTip}},[a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:!1,data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,placeholder:t.$t("extensionProperty.selectKnownField"),"default-selected":t.defaultFields},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectTable(e)},"on-clear":t.clearTableName}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterApi")},on:{"on-blur":t.validateField},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1)])],1)],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(6623),l=a(3986),r=a(2667),c=a(6015);const u={name:"FormRequest",components:{Description:s.Z,ExtentionRowItem:n.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},data:()=>({formData:{refcolumn:"",url:""},defaultFields:[],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],fieldValidateTip:""}),inject:["network"],watch:{formData:{handler(t){const e=this.filterForm(t);0===Object.keys(e).length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(t){let e=(0,l.Z)(t);return""!==e.refcolumn&&""!==e.url||(e={}),e},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},selectTable(t){this.formData.refcolumn=t.map((t=>t.Label)).join(","),this.validateField()},clearTableName(){this.formData.refcolumn="",this.validateField()},validateField(){const t=(0,l.Z)(this.formData);""===t.refcolumn||""===t.url?this.fieldValidateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.fieldValidateTip=""},async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID,this.dropList=await this.getKeyList(a),this.totalCount=this.dropList.totalRowCount},inputSearchData:(0,r.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then((t=>{const e=t.row||[];this.searchList=e.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))),this.totalCount=this.dropList.totalRowCount}))})),commonApi(t,e,a){const{hideColumns:i,displayKeys:o,bindId:s}=a;return new Promise((a=>{this.network.post(t,(0,c.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,s=t.data.data.row;for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.colname)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&s.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},async getKeyList(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",{searchdata:t},{hideColumns:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],displayKeys:["DBNAME"]}))}))},async getFieldDefaultValue(){if(0===Object.keys(this.defaultData).length)return;const t=this.defaultData.refcolumn.split(","),e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t.join(","),AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID;const a=(await this.getKeyList(e)).row||[],i=[];t.forEach((t=>{const e=a.find((e=>e.DBNAME.val===t));i.push({ID:e.ID.val,Label:t})})),this.defaultFields=i},init(){const t=(0,l.Z)(this.defaultData);Object.keys(t).length>0&&(this.formData=t)}},async created(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(9827);var d=(0,a(1900).Z)(u,i,[],!1,null,"2b3b94f9",null);d.options.__file="src/components/extension-property/custom/FormRequest.vue";const p=d.exports},4827:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ak-hidden-subtable"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),Object.keys(t.formData).length>0?t._l(t.formData,(function(e,i){return a("div",{key:e.tableId,staticClass:"form-group"},[a("h4",[t._v(t._s(t.$t("extensionProperty.subtable"))+"-"+t._s(i))]),t._v(" "),t._l(e,(function(o,s){return a("ExtentionRowItem",{key:s,attrs:{"row-index":s,"row-count":e.length,"row-label":""+t.$t("extensionProperty.condition")+s,"show-operation-button":""},on:{addRow:function(a){return t.addRow(e,t.ROW_ITEM)},removeRow:function(a){return t.removeRow(e,s)}}},[a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,"default-selected":t.defaultFields[i]?t.defaultFields[i][s]:void 0,placeholder:t.$t("extensionProperty.selectField")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectValue(e,o,"colName","Label")},"on-clear":function(e){return t.clearValue(o,"colName")}}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterValue")},model:{value:o.value,callback:function(e){t.$set(o,"value",e)},expression:"condition.value"}})],1)])}))],2)})):[a("h2",{staticClass:"text-center"},[t._v(t._s(t.$t("extensionProperty.associateSubtable")))])]],2)};i._withStripped=!0;var o=a(2370),s=a(6015),n=a(1238),l=a(3986),r=a(2667);const c={colName:"",value:""},u={name:"HiddenSubtable",mixins:[n.Z],data:()=>({formData:[],ROW_ITEM:c,defaultFields:{}}),watch:{formData:{handler(t){const e=this.filterForm(t);""===e?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{async init(){const t=await this.getSubTables();if(!this.defaultData)return void(this.formData=t);const e=[];for(let t in this.defaultData){this.defaultData[t].forEach((t=>{t.colName&&e.push(`=${t.colName}`)}))}const a={table:"AD_COLUMN",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID;const i=(await this.getKeyList(a)).row||[],o={};for(let e in t)if(this.defaultData[e]){t[e]=(0,l.Z)(this.defaultData[e]);const a=this.defaultData[e];o[e]={},a.forEach(((t,a)=>{if(t.colName){const s=i.find((e=>e.DBNAME.val===t.colName));o[e][a]=[{Label:t.colName,ID:s.ID.val}]}}))}this.formData=(0,l.Z)(t),this.defaultFields=o},async removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[]),this.formData=await this.getSubTables()},filterForm(t){const e=(0,l.Z)(t);if(0===Object.keys(e).length)return"";for(let t in e){const a=e[t];for(let t=a.length-1;t>=0;t--){const e=a[t];e.colName&&e.value||a.splice(t,1)}0===a.length&&delete e[t]}return 0===Object.keys(e).length?"":e},async getSubTables(){const t={table:"AD_REFBYTABLE",objid:this.$route.params.itemId,mainTableName:"AD_TABLE",refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,fixedcolumns:{}}};return await this.network.post("/p/cs/objectTableItem",(0,s.d)(t)).then((t=>{const e={};return t.data.data.row.filter((t=>"是"===t.ISACTIVE.val)).forEach((t=>{e[t.AD_REFBY_TABLE_ID.val]=[(0,l.Z)(c)]})),e}))},async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID,this.dropList=await this.getKeyList(a),this.totalCount=this.dropList.totalRowCount},inputSearchData:(0,r.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then((t=>{const e=t.row||[];this.searchList=e.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))),this.totalCount=this.dropList.totalRowCount}))})),async getKeyList(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",{searchdata:t},{hideColumns:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],displayKeys:["表内名称"]}))}))}},created(){this._table_name_=this.keyForm.NAME,this._table_id_="New"===this.$route.params.itemId?null:this.$route.params.itemId,this._table_name_&&this.init()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(7834),a(2107);var d=(0,a(1900).Z)(u,i,[],!1,null,"1ec1497a",null);d.options.__file="src/components/extension-property/custom/HiddenSubtable.vue";const p=d.exports},9438:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MultiTab"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("SlickList",{staticClass:"drag-scroll",attrs:{axis:"y","lock-to-container-edges":!0,"press-delay":600,"helper-class":"r3-slick"},model:{value:t.sumTabs,callback:function(e){t.sumTabs=e},expression:"sumTabs"}},t._l(t.sumTabs,(function(e,i){return a("SlickItem",{key:i,attrs:{index:i}},[a("div",{staticClass:"tabContent",on:{mouseenter:t.handleEnter,mouseleave:t.handleLeave}},[a("p",{staticClass:"label-input"},[a("validate",{attrs:{data:e.tab_name}},[a("span",{staticClass:"required-item ml-5"},[t._v(t._s(t.$t("tips.label"))+"：")]),t._v(" "),a("Input",{staticClass:"tab-label-name",on:{input:function(e){return t.handlerInput(i)}},model:{value:e.tab_name,callback:function(a){t.$set(e,"tab_name",a)},expression:"item.tab_name"}})],1)],1),t._v(" "),a("p",{staticClass:"blank"}),t._v(" "),t._l(e.tab_value,(function(o,s){return a("div",{key:s,staticClass:"colnameContent",attrs:{index:s}},[a("div",{staticClass:"colname"},[a("p",{staticClass:"required-item ml-5"},[t._v("\n              "+t._s(t.$t("extensionProperty.associateField"))+":\n            ")]),t._v(" "),a("validate",{attrs:{data:o.col_name,"validate-function":t.validateKey,index:i+"-"+s}},[a("DropDownSelectFilter",{attrs:{single:"",data:t.keyList,"auto-data":t.searchKeyList,"page-size":t.pageSize,"total-row-count":t.totalCount,"default-selected":t.defaultSelected[i][s],"is-back-row-item":"","columns-key":t.columnsKey,placeholder:t.$t("extensionProperty.enterNameInTable")},on:{"on-popper-show":t.getKeys,"on-page-change":t.getKeys,"on-input-value-change":function(e){return t.getSearchKeys(i,s,e)},"on-fkrp-selected":function(e){return t.handlerSelected(i,s,e)},"on-clear":function(e){return t.handleClear(i,s,e)}}})],1)],1),t._v(" "),a("div",{staticClass:"operator"},[a("p",{staticClass:"required-item ml-5"},[t._v("\n              "+t._s(t.$t("tips.operator"))+":\n            ")]),t._v(" "),a("validate",{attrs:{data:o.operator}},[a("Select",{attrs:{clearable:""},on:{"on-open-change":function(e){return t.handleSelectExpand(i,s,e)}},model:{value:o.operator,callback:function(e){t.$set(o,"operator",e)},expression:"temp.operator"}},t._l(o.selectOptions,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                  "+t._s(e.label)+"\n                ")])})),1)],1)],1),t._v(" "),a("div",{staticClass:"contrastValue"},[a("p",{staticClass:"required-item ml-5"},[t._v("\n              "+t._s(t.$t("extensionProperty.contrastValue"))+":\n            ")]),t._v(" "),a("validate",{attrs:{data:o.contrast_value}},[o.type&&o.type.toUpperCase().startsWith("DATE")?t._e():a("Input",{directives:[{name:"input-number",rawName:"v-input-number:[temp.type]",arg:o.type}],model:{value:o.contrast_value,callback:function(e){t.$set(o,"contrast_value",e)},expression:"temp.contrast_value"}}),t._v(" "),o.type&&o.type.toUpperCase().startsWith("DATE")?a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:o.contrast_value,type:o.type&&"DATETIME"===o.type.toUpperCase()?"datetimerange":"daterange",placeholder:t.$t("tips.pleaseSelect"),editable:!1,transfer:"",format:o.type&&"DATETIME"===o.type.toUpperCase()?"yyyy/MM/dd HH:mm:ss":"yyyy/MM/dd"},on:{"on-change":function(e){return t.handleChangeDate(i,s,e)}}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"oprate"},[a("p"),t._v(" "),e.tab_value.length-1===Number(s)?a("button",{staticClass:"operate-button",on:{click:function(a){return t.addColname(e.tab_value,i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),e.tab_value.length>1?a("button",{staticClass:"operate-button",on:{click:function(a){return t.deleteColname(e.tab_value,i,s)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])])})),t._v(" "),t.sumTabs.length-1===i?a("button",{staticClass:"operate-button ml-10 mb-10",on:{click:t.addButtonClick}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.sumTabs.length>1?a("button",{staticClass:"operate-button ml-10 mb-10",on:{click:function(e){return t.removeButtonClick(i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],2)])})),1)],1)};i._withStripped=!0;var o=a(2370),s=a(6247),n=a(3237),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),t._v(" "),t.result.msg?a("div",{staticClass:"validate-msg"},[t._v("\n    "+t._s(t.result.msg)+"\n  ")]):t._e()],2)};l._withStripped=!0;const r={props:{validateFunction:{type:Function},data:{},index:{type:String}},name:"",watch:{data:{handler(){this.validateValue()},immediate:!0}},data:()=>({ruleList:[],result:{isPass:!0,msg:""}}),methods:{validateValue(){this.ruleList=[],this.validateFunction&&"function"==typeof this.validateFunction&&this.ruleList.push(this.validateFunction),this.ruleList.every((t=>(this.result=t(this.index),this.result.isPass)))}}};var c=a(1900),u=(0,c.Z)(r,l,[],!1,null,null,null);u.options.__file="src/components/extension-property/validate/Validate.vue";const d=u.exports;var p=a(4582),h=a(6015);const m={tab_name:"",tab_value:[{col_name:"",operator:"",contrast_value:"",selectOptions:[]}]},f={components:{Description:n.Z,Validate:d,SlickList:s.SlickList,SlickItem:s.SlickItem},name:"MultiTab",directives:{inputNumber:p.Z},inject:["network"],props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]}},data:()=>({currentTabIndex:0,currentKeyIndex:0,sumTabs:[JSON.parse(JSON.stringify(m))],keyList:{},searchKeyList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],tipStyle:"",defaultSelected:[[]]}),watch:{sumTabs:{handler(){this.syncData()},deep:!0}},computed:{currentData(){return this.sumTabs[this.currentTabIndex]}},async created(){const{itemId:t}=this.$route.params;this._table_id_=t,this.initData(),this.setHover()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)},methods:{setHover(){this.dom=document.createElement("div"),this.dom.setAttribute("id","drag-tip"),this.dom.innerText=this.$t("extensionProperty.dragSort"),document.body.appendChild(this.dom),window.addEventListener("mousemove",this.setPos),this.$once("hook:beforeDestroy",(()=>{window.removeEventListener("mousemove",this.setPos),this.dom&&document.body.removeChild(this.dom)}))},setPos(t){this.tipStyle=`left: ${t.clientX+20}px;top:${t.clientY+20}px;`,this.dom.style=this.tipStyle},handleEnter(){this.dom.classList.add("showTip")},handleLeave(){this.dom.classList.remove("showTip")},async initData(){const t=JSON.parse(JSON.stringify(this.defaultData));if(this.defaultData&&this.defaultData.length>0){const e=[];t.forEach((t=>{t.tab_value.forEach((t=>{const a=`=${t.col_name}`;e.includes(a)||e.push(a)}))}));const a={table:"AD_COLUMN",startindex:0,range:e.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:e,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID;const i=(await this.requestKeysData(a)).row||[],o=[];t.forEach(((t,e)=>{o.push([]),t.tab_value.forEach(((t,a)=>{o[e].push([]);const s=i.find((e=>e.DBNAME.val===t.col_name));o[e][a]=[{ID:s.ID.val,Label:s.DBNAME.val}],t.type=s.COLTYPE.val;const n=this.getSelectItems(t.type);t.selectOptions=n,t.type&&t.type.toUpperCase().startsWith("DATE")&&(t.contrast_value=t.contrast_value.split("~"))}))})),this.defaultSelected=o,this.sumTabs=t}else this.sumTabs=[JSON.parse(JSON.stringify(m))]},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addButtonClick(){const t=JSON.parse(JSON.stringify(m));this.sumTabs.push(t),this.defaultSelected.push([[]])},removeButtonClick(t){this.sumTabs.splice(t,1),this.defaultSelected.splice(t,1)},addColname(t,e){t.push({col_name:"",operator:"",contrast_value:""}),this.defaultSelected[e].push([])},deleteColname(t,e,a){t.splice(a,1),this.defaultSelected[e].splice(a,1)},async getKeys(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const{itemId:a}=this.$route.params,i={table:"AD_COLUMN",startindex:e,range:this.pageSize,fixedcolumns:{AD_TABLE_ID:[a]},column_include_uicontroller:!0,isolr:!1};"New"===a&&delete i.fixedcolumns.AD_TABLE_ID,this.keyList=await this.requestKeysData(i),this.totalCount=this.keyList.totalRowCount},async getSearchKeys(t,e,a){if(this.currentTabIndex=t,this.currentKeyIndex=e,this.sumTabs[t].tab_value[e].col_name=a,""===a)return void(this.searchKeyList=[]);const{itemId:i}=this.$route.params,o={table:"AD_COLUMN",startindex:0,fixedcolumns:{AD_TABLE_ID:[i],DBNAME:a,ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1};"New"===i&&delete o.fixedcolumns.AD_TABLE_ID,this.timer?(clearTimeout(this.timer),this.timer=setTimeout((async()=>{const t=(await this.requestKeysData(o)).row||[];this.searchKeyList=t.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t)))}),200)):this.timer=setTimeout((async()=>{const t=(await this.requestKeysData(o)).row||[];this.searchKeyList=t.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t)))}),200)},async requestKeysData(t){return new Promise((e=>{this.network.post("/p/cs/QueryList",(0,h.d)({searchdata:t})).then((t=>{if(0===t.data.code){const a=["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],i=t.data.data.tabth,o=t.data.data.row;for(let t=Math.max(i.length-1,0);t>=0;t--){const e=i[t];"DBNAME"===e.colname?e.isak=!0:e.isak=!1,a.includes(e.colname)&&i.splice(t,1)}o.forEach((t=>{for(const e in t)a.includes(e)&&delete t[e]})),e(t.data.data)}else e({})})).catch((()=>{e({})}))}))},handlerInput(t){this.currentTabIndex=t},formatResult(t){const e=JSON.parse(JSON.stringify(t));for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];for(let t=Math.max(a.tab_value.length-1,0);t>=0;t--){const e=a.tab_value[t];e.type&&e.type.toUpperCase().startsWith("DATE")&&e.contrast_value[0]&&e.contrast_value[1]&&(e.contrast_value=e.contrast_value.join("~"))}}return e},setDisplayData(t){const e=JSON.parse(JSON.stringify(t));for(let t=Math.max(e.length-1,0);t>=0;t--){const a=t,i=e[a];for(let t=Math.max(i.tab_value.length-1,0);t>=0;t--){const e=i.tab_value[t];delete e.type,delete e.selectOptions,delete e.defaultSelected,e.col_name&&e.operator&&e.contrast_value||i.tab_value.splice(t,1)}i.tab_name&&0!==i.tab_value.length||e.splice(a,1)}return e},syncData(){const t=JSON.parse(JSON.stringify(this.formatResult(this.sumTabs))),e=this.setDisplayData(t);0===e.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},handlerSelected(t,e,a){this.currentTabIndex=t,this.currentKeyIndex=e,this.sumTabs[t].tab_value[e].col_name=a[0].rowItem.DBNAME.val||a[0].rowItem.DBNAME,this.sumTabs[t].tab_value[e].operator="",this.sumTabs[t].tab_value[e].contrast_value="",this.sumTabs[t].tab_value[e].type=a[0].rowItem.COLTYPE.val||a[0].rowItem.COLTYPE,this.defaultSelected[t][e]=[a[0]]},handleClear(t,e){this.currentTabIndex=t,this.currentKeyIndex=e,this.sumTabs[t].tab_value[e].col_name="",this.sumTabs[t].tab_value[e].operator=""},handleSelectExpand(t,e){const a=this.sumTabs[t].tab_value[e].type||"",i=this.getSelectItems(a);this.$set(this.sumTabs[t].tab_value[e],"selectOptions",i)},formatType(t){let e;return t.toUpperCase().startsWith("NUMBER")?e="NUMBER":t.toUpperCase().startsWith("DATE")?e="DATE":(t.toUpperCase().startsWith("CHAR")||t.toUpperCase().startsWith("VARCHAR"))&&(e="STRING"),e},getSelectItems(t){switch(this.formatType(t)){case"STRING":return[{value:"=",label:"="}];case"NUMBER":return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}];case"DATE":return[{value:"between",label:"between"},{value:"=",label:"="}];default:return[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"between",label:"between"}]}},validateKey(t){const[e,a]=t.split("-");if(!this.sumTabs[e].tab_value[a].col_name)return{isPass:!0,msg:""};const i=this.currentTabIndex,o=this.currentKeyIndex,s=this.sumTabs[i].tab_value[o].col_name;return this.sumTabs[i].tab_value.filter((t=>""!==s&&null!=s&&t.col_name===s)).length>1?{isPass:!1,msg:this.$t("extensionProperty.selectOtherField")}:{isPass:!0,msg:""}},handleChangeDate(t,e,a){this.sumTabs[t].tab_value[e].contrast_value=a}}};a(4502),a(3824);var _=(0,c.Z)(f,i,[],!1,null,"5dd5153e",null);_.options.__file="src/components/extension-property/custom/MultiTab.vue";const v=_.exports},793:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>y});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},t._l(t.listConfig,(function(e,i){return a("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":t.listConfig.length,"row-label":""+t.$t("tips.button")+(i+1),"is-required":"","row-label-class":"rowLabel","show-operation-button":"","error-tip":t.rowValidateTips[i]},on:{addRow:t.addRow,removeRow:function(e){return t.removeRow(i)}}},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.buttonField")},on:{"on-blur":function(e){return t.validateKey(i)}},model:{value:e.input,callback:function(a){t.$set(e,"input",a)},expression:"group.input"}})],1),t._v(" "),t.inputValidateTips[i]?a("div",{staticClass:"tip"},[t._v("\n          "+t._s(t.inputValidateTips[i])+"\n        ")]):t._e(),t._v(" "),e.input?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("R3Select",{attrs:{options:e.selectConfig},on:{change:function(e){return t.getSelect(e,i)}}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.correspondingValue")},on:{"on-blur":function(e){return t.validateKey(i)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"group.value"}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.optionalPrompt")},model:{value:e.desc,callback:function(a){t.$set(e,"desc",a)},expression:"group.desc"}})],1)]):t._e()])])})),1)],1)};i._withStripped=!0;var o=a(2370),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Select",t._g(t._b({attrs:{placeholder:t.formData.placeholder,clearable:""},model:{value:t.formData.defaultValue,callback:function(e){t.$set(t.formData,"defaultValue",e)},expression:"formData.defaultValue"}},"Select",t.$attrs,!1),t.$listeners),t._l(t.formData.selectOptions,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n    "+t._s(e.label)+"\n  ")])})),1)};s._withStripped=!0;var n=a(3986);const l={name:"ak-select",inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},watch:{options:{handler(t){this.formData=(0,n.Z)(t)},deep:!0,immediate:!0}},data:()=>({formData:{}}),methods:{}};var r=a(1900),c=(0,r.Z)(l,s,[],!1,null,"18b7de2f",null);c.options.__file="src/components/select/Select.vue";const u=c.exports;var d=a(3237),p=a(6623),h=a(6250);const m=[{label:o.ZP.t("tips.modal"),value:"modal"},{label:o.ZP.t("tips.request"),value:"request"},{label:o.ZP.t("tips.route"),value:"route"}],f={input:"",selectConfig:{placeholder:o.ZP.t("extensionProperty.triggerType"),defaultValue:"",selectOptions:(0,n.Z)(m)},value:"",desc:""},_={name:"OperateColumnButton",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},components:{Description:d.Z,R3Select:u,ExtentionRowItem:p.Z},watch:{listConfig:{handler(t){const e=this.filterForm(t);0===Object.keys(e).length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0},defaultData:{handler(t){(0,h.Q)(t)&&Object.assign(this.$data,this.$options.data.call(this))},deep:!0}},data:()=>({listConfig:[(0,n.Z)(f)],inputValidateTips:[],rowValidateTips:[]}),methods:{filterForm(t){const e=(0,n.Z)(t);if(0===t.length)return{};const a={};return e.forEach((t=>{t.input&&t.selectConfig.defaultValue&&t.value&&(a[t.input]={type:t.selectConfig.defaultValue,value:t.value,desc:t.desc})})),a},removeOption(t){this.$emit("removeOption",t||[])},addRow(){this.listConfig.push((0,n.Z)(f))},removeRow(t){this.listConfig.splice(t,1)},getSelect(t,e){this.listConfig[e].selectConfig.defaultValue=t,this.validateKey(e)},validateKey(){const t=[],e=[];this.listConfig.forEach((a=>{""===a.input?t.push(this.$t("extensionProperty.buttonField")):t.push(""),!a.input||""!==a.value&&a.selectConfig.defaultValue?e.push(""):e.push(this.$t("extensionProperty.confirmEventAndValue"))})),this.inputValidateTips=t,this.rowValidateTips=e},init(){const t=(0,n.Z)(this.defaultData);if(0===Object.keys(t).length)return;const e=[];Object.keys(t).forEach((a=>{const i=t[a];e.push({input:a,selectConfig:{placeholder:this.$t("extensionProperty.triggerType"),defaultValue:i.type,selectOptions:(0,n.Z)(m)},value:i.value,desc:i.desc})})),this.listConfig=e}},created(){this.init()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(5603),a(7882);var v=(0,r.Z)(_,i,[],!1,null,"2fdab31a",null);v.options.__file="src/components/extension-property/custom/OperateColumnButton.vue";const y=v.exports},6421:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PassWord"},[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"cell"},[a("EnumerateRadioItem",{attrs:{option:t.option,"break-line":!1,"default-data":t.value},on:{radioValueChange:t.radioValueChange}})],1),t._v(" "),t.value?a("div",{staticClass:"cell"},[a("LabelWithSelect",{attrs:{item:{key:"is_all",name:t.$t("extensionProperty.encryptionMethod"),selectOptions:[{text:t.$t("extensionProperty.hideAll"),value:!0},{text:t.$t("extensionProperty.customHide"),value:!1}]},"default-data":t.selectValue},on:{selectValueChange:t.selectValueChange}})],1):t._e(),t._v(" "),t.value&&!t.selectValue?a("div",{staticClass:"cell"},[a("LabelWithInput",{attrs:{"default-data":t.password_prefix_digit,item:{key:"password_prefix_digit",name:t.$t("extensionProperty.frontHiddenDigits"),type:"input"}},on:{inputValueChange:t.inputValueChange}})],1):t._e(),t._v(" "),t.value&&!t.selectValue?a("div",{staticClass:"cell"},[a("LabelWithInput",{attrs:{"default-data":t.password_suffix_digit,item:{key:"password_suffix_digit",name:t.$t("extensionProperty.endHiddenDigits"),type:"input"}},on:{inputValueChange:t.inputValueChange}})],1):t._e()],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(5438),l=a(3585),r=a(9778);const c={name:"PassWord",components:{Description:s.Z,LabelWithSelect:n.Z,EnumerateRadioItem:l.Z,LabelWithInput:r.Z},props:{option:{type:Object,default:()=>({})}},data:()=>({value:!1,selectValue:!0,password_prefix_digit:null,password_suffix_digit:null}),methods:{removeOption(t){this.value=!1,this.selectValue=0,this.$emit("removeOption",t||[]),this.$emit("dataChange",{key:"password_type",value:void 0})},selectValueChange({value:t}){this.selectValue=JSON.parse(t),this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}})},radioValueChange({key:t,value:e}){e?this.selectValue=!0:(e=void 0,this.selectValue=!1),this.value=e,this.$emit("dataChange",{key:t,value:e}),e?this.$emit("dataChange",{key:"password_type",value:{is_all:this.selectValue}}):this.$emit("dataChange",{key:"password_type",value:void 0})},inputValueChange({key:t,value:e}){const a=this.$parent.rootData?this.$parent.rootData.password_type:{};a[t]=e,this.$emit("dataChange",{key:"password_type",value:a})}},created(){const t=this.$parent.rootData;t.ispassword&&(this.value=t.ispassword),t.password_type&&(this.selectValue=t.password_type.is_all,this.password_prefix_digit=t.password_type.password_prefix_digit,this.password_suffix_digit=t.password_type.password_suffix_digit)},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(8721);var u=(0,a(1900).Z)(c,i,[],!1,null,null,null);u.options.__file="src/components/extension-property/custom/PassWord.vue";const d=u.exports},2581:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),a("div",{staticClass:"form-group"},[a("h4",[t._v(t._s(t.$t("extensionProperty.leftColumnTable")))]),t._v(" "),t._l(t.formData.leftPinnedColumns,(function(e,i){return a("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":t.formData.leftPinnedColumns.length,"error-tip":t.fieldValidateTip.leftPinnedColumns[i],"row-label":t.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(e){return t.addRow("leftPinnedColumns")},removeRow:function(e){return t.removeRow("leftPinnedColumns",i)}}},[a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,"default-selected":t.defaultFields.leftPinnedColumns[i],placeholder:t.$t("extensionProperty.selectLeftColumn")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectValue(e,"leftPinnedColumns",i)},"on-clear":function(e){return t.clearValue("leftPinnedColumns",i)}}})],1)])}))],2),t._v(" "),a("div",{staticClass:"form-group"},[a("h4",[t._v(t._s(t.$t("extensionProperty.rightColumnTable")))]),t._v(" "),t._l(t.formData.rightPinnedColumns,(function(e,i){return a("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":t.formData.rightPinnedColumns.length,"error-tip":t.fieldValidateTip.rightPinnedColumns[i],"row-label":t.$t("extensionProperty.field"),"show-operation-button":""},on:{addRow:function(e){return t.addRow("rightPinnedColumns")},removeRow:function(e){return t.removeRow("rightPinnedColumns",i)}}},[a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,"default-selected":t.defaultFields.rightPinnedColumns[i],placeholder:t.$t("extensionProperty.selectRightColumn")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectValue(e,"rightPinnedColumns",i)},"on-clear":function(e){return t.clearValue("rightPinnedColumns",i)}}})],1)])}))],2)],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(6623),l=a(6015),r=a(2667);const c={name:"PinnedColumns",inject:["network"],components:{Description:s.Z,ExtentionRowItem:n.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:String,default:""},keyForm:{type:Object,default:()=>({})}},data:()=>({formData:{leftPinnedColumns:[""],rightPinnedColumns:[""]},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],defaultFields:{leftPinnedColumns:[],rightPinnedColumns:[]},fieldValidateTip:{leftPinnedColumns:[""],rightPinnedColumns:[""]}}),watch:{formData:{handler(t){const e=this.filterForm(t);""===e?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(){const t=this.formData.leftPinnedColumns.filter((t=>""!==t)).join(","),e=this.formData.rightPinnedColumns.filter((t=>""!==t)).join(",");return`${t}${e?"|"+e:""}`},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addRow(t){this.formData[t].push(""),this.fieldValidateTip[t].push("")},removeRow(t,e){this.formData[t].splice(e,1),this.fieldValidateTip[t].splice(e,1)},async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID,this.dropList=await this.getKeyList(a),this.totalCount=this.dropList.totalRowCount},inputSearchData:(0,r.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then((t=>{const e=t.row||[];this.searchList=e.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))),this.totalCount=this.dropList.totalRowCount}))})),commonApi(t,e,a){const{hideColumns:i,displayKeys:o}=a;return new Promise((a=>{this.network.post(t,(0,l.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,s=t.data.data.row;for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.colname)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&s.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},async getKeyList(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",{searchdata:t},{hideColumns:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],displayKeys:["DBNAME"]}))}))},selectValue(t,e,a){this.validateForm(t[0].Label,e,a)&&this.$set(this.formData[e],a,t[0].Label)},clearValue(t,e){this.$set(this.fieldValidateTip[t],e,""),this.$set(this.formData[t],e,"")},validateForm(t,e,a){let i=!0;return this.$set(this.fieldValidateTip[e],a,""),this.formData.leftPinnedColumns.forEach((o=>{t===o&&(i=!1,this.$set(this.fieldValidateTip[e],a,this.$t("extensionProperty.selectOtherField")))})),this.formData.rightPinnedColumns.forEach((o=>{t===o&&(i=!1,this.$set(this.fieldValidateTip[e],a,this.$t("extensionProperty.selectOtherField")))})),i},async init(){if(!this.defaultData)return;const[t,e]=this.defaultData.split("|");let a=[],i=[];t&&(a=t.split(",").map((t=>`=${t}`))),e&&(i=e.split(",").map((t=>`=${t}`)));const o=a.concat(i),s={table:"AD_COLUMN",startindex:0,range:o.length,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:o,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete s.fixedcolumns.AD_TABLE_ID;((await this.getKeyList(s)).row||[]).forEach((t=>{const e=`=${t.DBNAME.val}`,o=a.findIndex((t=>t===e));if(o>-1)this.$set(this.formData.leftPinnedColumns,o,t.DBNAME.val),this.$set(this.defaultFields.leftPinnedColumns,o,[{Label:t.DBNAME.val,ID:t.ID.val}]);else{const a=i.findIndex((t=>t===e));this.$set(this.formData.rightPinnedColumns,a,t.DBNAME.val),this.$set(this.defaultFields.rightPinnedColumns,a,[{Label:t.DBNAME.val,ID:t.ID.val}])}}))}},async created(){this._table_id_="New"===this.$route.params.itemId?null:this.$route.params.itemId,this.init()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(4171),a(1382);var u=(0,a(1900).Z)(c,i,[],!1,null,"a86adb9a",null);u.options.__file="src/components/extension-property/custom/PinnedColumns.vue";const d=u.exports},4110:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"is-required":"","row-label":t.$t("extensionProperty.filterBaseOnField"),"error-tip":t.validateTip}},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.selectSourceField")},on:{"on-blur":t.validateInput},model:{value:t.formData.srccols,callback:function(e){t.$set(t.formData,"srccols",e)},expression:"formData.srccols"}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterApi")},on:{"on-blur":t.validateInput},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1)])],1)],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(6623),l=a(3986);const r={name:"RefcolFilter",components:{Description:s.Z,ExtentionRowItem:n.Z},data:()=>({formData:{srccols:"",url:""},validateTip:""}),props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0}},watch:{formData:{handler(t){const e=this.filterForm(t);0===Object.keys(e).length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},filterForm(t){let e=(0,l.Z)(t);return""!==e.srccols&&""!==e.url||(e={}),e},validateInput(){const t=(0,l.Z)(this.formData);""===t.srccols||""===t.url?this.validateTip=this.$t("extensionProperty.confirmFieldAndAAddress"):this.validateTip=""}},created(){const t=(0,l.Z)(this.defaultData);Object.keys(t).length>0&&(this.formData=t)},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(3501);var c=(0,a(1900).Z)(r,i,[],!1,null,"50e04e07",null);c.options.__file="src/components/extension-property/custom/RefcolFilter.vue";const u=c.exports},5640:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>h});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),t._l(t.formData,(function(e,i){return a("div",{key:i,staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"row-index":i,"row-count":t.formData.length,"row-label":""+t.$t("extensionProperty.condition")+(i+1),"show-operation-button":"","row-label-class":"rowLabel","is-required":"","error-tip":t.validateTips[i]},on:{addRow:t.addRow,removeRow:function(e){return t.removeRow(i)}}},[a("div",{staticClass:"col"},[a("div",{staticClass:"row "},[a("div",{staticClass:"col"},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("extensionProperty.ifFieldOnMainTable"))+"：")]),t._v(" "),a("R3Radio",{attrs:{options:e.radioConfig},on:{change:function(e){return t.getRadioValue(e,i)}}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.knownConditionField")},on:{"on-blur":t.validateForm},model:{value:e.srccol,callback:function(a){t.$set(e,"srccol",a)},expression:"row.srccol"}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.filteredFieldInForeignKey")},on:{"on-blur":t.validateForm},model:{value:e.fixcolumn,callback:function(a){t.$set(e,"fixcolumn",a)},expression:"row.fixcolumn"}})],1)])])])],1)}))],2)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(3986),l=a(8080),r=a(6623);const c={defaultValue:o.ZP.t("tips.no"),label:o.ZP.t("extensionProperty.ifSourceOnMainTable"),selectOptions:[{value:!0,label:o.ZP.t("tips.yes")},{value:!1,label:o.ZP.t("tips.no")}]},u={srccol:"",fixcolumn:"",maintable:!1,radioConfig:(0,n.Z)(c)},d={name:"RefcolSearch",components:{Description:s.Z,ExtentionRowItem:r.Z,R3Radio:l.Z},props:{option:{type:Object,default:()=>({})},defaultData:{type:Array,default:()=>[]},showDescription:{type:Boolean,default:!0}},data:()=>({formData:[(0,n.Z)(u)],defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[],validateTips:[]}),watch:{formData:{handler(t){const e=this.filterForm(t);0===e.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(t){const e=(0,n.Z)(t);if(0===e.length)return[];const a=[];e.forEach(((t,e)=>{delete t.radioConfig,""!==t.srccol&&""!==t.fixcolumn||a.push(e)}));for(let t=a.length-1;t>-1;t--)e.splice(a[t],1);return e},validateForm(){const t=[];this.formData.forEach((e=>{""===e.srccol||""===e.fixcolumn?t.push(this.$t("extensionProperty.confirmConditionAndFilter")):t.push("")})),this.validateTips=t},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addRow(){this.formData.push((0,n.Z)(u))},removeRow(t){this.formData.splice(t,1)},getRadioValue(t,e){this.formData[e].maintable=t.value},init(){const t=(0,n.Z)(this.defaultData);Object.keys(t).length>0&&(t.forEach((t=>{t.radioConfig=(0,n.Z)(c),t.radioConfig.defaultValue=t.maintable?this.$t("tips.yes"):this.$t("tips.no"),void 0===t.maintable&&(t.maintable=!1)})),this.formData=t)}},created(){this.init()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(1075),a(4008);var p=(0,a(1900).Z)(d,i,[],!1,null,"f9cd5f92",null);p.options.__file="src/components/extension-property/custom/RefcolSearch.vue";const h=p.exports},6538:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>f});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showDescription?a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("ExtentionRowItem",{attrs:{"row-label":t.$t("extensionProperty.targetFieldEditable")}},[a("div",{staticClass:"col"},[a("R3Radio",{attrs:{options:t.disabledConfig},on:{change:function(e){return t.getRadioValue(e,t.disabledConfig.key)}}})],1)]),t._v(" "),a("ExtentionRowItem",{attrs:{"row-label":t.$t("extensionProperty.ifFieldRequired"),"error-tip":t.radioValidateTip}},[a("div",{staticClass:"col"},[a("R3Radio",{attrs:{options:t.requiredConfig},on:{change:function(e){return t.getRadioValue(e,t.requiredConfig.key)}}})],1)]),t._v(" "),t._l(t.formData.field,(function(e,i){return a("ExtentionRowItem",{key:i,attrs:{"row-index":i,"row-count":t.formData.field.length,"row-label":t.$t("extensionProperty.sourceField"),"show-operation-button":"","is-required":"","error-tip":t.fieldValidateTip[i]},on:{addRow:t.addRow,removeRow:function(e){return t.removeRow(i)}}},[a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:"",data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,"default-selected":t.defaultFields[e.refcolumn],placeholder:t.$t("extensionProperty.selectField")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectTable(e,i)},"on-clear":function(e){return t.clearTableName(i)}}})],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{attrs:{placeholder:t.$t("extensionProperty.enterValue")},on:{"on-blur":t.validateField},model:{value:t.formData.field[i].refval,callback:function(e){t.$set(t.formData.field[i],"refval",e)},expression:"formData.field[index].refval"}})],1)])}))],2)],1)};i._withStripped=!0;var o=a(2370),s=a(8080),n=a(3237),l=a(6623),r=a(3986),c=a(2667),u=a(5813),d=a(6015);const p={refcolumn:"",refval:""},h={name:"StaticRules",props:{option:{type:Object,default:()=>({})},defaultData:{type:Object,default:()=>({})},showDescription:{type:Boolean,default:!0},keyForm:{type:Object,default:()=>({})}},components:{Description:n.Z,R3Radio:s.Z,ExtentionRowItem:l.Z},inject:["network"],data(){return{formData:{field:[(0,r.Z)(p)],props:{disabled:void 0,required:void 0}},disabledConfig:{key:"disabled",defaultValue:this.$t("extensionProperty.clearConfig"),selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},requiredConfig:{defaultValue:this.$t("extensionProperty.clearConfig"),key:"required",selectOptions:[{value:!0,label:this.$t("tips.yes")},{value:!1,label:this.$t("tips.no")},{value:void 0,label:this.$t("extensionProperty.clearConfig")}]},defaultFields:{},dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["DBNAME"],hidecolumns:["ID"],radioValidateTip:"",fieldValidateTip:[]}},watch:{formData:{handler(t){const e=this.filterForm(t);0===Object.keys(e).length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:e})},deep:!0}},methods:{filterForm(t){const e=(0,r.Z)(t);0===Object.keys(e.props).length&&delete e.props;if(e.props&&(void 0!==e.props.required||void 0!==e.props.disabled)){for(let t=e.field.length-1;t>=0;t--){""===e.field[t].refcolumn&&e.field.splice(t,1)}return 0===Object.keys(e.field).length?{}:e}return{}},addRow(){this.formData.field.push((0,r.Z)(p))},removeRow(t){this.formData.field.splice(t,1)},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},getRadioValue(t,e){this.formChange({key:e,value:t}),this.validateRadio()},validateRadio(){void 0===this.formData.props.required&&void 0===this.formData.props.disabled?this.radioValidateTip=this.$t("extensionProperty.selectRequiredOrUneditable"):this.radioValidateTip=""},validateField(){const t=(0,r.Z)(this.formData);0!==t.length?(this.fieldValidateTip=[],t.field.forEach((t=>{""===t.refcolumn?this.fieldValidateTip.push(this.$t("extensionProperty.confirmFieldFilled")):this.fieldValidateTip.push("")}))):this.fieldValidateTip=[]},formChange(t){const e=(0,r.Z)(this.formData),a=t.key;switch(a){case"disabled":case"required":e.props[a]=t.value.value}this.formData=e},selectTable(t,e){this.formData.field[e].refcolumn=t[0].Label,this.validateField()},clearTableName(t){this.formData.field[t].refcolumn="",this.validateField()},async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_COLUMN",startindex:e,range:10,fixedcolumns:{ISACTIVE:["=Y"],AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete a.fixedcolumns.AD_TABLE_ID,this.dropList=await this.getKeyList(a),this.totalCount=this.dropList.totalRowCount},inputSearchData:(0,c.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_COLUMN",startindex:0,range:10,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t,AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID,this.getKeyList(e).then((t=>{const e=t.row||[];this.searchList=e.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))),this.totalCount=this.dropList.totalRowCount}))})),commonApi(t,e,a){const{hideColumns:i,displayKeys:o}=a;return new Promise((a=>{this.network.post(t,(0,d.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,s=t.data.data.row;for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.colname)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&s.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},async getKeyList(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",{searchdata:t},{hideColumns:["ORDERNO","MASK","AD_TABLE_ID","AD_VERSION_ID","ISORDER","ISACTIVE","ISAGFILTER","AGFILTER","ISINDEXED","NAME","OBTAINMANNER","REF_COLUMN_ID","FKDISPLAY","SEARCHMODEL","ISREMOTE","AD_LIMITVALUE_GROUP_ID","DISPLAYTYPE","COMMENTSTP","MODIFIERID","MODIFIEDDATE"],displayKeys:["DBNAME"]}))}))},async getFieldDefaultValue(){const t=this.defaultData.field||[];if(0===t.length)return;const e={table:"AD_COLUMN",startindex:0,range:20,fixedcolumns:{ISACTIVE:["=Y"],DBNAME:t.map((t=>t.refcolumn)).join(","),AD_TABLE_ID:[this._table_id_]},column_include_uicontroller:!0,isolr:!1};this._table_id_||delete e.fixedcolumns.AD_TABLE_ID;const a=(await this.getKeyList(e)).row||[];t.forEach((t=>{const e=a.find((e=>e.DBNAME.val===t.refcolumn));this.$set(this.defaultFields,t.refcolumn,[{ID:e.ID.val,Label:e.DBNAME.val}])}))},init(){const t=(0,r.Z)(this.defaultData);t.props&&(this.disabledConfig.defaultValue=(0,u.qq)("label",this.disabledConfig.selectOptions,(e=>e.value===t.props.disabled)),this.requiredConfig.defaultValue=(0,u.qq)("label",this.requiredConfig.selectOptions,(e=>e.value===t.props.required))),Object.keys(t).length>0&&(t.field?this.formData=t:this.formData=Object.assign({field:[(0,r.Z)(p)]},t))}},async created(){this._table_id_=this.keyForm.AD_TABLE_ID,this.init(),this.getFieldDefaultValue()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(6457);var m=(0,a(1900).Z)(h,i,[],!1,null,"61e66bf7",null);m.options.__file="src/components/extension-property/custom/StaticRules.vue";const f=m.exports},5986:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Description",{attrs:{option:t.option},on:{removeOption:t.removeOption}}),t._v(" "),t.showConfig?a("div",{staticClass:"tw-mt-20"},[t._v("\n    "+t._s(t.$t("extensionProperty.onlySelectType"))+"\n  ")]):a("div",{staticClass:"tw-mt-20 form-group"},t._l(t.formData,(function(e,i){return a("div",{key:i,staticClass:"tw-mt-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col row-title required-remark"},[t._v("\n          "+t._s(t.$t("extensionProperty.condition"))+t._s(i+1)+"：\n        ")]),t._v(" "),a("div",{staticClass:"col "},[a("Select",{attrs:{placeholder:t.$t("extensionProperty.selectQueryConditions"),clearable:""},on:{"on-change":t.validateForm},model:{value:e.operator,callback:function(a){t.$set(e,"operator",a)},expression:"condition.operator"}},t._l(t.operateOptions,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})),1)],1),t._v(" "),a("div",{staticClass:"col"},[a("Input",{on:{"on-blur":t.validateForm},model:{value:e.key_value,callback:function(a){t.$set(e,"key_value",a)},expression:"condition.key_value"}})],1),t._v(" "),a("div",{staticClass:"col"},[a("DropDownSelectFilter",{attrs:{single:"","default-selected":t.dropDefaultList[e.table_id],data:t.dropList,"auto-data":t.searchList,"page-size":t.pageSize,"total-row-count":t.totalCount,"columns-key":t.columnsKey,hidecolumns:t.hidecolumns,placeholder:t.$t("extensionProperty.selectTable")},on:{"on-popper-show":t.getSearchData,"on-page-change":t.getSearchData,"on-input-value-change":t.inputSearchData,"on-fkrp-selected":function(e){return t.selectTable(e,i)},"on-clear":function(e){return t.clearTableName(i)}}})],1),t._v(" "),a("div",{staticClass:"col btn-group"},[t.formData.length-1===i?a("button",{staticClass:"operate-button",on:{click:t.addRow}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),t.formData.length>1?a("button",{staticClass:"operate-button",on:{click:function(e){return t.removeRow(i)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])]),t._v(" "),t.errorList[i]?a("div",{staticClass:"error-tip tw-mt-10"},[t._v("\n        "+t._s(t.errorList[i])+"\n      ")]):t._e()])})),0)],1)};i._withStripped=!0;var o=a(2370),s=a(3237),n=a(3986),l=a(2667),r=a(6015);a(2995);const c={key_value:"",operator:"",table_id:""},u={name:"TableQuery",props:{option:{type:Object,default:()=>({})},defaultData:{type:[Object,Array],default:()=>[]},keyForm:{type:Object,default:()=>({})}},components:{Description:s.Z},inject:["network"],data:()=>({formData:[(0,n.Z)(c)],dropList:{},searchList:[],totalCount:0,pageSize:10,columnsKey:["AD_REFBY_TABLE_ID"],hidecolumns:["ID"],tableIdOfKey:"",displayTypeOfKey:"",typeOfKey:"",operateOptions:[],dropDefaultList:{},errorList:[]}),computed:{showConfig(){return this.tableIdOfKey&&this.displayTypeOfKey.includes("select")}},watch:{formData:{handler(){this.submitData()},deep:!0}},methods:{validateForm(){const t=(0,n.Z)(this.formData);0!==t.length?(this.errorList=[],t.forEach(((t,e)=>{""!==t.key_value&&t.operator&&t.table_id?this.errorList.push(""):this.errorList.push(this.$t("extensionProperty.checkCondition",{row:e+1}))}))):this.errorList=[]},removeOption(t){Object.assign(this.$data,this.$options.data.call(this)),this.$emit("removeOption",t||[])},addRow(){this.formData.push((0,n.Z)(c))},removeRow(t){this.formData.splice(t,1)},clearTableName(t){this.formData[t].table_id="",this.validateForm()},getOperateOptions:t=>[{value:"=",label:"="}],async getSearchData(t){let e=0;"number"==typeof t&&(e=(t-1)*this.pageSize);const a={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:e,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.dropList=await this.getRelativeTable(a,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}),this.totalCount=this.dropList.totalRowCount},inputSearchData:(0,l.Ds)((function(t){if(""===t)return void(this.searchList=[]);const e={table:"AD_REFBYTABLE",objid:this._table_id_,refcolid:99443,searchdata:{column_include_uicontroller:!0,startindex:0,range:this.pageSize,fixedcolumns:{ISACTIVE:["=Y"]}}};this.getRelativeTable(e,{targetKey:"AD_REFBY_TABLE_ID.refobjid"}).then((e=>{const a=e.row||[];this.searchList=a.map((t=>(Object.keys(t).forEach((e=>{t[e]=t[e].val})),t))).filter((e=>e.AD_REFBY_TABLE_ID.toUpperCase().includes(t.toUpperCase()))),this.totalCount=this.dropList.totalRowCount}))})),selectTable(t,e){this.formData[e].table_id=t[0].ID,this.validateForm()},commonApi(t,e,a){const{hideColumns:i,displayKeys:o,bindId:s}=a;return new Promise((a=>{this.network.post(t,(0,r.d)(e)).then((t=>{if(0===t.data.code){const e=t.data.data.tabth,n=t.data.data.row;s&&n.forEach((t=>{const[e,a]=s.targetKey.split(".");t.ID.val=t[e][a]}));for(let t=Math.max(e.length-1,0);t>=0;t--){const a=e[t];o.includes(a.colname)?a.isak=!0:a.isak=!1,i.includes(a.colname)&&e.splice(t,1)}i.length>0&&n.forEach((t=>{for(const e in t)i.includes(e)&&delete t[e]})),a(t.data.data)}else a({})})).catch((()=>{a({})}))}))},async requestKeysData(t){return new Promise((e=>{e(this.commonApi("/p/cs/QueryList",t,{hideColumns:["ORDERNO","MASK","AD_VERSION_ID","ISACTIVE","MODIFIERNAME","MODIFIEDDATE","REALTABLE_ID","AD_TABLECATEGORY_ID","AD_OBJUICONF_ID","FILTER","PROPS","ISDISPATCHABLE","PROC_SUBMIT","URL","CUSTOMIZENO","DISP_COLUMN_ID","ISTREE"],displayKeys:["NAME"]}))}))},async getRelativeTable(t,e){return new Promise((a=>{a(this.commonApi("/p/cs/objectTableItem",t,{hideColumns:["ISACTIVE","ORDERNO","AD_REFBY_COLUMN_ID","FILTER","ASSOCTYPE","INLINEMODE","AD_VERSION_ID","MODIFIERNAME","MODIFIEDDATE"],displayKeys:["关联表","描述"],bindId:e}))}))},initData(){const{DISPLAYTYPE:t,AD_TABLE_ID:e,COLTYPE:a,AD_TABLE_ID_LABEL:i}=this.keyForm||{};this._table_id_=e,this.displayTypeOfKey=t,this.tableIdOfKey=i,this.typeOfKey=a,this.operateOptions=this.getOperateOptions(this.typeOfKey);const o=(0,n.Z)(this.defaultData);this.defaultData&&this.defaultData.length>0&&(this.formData=o)},filterForm(){const t=(0,n.Z)(this.formData);for(let e=t.length-1;e>=0;e--){const a=t[e];""!==a.key_value&&a.operator&&a.table_id||t.splice(e,1)}return t},submitData(){const t=this.filterForm();0===t.length?this.$emit("dataChange",{key:this.option.key,value:""}):this.$emit("dataChange",{key:this.option.key,value:t})},async restoreFormData(){const t=this.defaultData,e=t.length;if(0===e)return;const a={searchdata:{table:"AD_TABLE",startindex:0,range:e,fixedcolumns:{ID:t.map((t=>t.table_id)),ISACTIVE:["=Y"]},column_include_uicontroller:!0,isolr:!1}},i=(await this.requestKeysData(a)).row||[];t.forEach((t=>{const e=i.find((e=>Number(e.ID.val)===Number(t.table_id)));this.$set(this.dropDefaultList,t.table_id,[{ID:t.table_id,Label:e.NAME.val}])}))}},created(){this.initData(),this.restoreFormData()},beforeCreate(){this.$t=o.ZP.t.bind(o.ZP)}};a(4893);var d=(0,a(1900).Z)(u,i,[],!1,null,"760dadbc",null);d.options.__file="src/components/extension-property/custom/TableQuery.vue";const p=d.exports},9109:(t,e,a)=>{var i={"./BindKey.vue":5724,"./DateShortcut.vue":8661,"./DisableButton.vue":1588,"./FilterColVal.vue":8201,"./FormRequest.vue":6653,"./HiddenSubtable.vue":4827,"./MultiTab.vue":9438,"./OperateColumnButton.vue":793,"./PassWord.vue":6421,"./PinnedColumns.vue":2581,"./RefcolFilter.vue":4110,"./RefcolSearch.vue":5640,"./StaticRules.vue":6538,"./TableQuery.vue":5986};function o(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=s,t.exports=o,o.id=9109}}]);
//# sourceMappingURL=64.ark.bcl.min.js.map