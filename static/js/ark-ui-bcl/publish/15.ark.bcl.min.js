(self.webpackChunk$Bcl=self.webpackChunk$Bcl||[]).push([[15],{5813:(e,t,o)=>{"use strict";function n(e,t,o){return t.find(o)[e]}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}o.d(t,{qq:()=>n,kJ:()=>i})},2667:(e,t,o)=>{"use strict";function n(e,t=200){let o;return function(...n){const i=this,r=n;clearTimeout(o),o=setTimeout((()=>e.apply(i,r)),t)}}function i(e){return"function"==typeof e}o.d(t,{Ds:()=>n,mf:()=>i})},49:(e,t,o)=>{(e.exports=o(3645)(!1)).push([e.id,".ag-grid-table-wrap[data-v-450dafab] {\n  height: calc(100% - 65px);\n  box-sizing: border-box;\n}\n.ag-grid-table-wrap .ag-grid-table[data-v-450dafab] {\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  position: relative;\n}\n.ag-border[data-v-450dafab] {\n  border: 1px solid #d8d8d8;\n}\n",""])},287:(e,t,o)=>{(e.exports=o(3645)(!1)).push([e.id,".ag-header-cell-label .ag-header-cell-text {\n  font-weight: normal;\n  color: #575757;\n}\n.ag-theme-balham .ag-cell-focus {\n  border: 1px solid #0091ea;\n}\n.ag-theme-balham .ag-cell,\n.ag-theme-balham .ag-full-width-row .ag-cell-wrapper.ag-row-group {\n  -webkit-font-smoothing: antialiased;\n}\n.ag-grid-table-wrap .ag-theme-balham .ag-floating-filter-body input {\n  background-color: #ebebeb;\n  border-color: rgba(149, 165, 166, 0.3);\n}\n.ag-bl-normal-east {\n  display: none;\n}\n.ag-grid-table-wrap .ag-theme-balham .ag-cell {\n  height: 100%;\n  line-height: inherit;\n}\n.ag-floating-filter-input {\n  pointer-events: none;\n}\n.table-cell-left {\n  text-align: left;\n  vertical-align: middle;\n}\n.table-cell-center {\n  text-align: center;\n  vertical-align: middle;\n}\n.table-cell-right {\n  text-align: right;\n  vertical-align: middle;\n}\n.show-cell {\n  background: white;\n  border-left: 1px solid lightgrey !important;\n  border-right: 1px solid lightgrey !important;\n  border-bottom: 1px solid lightgrey !important;\n}\n.show-name {\n  font-weight: bold;\n}\n.show-presenter {\n  font-style: italic;\n}\n.tooltip-box {\n  pointer-events: none;\n  background-color: black;\n  position: absolute;\n  z-index: 99999;\n  color: #fff;\n  font-size: 12px;\n  padding: 5px 10px;\n  border-radius: 4px;\n  display: block;\n  border: 1px solid black;\n  max-width: 200px;\n  word-break: break-all;\n  text-align: left;\n  left: -10000px;\n}\n.tooltip-box::before {\n  pointer-events: none;\n  display: block;\n  content: '';\n  top: 8px;\n  float: left;\n  position: absolute;\n  left: -11px;\n  border-right: 5px solid black;\n  border-left: 5px solid transparent;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n}\n.image-preview-box {\n  width: 150px;\n  height: 150px;\n  border: 0 solid black;\n  position: absolute;\n  bottom: 0;\n  right: 10000px;\n  background-color: #fff;\n  z-index: 999999;\n  box-shadow: 0 0 1px gray;\n  transition-duration: 0.3s;\n}\n.tooltip-top-box {\n  pointer-events: none;\n  background-color: #fff;\n  position: absolute;\n  z-index: 99999;\n  color: #575757;\n  font-size: 12px;\n  padding: 5px 10px;\n  border-radius: 4px;\n  display: block;\n  box-shadow: 0 2px 5px lightgrey;\n  max-width: 200px;\n  word-break: break-all;\n  text-align: center;\n  left: -10000px;\n}\n.arrow-down:before,\n.arrow-down:after {\n  pointer-events: none;\n  display: block;\n  content: '';\n  width: 0;\n  height: 0;\n  position: absolute;\n  border: 6px solid transparent;\n}\n.arrow-down:before {\n  top: 100%;\n  left: 48%;\n  border-top-color: lightgray;\n}\n.arrow-down:after {\n  top: calc(100% - 1px);\n  left: 48%;\n  border-top-color: #fff;\n}\n",""])},8556:(e,t,o)=>{(t=e.exports=o(3645)(!1)).i(o(8921),""),t.push([e.id,".ag-syman-hover[data-v-432088ca] {\n  cursor: pointer;\n}\n.ag-theme-balham .ag-header-cell-label span[data-v-432088ca] {\n  height: 11px;\n}\n.ag-header-wrap[data-v-432088ca] {\n  width: 100%;\n}\n.ag-header-cell-text .comment[data-v-432088ca] {\n  vertical-align: -2px;\n}\n.ag-header-sort .ag-icon[data-v-432088ca] {\n  vertical-align: -4px;\n}\n.ag-header-index[data-v-432088ca] {\n  vertical-align: 10px;\n}\n.ag-header-cell-menu-button[data-v-432088ca] {\n  position: absolute;\n  right: 3px;\n  z-index: 1;\n}\n.ag-theme-balham .ag-header-cell-label[data-v-432088ca] {\n  width: 100%;\n}\n",""])},7801:(e,t,o)=>{(e.exports=o(3645)(!1)).push([e.id,".ag-grid-table.ag-theme-balham .ag-header-cell,\n.ag-theme-balham .ag-header-group-cell {\n  padding-left: 16px;\n  padding-right: 16px;\n}\n",""])},8921:(e,t,o)=>{(e.exports=o(3645)(!1)).push([e.id,"/* tailwind插件弃用了，所以把之前的样式直接放这里管理 */\n.tw-inline-block {\n  display: inline-block\n}\n\n.tw-flex {\n  display: flex\n}\n\n.tw-flex-grow {\n  flex-grow: 1\n}\n\n.tw-mt-10 {\n  margin-top: 10px\n}\n\n.tw-mt-20 {\n  margin-top: 20px\n}\n\n.one-line-flow {\n  overflow: hidden;\n  white-space: nowrap; \n  text-overflow: ellipsis; \n}\n\n.text-right {\n  text-align: right\n}\n\n.text-center {\n  text-align: center\n}\n\n.text-left {\n  text-align: left\n}\n\n.flex-right {\n  justify-content: flex-end\n}\n\n.flex-center {\n  justify-content: center\n}\n\n.flex-left {\n  justify-content: flex-start\n}",""])},7731:(e,t,o)=>{e.exports=o.p+"css/fonts/loading.svg"},6046:()=>{},4043:()=>{},99:(e,t,o)=>{var n=o(49);"string"==typeof n&&(n=[[e.id,n,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};o(6723)(n,i);n.locals&&(e.exports=n.locals)},4197:(e,t,o)=>{var n=o(287);"string"==typeof n&&(n=[[e.id,n,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};o(6723)(n,i);n.locals&&(e.exports=n.locals)},2186:(e,t,o)=>{var n=o(8556);"string"==typeof n&&(n=[[e.id,n,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};o(6723)(n,i);n.locals&&(e.exports=n.locals)},510:(e,t,o)=>{var n=o(7801);"string"==typeof n&&(n=[[e.id,n,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};o(6723)(n,i);n.locals&&(e.exports=n.locals)},8015:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Io});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"tableContainer",staticClass:"ag-grid-table-wrap",style:e.tableStyle},[e.columns.length>0?o("ag-grid-vue",{ref:"table",staticClass:"ag-grid-table ag-theme-balham",attrs:{gridOptions:e.realAgOptions,modules:e.modules}}):e._e()],1)};n._withStripped=!0;o(6046),o(4043);var i,r,s=o(809),a=o(6324),l=o(340),u=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.watermarkMessage=void 0,t}var o;return u(t,e),o=t,t.prototype.validateLicense=function(){if(l._.missingOrEmpty(o.licenseKey))this.outputMissingLicenseKey();else if(o.licenseKey.length>32){var e=o.extractLicenseComponents(o.licenseKey),t=e.md5,n=e.license,i=e.version,r=e.isTrial;t===this.md5.md5(n)?this.validateLicenseKeyForVersion(i,!!r,n):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},t.extractExpiry=function(e){var t=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(o.decode(t),10))},t.extractLicenseComponents=function(e){var t=e.replace(/[\u200B-\u200D\uFEFF]/g,""),n=(t=t.replace(/\r?\n|\r/g,"")).length-32,i=t.substring(n),r=t.substring(0,n),s=o.extractBracketedInformation(t);return{md5:i,license:r,version:s[0],isTrial:s[1]}},t.prototype.getLicenseDetails=function(e){var t=o.extractLicenseComponents(e),n=t.md5,i=t.license,r=t.version,s=t.isTrial,a=n===this.md5.md5(i),l=null;return a&&(l=o.extractExpiry(i),a=!isNaN(l.getTime())),{licenseKey:e,valid:a,expiry:a?o.formatDate(l):null,version:r||"legacy",isTrial:s}},t.prototype.isDisplayWatermark=function(){return!l._.missingOrEmpty(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.formatDate=function(e){var t=e.getDate(),o=e.getMonth(),n=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][o]+" "+n},t.getGridReleaseDate=function(){return new Date(parseInt(o.decode(o.RELEASE_INFORMATION),10))},t.decode=function(e){for(var t,n,i,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0,p=e.replace(/[^A-Za-z0-9+/=]/g,"");c<p.length;)t=l.indexOf(p.charAt(c++))<<2|(r=l.indexOf(p.charAt(c++)))>>4,n=(15&r)<<4|(s=l.indexOf(p.charAt(c++)))>>2,i=(3&s)<<6|(a=l.indexOf(p.charAt(c++))),u+=String.fromCharCode(t),64!=s&&(u+=String.fromCharCode(n)),64!=a&&(u+=String.fromCharCode(i));return u=o.utf8_decode(u)},t.utf8_decode=function(e){e=e.replace(/rn/g,"n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},t.setLicenseKey=function(e){o.licenseKey=e},t.extractBracketedInformation=function(e){var t=e.split("[").filter((function(e){return e.indexOf("]")>-1})).map((function(e){return e.split("]")[0]}));if(!t||0===t.length)return[null,null];var o=1===t.filter((function(e){return"TRIAL"===e})).length;return[t.filter((function(e){return 0===e.indexOf("v")})).map((function(e){return e.replace(/^v/,"")}))[0],o]},t.prototype.validateLicenseKeyForVersion=function(e,t,o){t?this.validateForTrial(o):this.validateLegacyKey(o)},t.prototype.validateLegacyKey=function(e){var t=o.getGridReleaseDate(),n=o.extractExpiry(e),i=!1;if(isNaN(n.getTime())||(!0,i=t<n),i=!0,!0){if(!i){var r=o.formatDate(n),s=o.formatDate(t);this.outputIncompatibleVersion(r,s)}}else this.outputInvalidLicenseKey()},t.prototype.validateForTrial=function(e){var t=o.extractExpiry(e),n=new Date,i=!1,r=!1;if(isNaN(t.getTime())||(i=!0,r=t>n),i){if(!r){var s=o.formatDate(t);this.outputExpiredTrialKey(s)}}else this.outputInvalidLicenseKey()},t.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(e){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+e+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(e,t){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+e+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+t+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTYzMjgzMjEzNDg4Mw==",c([(0,l.fsG)("md5")],t.prototype,"md5",void 0),c([l.$j7],t.prototype,"validateLicense",null),t=o=c([(0,l.Vu6)("licenseManager")],t)}(l.AS9),d=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ieCompatibility=!1,t}return d(t,e),t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(e,t){var o=e[0],n=e[1],i=e[2],r=e[3];o=this.ff(o,n,i,r,t[0],7,-680876936),r=this.ff(r,o,n,i,t[1],12,-389564586),i=this.ff(i,r,o,n,t[2],17,606105819),n=this.ff(n,i,r,o,t[3],22,-1044525330),o=this.ff(o,n,i,r,t[4],7,-176418897),r=this.ff(r,o,n,i,t[5],12,1200080426),i=this.ff(i,r,o,n,t[6],17,-1473231341),n=this.ff(n,i,r,o,t[7],22,-45705983),o=this.ff(o,n,i,r,t[8],7,1770035416),r=this.ff(r,o,n,i,t[9],12,-1958414417),i=this.ff(i,r,o,n,t[10],17,-42063),n=this.ff(n,i,r,o,t[11],22,-1990404162),o=this.ff(o,n,i,r,t[12],7,1804603682),r=this.ff(r,o,n,i,t[13],12,-40341101),i=this.ff(i,r,o,n,t[14],17,-1502002290),n=this.ff(n,i,r,o,t[15],22,1236535329),o=this.gg(o,n,i,r,t[1],5,-165796510),r=this.gg(r,o,n,i,t[6],9,-1069501632),i=this.gg(i,r,o,n,t[11],14,643717713),n=this.gg(n,i,r,o,t[0],20,-373897302),o=this.gg(o,n,i,r,t[5],5,-701558691),r=this.gg(r,o,n,i,t[10],9,38016083),i=this.gg(i,r,o,n,t[15],14,-660478335),n=this.gg(n,i,r,o,t[4],20,-405537848),o=this.gg(o,n,i,r,t[9],5,568446438),r=this.gg(r,o,n,i,t[14],9,-1019803690),i=this.gg(i,r,o,n,t[3],14,-187363961),n=this.gg(n,i,r,o,t[8],20,1163531501),o=this.gg(o,n,i,r,t[13],5,-1444681467),r=this.gg(r,o,n,i,t[2],9,-51403784),i=this.gg(i,r,o,n,t[7],14,1735328473),n=this.gg(n,i,r,o,t[12],20,-1926607734),o=this.hh(o,n,i,r,t[5],4,-378558),r=this.hh(r,o,n,i,t[8],11,-2022574463),i=this.hh(i,r,o,n,t[11],16,1839030562),n=this.hh(n,i,r,o,t[14],23,-35309556),o=this.hh(o,n,i,r,t[1],4,-1530992060),r=this.hh(r,o,n,i,t[4],11,1272893353),i=this.hh(i,r,o,n,t[7],16,-155497632),n=this.hh(n,i,r,o,t[10],23,-1094730640),o=this.hh(o,n,i,r,t[13],4,681279174),r=this.hh(r,o,n,i,t[0],11,-358537222),i=this.hh(i,r,o,n,t[3],16,-722521979),n=this.hh(n,i,r,o,t[6],23,76029189),o=this.hh(o,n,i,r,t[9],4,-640364487),r=this.hh(r,o,n,i,t[12],11,-421815835),i=this.hh(i,r,o,n,t[15],16,530742520),n=this.hh(n,i,r,o,t[2],23,-995338651),o=this.ii(o,n,i,r,t[0],6,-198630844),r=this.ii(r,o,n,i,t[7],10,1126891415),i=this.ii(i,r,o,n,t[14],15,-1416354905),n=this.ii(n,i,r,o,t[5],21,-57434055),o=this.ii(o,n,i,r,t[12],6,1700485571),r=this.ii(r,o,n,i,t[3],10,-1894986606),i=this.ii(i,r,o,n,t[10],15,-1051523),n=this.ii(n,i,r,o,t[1],21,-2054922799),o=this.ii(o,n,i,r,t[8],6,1873313359),r=this.ii(r,o,n,i,t[15],10,-30611744),i=this.ii(i,r,o,n,t[6],15,-1560198380),n=this.ii(n,i,r,o,t[13],21,1309151649),o=this.ii(o,n,i,r,t[4],6,-145523070),r=this.ii(r,o,n,i,t[11],10,-1120210379),i=this.ii(i,r,o,n,t[2],15,718787259),n=this.ii(n,i,r,o,t[9],21,-343485551),e[0]=this.add32(o,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(i,e[2]),e[3]=this.add32(r,e[3])},t.prototype.cmn=function(e,t,o,n,i,r){return t=this.add32(this.add32(t,e),this.add32(n,r)),this.add32(t<<i|t>>>32-i,o)},t.prototype.ff=function(e,t,o,n,i,r,s){return this.cmn(t&o|~t&n,e,t,i,r,s)},t.prototype.gg=function(e,t,o,n,i,r,s){return this.cmn(t&n|o&~n,e,t,i,r,s)},t.prototype.hh=function(e,t,o,n,i,r,s){return this.cmn(t^o^n,e,t,i,r,s)},t.prototype.ii=function(e,t,o,n,i,r,s){return this.cmn(o^(t|~n),e,t,i,r,s)},t.prototype.md51=function(e){var t,o=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)this.md5cycle(n,this.md5blk(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(this.md5cycle(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*o,this.md5cycle(n,i),n},t.prototype.md5blk=function(e){for(var t=[],o=0;o<64;o+=4)t[o>>2]=e.charCodeAt(o)+(e.charCodeAt(o+1)<<8)+(e.charCodeAt(o+2)<<16)+(e.charCodeAt(o+3)<<24);return t},t.prototype.rhex=function(e){for(var t="0123456789abcdef".split(""),o="",n=0;n<4;n++)o+=t[e>>8*n+4&15]+t[e>>8*n&15];return o},t.prototype.hex=function(e){for(var t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")},t.prototype.md5=function(e){return this.hex(this.md51(e))},t.prototype.add32=function(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)},t.prototype.add32Std=function(e,t){return e+t&4294967295},t.prototype.add32Compat=function(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o},h([l.NqP],t.prototype,"init",null),t=h([(0,l.Vu6)("md5")],t)}(l.AS9),g=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),m=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},v=function(e){function t(){return e.call(this,'<div class="ag-watermark">\n                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n               </div>')||this}return g(t,e),t.prototype.postConstruct=function(){var e=this,t=this.shouldDisplayWatermark();l._.addOrRemoveCssClass(this.getGui(),"ag-hidden",!t),t&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return e.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return e.addCssClass("ag-hidden")}),5e3))},t.prototype.shouldDisplayWatermark=function(){var e=this.licenseManager.isDisplayWatermark(),t=null!=location.hostname.match("^(?:127.0.0.1|localhost|(?:w+.)?ag-grid.com)$");return!!location.pathname&&-1!==location.pathname.indexOf("forceWatermark")||e&&!t},m([(0,l.fsG)("licenseManager")],t.prototype,"licenseManager",void 0),m([(0,l.cqo)("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0),m([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),y={moduleName:l.GXE.EnterpriseCoreModule,beans:[p,f],agStackComponents:[{componentName:"AgWatermark",componentClass:v}]},C=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),b=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};!function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED",e[e.INDETERMINATE=2]="INDETERMINATE"}(r||(r={}));var E=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return C(t,e),t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(t){t.keyCode===l.VDZ.SPACE&&e.onExpandClicked()})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return e.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var t=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(t("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input"))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=l._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=l._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=l._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(r.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,o=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),i=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search...")),l._.setDisplayed(this.eFilterTextField.getGui(),e),l._.setDisplayed(this.eSelect.getGui(),t),l._.setDisplayed(this.eExpand,o&&n)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=l._.debounce((function(){var t=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:t})}),t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyPress=function(e){var o=this;l._.isKeyPressed(e,l.VDZ.ENTER)&&setTimeout((function(){return o.onSelectClicked()}),t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===r.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,l._.setDisplayed(this.eExpandChecked,this.expandState===r.EXPANDED),l._.setDisplayed(this.eExpandUnchecked,this.expandState===r.COLLAPSED),l._.setDisplayed(this.eExpandIndeterminate,this.expandState===r.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',b([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),b([(0,l.cqo)("eExpand")],t.prototype,"eExpand",void 0),b([(0,l.cqo)("eSelect")],t.prototype,"eSelect",void 0),b([(0,l.cqo)("eFilterTextField")],t.prototype,"eFilterTextField",void 0),b([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),_=function(){function e(e,t,o,n,i){void 0===n&&(n=!1),this.eventService=new l.POd,this.displayName=e,this.dept=o,this.group=n,n?(this.columnGroup=t,this.expanded=i,this.children=[]):this.column=t}return e.prototype.isGroup=function(){return this.group},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.getColumnGroup=function(){return this.columnGroup},e.prototype.getColumn=function(){return this.column},e.prototype.getDept=function(){return this.dept},e.prototype.isExpanded=function(){return!!this.expanded},e.prototype.getChildren=function(){return this.children},e.prototype.isPassesFilter=function(){return this.passesFilter},e.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:e.EVENT_EXPANDED_CHANGED}))},e.prototype.setPassesFilter=function(e){this.passesFilter=e},e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},e.EVENT_EXPANDED_CHANGED="expandedChanged",e}(),A=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),S=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},P=function(e){function t(t,o,n,i){var r=e.call(this)||this;return r.modelItem=t,r.allowDragging=o,r.eventType=n,r.focusWrapper=i,r.processingColumnStateChange=!1,r.modelItem=t,r.columnGroup=t.getColumnGroup(),r.columnDept=t.getDept(),r.allowDragging=o,r}return A(t,e),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=l._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),l._.addCssClass(this.eDragHandle,"ag-drag-handle"),l._.addCssClass(this.eDragHandle,"ag-column-select-column-group-drag-handle");var o=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();o.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForOriginalColumnGroup(null,this.columnGroup,this.eventType),l._.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,l.jkc.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,_.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),l.fQL.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup).forEach((function(t){return e.addOrRemoveCssClass(t,!0)}))},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,t=this.columnGroup.getColGroupDef();if(t){var o=function(){var o=t.headerTooltip;e.setTooltip(o)};o(),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,o)}},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="columnToolPanelColumnGroup",t},t.prototype.handleKeyDown=function(e){switch(e.keyCode){case l.VDZ.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case l.VDZ.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case l.VDZ.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach((function(t){e.addManagedListener(t,l.sgG.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,l.sgG.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,l.sgG.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,l.sgG.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))}))},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t={type:l.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var t={type:l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup};e.eventService.dispatchEvent(t)},onDragStopped:function(){var t={type:l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(t)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))}else l._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach((function(t){e[t.getId()]=t.isVisible()})),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(l._.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(l._.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new l.rwP(this.eColumnGroupIcons,!0);this.addManagedListener(e,l.rwP.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],t=function(o){o.forEach((function(o){o.isPassesFilter()&&(o.isGroup()?t(o.getChildren()):e.push(o.getColumn()))}))};return t(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),o=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");l._.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(n+" ("+o+")"),l._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),l._.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,t=this.columnModel.isPivotMode(),o=this.getVisibleLeafColumns(),n=0,i=0;if(o.forEach((function(o){!t&&o.getColDef().lockVisible||(e.isColumnChecked(o,t)?n++:i++)})),!(n>0&&i>0))return n>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),t=0;return this.columnGroup.getLeafColumns().forEach((function(o){e?o.isAnyFunctionAllowed()&&t++:o.getColDef().lockVisible||t++})),0===t},t.prototype.isColumnChecked=function(e,t){if(t){var o=e.isPivotActive(),n=e.isRowGroupActive(),i=e.isValueActive();return o||n||i}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();l._.setDisplayed(this.eGroupClosedIcon,!e),l._.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){l._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',S([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),S([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),S([(0,l.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),S([(0,l.cqo)("cbSelect")],t.prototype,"cbSelect",void 0),S([(0,l.cqo)("eLabel")],t.prototype,"eLabel",void 0),S([(0,l.cqo)("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),S([(0,l.cqo)("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),S([(0,l.cqo)("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),S([l.NqP],t.prototype,"init",null),t}(l.wA2),M=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),D=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},w="ag-column-list-item-hovered",T=function(e){function t(t,o){var n=e.call(this)||this;return n.comp=t,n.virtualList=o,n.currentDragColumn=null,n.lastHoveredColumnItem=null,n}return M(t,e),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.columnPanelItemDragStart=function(e){var t=e.column;this.currentDragColumn=t;var o=this.getCurrentColumns();l._.find(o,(function(e){var t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition}))&&(this.moveBlocked=!0)},t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout((function(){e.currentDragColumn=null,e.moveBlocked=!1}),10)},t.prototype.createDropTarget=function(){var e=this,t={isInterestedIn:function(e){return e===l.rvo.ToolPanel},getIconName:function(){return l.jUB[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(t){return e.onDragging(t)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(t)},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new l.Cvn({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})},t.prototype.onDragging=function(e){if(this.currentDragColumn&&!this.moveBlocked){var t=this.getDragColumnItem(e),o=this.virtualList.getComponentAt(t.rowIndex);if(o){var n=o.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===t.rowIndex&&this.lastHoveredColumnItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=t,l._.radioCssClass(n,""+w),l._.radioCssClass(n,"ag-item-highlight-"+t.position))}}},t.prototype.getDragColumnItem=function(e){var t=this.virtualList.getGui(),o=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),i=this.virtualList.getScrollTop(),r=Math.max(0,(e.y-o+i)/n),s=this.comp.getDisplayedColsList().length-1,a=0|Math.min(s,r);return{rowIndex:a,position:Math.round(r)>r||r>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}},t.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),t=this.getCurrentColumns();null!=e&&this.columnModel.moveColumns(t,e),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},t.prototype.getMoveDiff=function(e){var t=this.columnModel.getAllGridColumns(),o=this.getCurrentColumns(),n=o[0],i=o.length;return t.indexOf(n)<e?i:0},t.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof l.KTm?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var e,t=this.lastHoveredColumnItem.component,o="top"===this.lastHoveredColumnItem.position;t instanceof P?(e=t.getColumns()[0],o=!0):e=t.getColumn();var n=this.columnModel.getAllGridColumns().indexOf(e),i=o?n:n+1;return i-this.getMoveDiff(i)},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+w).forEach((function(e){[w,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(t){l._.removeCssClass(e,t)}))})),this.lastHoveredColumnItem=null},D([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),D([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),D([l.NqP],t.prototype,"postConstruct",null),t}(l.AS9),O=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),G=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},I=function(e){function t(t,o,n,i,r){var s=e.call(this)||this;return s.column=t,s.columnDept=o,s.allowDragging=n,s.groupsExist=i,s.focusWrapper=r,s.processingColumnStateChange=!1,s}return O(t,e),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=l._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),l._.addCssClass(this.eDragHandle,"ag-drag-handle"),l._.addCssClass(this.eDragHandle,"ag-column-select-column-drag-handle");var o=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();o.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var i=l._.escapeString(this.displayName);this.eLabel.innerHTML=i;var r=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+r),this.setupDragging(),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,l.sgG.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,l.sgG.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,l.sgG.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,l.sgG.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,l.jkc.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),l.fQL.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null).forEach((function(t){return e.addOrRemoveCssClass(t,!0)}))},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t(),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,t)},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="columnToolPanelColumn",t.colDef=this.column.getColDef(),t},t.prototype.handleKeyDown=function(e){e.keyCode===l.VDZ.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumn","Column"),o=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");l._.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(n+" ("+o+")"),l._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t={type:l.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var t={type:l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column};e.eventService.dispatchEvent(t)},onDragStopped:function(){var t={type:l.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(t)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))}else l._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e,t=this.columnModel.isPivotMode();if(t){var o=this.column.isAnyFunctionActive();this.cbSelect.setValue(o)}else this.cbSelect.setValue(this.column.isVisible());if(t){var n=this.gridOptionsWrapper.isFunctionsReadOnly(),i=!this.column.isAnyFunctionAllowed();e=n||i}else e=!!this.column.getColDef().lockVisible;this.cbSelect.setReadOnly(e),l._.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-readonly",e);var r=t&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(r),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("ag-grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',G([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),G([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),G([(0,l.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),G([(0,l.cqo)("eLabel")],t.prototype,"eLabel",void 0),G([(0,l.cqo)("cbSelect")],t.prototype,"cbSelect",void 0),G([l.NqP],t.prototype,"init",null),t}(l.wA2),L=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),F=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},x=function(){function e(e){this.items=e}return e.prototype.getRowCount=function(){return this.items.length},e.prototype.getRow=function(e){return this.items[e]},e}(),N=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.destroyColumnItemFuncs=[],o}return L(t,e),t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(e){return e()})),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,t,o){var n=this;this.params=e,this.allowDragging=t,this.eventType=o,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[l.zW2.EVENT_COLUMN_PIVOT_CHANGED,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,l.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,l.zW2.EVENT_COLUMN_VALUE_CHANGED,l.zW2.EVENT_COLUMN_VISIBLE,l.zW2.EVENT_NEW_COLUMNS_LOADED].forEach((function(e){n.addManagedListener(n.eventService,e,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new l.CPJ("column-select","tree")),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(e,t){return l._.setAriaLevel(t,e.getDept()+1),n.createComponentFromItem(e,t)})),this.columnModel.isReady()&&this.onColumnsChanged(),e.suppressColumnMove||this.gridOptionsWrapper.isSuppressMovableColumns()||this.createManagedBean(new T(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,t){if(e.isGroup()){var o=new P(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(o),o}var n=new I(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);return this.getContext().createBean(n),n},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();o&&(e[o.getId()]=t.isExpanded())}})),e},t.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();if(o){var n=e[o.getId()];null!=n&&t.setExpanded(n)}}}))},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some((function(e){return e&&void 0!==e.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var t=this,o=this.onColumnExpanded.bind(this),n=function(e,t,o){e.forEach((function(e){e instanceof l.KTm?i(e,t,o):r(e,t,o)}))},i=function(e,i,r){var s=e.getColGroupDef();if(!(s&&s.suppressColumnsToolPanel))if(e.isPadding())n(e.getChildren(),i,r);else{var a=t.columnModel.getDisplayNameForOriginalColumnGroup(null,e,t.eventType),l=new _(a,e,i,!0,t.expandGroupsByDefault);r.push(l),function(e){e.addEventListener(_.EVENT_EXPANDED_CHANGED,o);var n=e.removeEventListener.bind(e,_.EVENT_EXPANDED_CHANGED,o);t.destroyColumnItemFuncs.push(n)}(l),n(e.getChildren(),i+1,l.getChildren())}},r=function(e,o,n){if(!(e.getColDef()&&e.getColDef().suppressColumnsToolPanel)){var i=t.columnModel.getDisplayNameForColumn(e,"columnToolPanel");n.push(new _(i,e,o))}};this.destroyColumnTree(),n(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var t=function(o){o.isPassesFilter()&&(e.displayedColsList.push(o),o.isGroup()&&o.isExpanded()&&o.getChildren().forEach(t))};this.allColsTree.forEach(t),this.virtualList.setModel(new x(this.displayedColsList));var o=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=o&&this.focusRowIfAlive(o),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var t=this;window.setTimeout((function(){t.isAlive()&&t.virtualList.focusRow(e)}),0)},t.prototype.forEachItem=function(e){var t=function(o){o.forEach((function(o){e(o),o.isGroup()&&t(o.getChildren())}))};t(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem((function(t){t.isGroup()&&t.setExpanded(e)}))},t.prototype.setGroupsExpanded=function(e,t){if(t){var o=[];this.forEachItem((function(n){if(n.isGroup()){var i=n.getColumnGroup().getId();t.indexOf(i)>=0&&(n.setExpanded(e),o.push(i))}}));var n=t.filter((function(e){return!l._.includes(o,e)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(e)},t.prototype.getExpandState=function(){var e=0,t=0;return this.forEachItem((function(o){o.isGroup()&&(o.isExpanded()?e++:t++)})),e>0&&t>0?r.INDETERMINATE:t>0?r.COLLAPSED:r.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,t=0,o=this.columnModel.isPivotMode();if(this.forEachItem((function(n){if(!n.isGroup()&&n.isPassesFilter()){var i,r=n.getColumn(),s=r.getColDef();if(o){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;i=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(s.lockVisible)return;i=r.isVisible()}i?e++:t++}})),!(e>0&&t>0))return!(0===e||t>0)},t.prototype.setFilterText=function(e){this.filterText=l._.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,t=function(t){if(!l._.exists(e.filterText))return!0;var o=t.getDisplayName();return null==o||-1!==o.toLowerCase().indexOf(e.filterText)},o=function(e,n){var i=!1;if(e.isGroup()){var r=t(e);e.getChildren().forEach((function(e){var t=o(e,r||n);t&&(i=t)}))}var s=!(!n&&!i)||t(e);return e.setPassesFilter(s),s};this.allColsTree.forEach((function(e){return o(e,!1)}))},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',F([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),F([(0,l.fsG)("toolPanelColDefService")],t.prototype,"colDefService",void 0),F([(0,l.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),F([l.FXL],t.prototype,"destroyColumnTree",null),t}(l.wA2),R=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),V=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,l.jkc.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var t=this.gridOptionsWrapper.getApi();t&&t.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},V([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),V([(0,l.cqo)("cbPivotMode")],t.prototype,"cbPivotMode",void 0),V([l.$j7],t.prototype,"init",null),t}(l.wA2),W=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),B=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.execute=function(e){var t=l._.missingOrEmpty(this.columnModel.getValueColumns()),o=!this.gridOptionsWrapper.getGroupRowAggNodesFunc(),n=e.changedPath&&e.changedPath.isActive();if(!(t&&o&&n)){var i=this.createAggDetails(e);this.recursivelyCreateAggData(i)}},t.prototype.createAggDetails=function(e){var t=this.columnModel.isPivotActive(),o=this.columnModel.getValueColumns(),n=t?this.columnModel.getPivotColumns():[];return{changedPath:e.changedPath,valueColumns:o,pivotColumns:n}},t.prototype.recursivelyCreateAggData=function(e){var t=this;this.filteredOnly=!this.gridOptionsWrapper.isSuppressAggFilteredOnly();e.changedPath.forEachChangedNodeDepthFirst((function(o){if(!o.hasChildren())o.aggData&&o.setAggData(null);else{if(-1===o.level){var n=!t.columnModel.isPivotMode();if(t.gridOptionsWrapper.isSuppressAggAtRootLevel()&&n)return}t.aggregateRowNode(o,e)}}),!0)},t.prototype.aggregateRowNode=function(e,t){var o,n=0===t.valueColumns.length,i=0===t.pivotColumns.length,r=this.gridOptionsWrapper.getGroupRowAggNodesFunc();o=r?r(e.childrenAfterFilter):n?null:i?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(o),e.sibling&&e.sibling.setAggData(o)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var t=this,o={},n=this.pivotStage.getPivotColumnDefs();return n.filter((function(e){return!l._.exists(e.pivotTotalColumnIds)})).forEach((function(n){var i,r=n.pivotKeys||[],s=n.pivotValueColumn,a=n.colId;i=e.leafGroup?t.getValuesFromMappedSet(e.childrenMapped,r,s):t.getValuesPivotNonLeaf(e,a),o[a]=t.aggregateValues(i,s.getAggFunc(),s,e)})),n.filter((function(e){return l._.exists(e.pivotTotalColumnIds)})).forEach((function(n){var i=[],r=n.pivotValueColumn,s=n.pivotTotalColumnIds,a=n.colId;s&&s.length&&(s.forEach((function(e){i.push(o[e])})),o[a]=t.aggregateValues(i,r.getAggFunc(),r,e))})),o},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,t){var o=this,n={},i=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,r=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,s=this.getValuesNormal(e,i),a=e.aggData;return i.forEach((function(t,i){n[t.getId()]=o.aggregateValues(s[i],t.getAggFunc(),t,e)})),r&&a&&r.forEach((function(e){n[e.getId()]=a[e.getId()]})),n},t.prototype.getValuesPivotNonLeaf=function(e,t){var o=[];return e.childrenAfterFilter.forEach((function(e){var n=e.aggData[t];o.push(n)})),o},t.prototype.getValuesFromMappedSet=function(e,t,o){var n=this,i=e;if(t.forEach((function(e){return i=i?i[e]:null})),!i)return[];var r=[];return i.forEach((function(e){var t=n.valueService.getValue(o,e);r.push(t)})),r},t.prototype.getValuesNormal=function(e,t){var o=[];t.forEach((function(){return o.push([])}));for(var n=t.length,i=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,r=i.length,s=0;s<r;s++)for(var a=i[s],l=0;l<n;l++){var u=t[l],c=this.valueService.getValue(u,a);o[l].push(c)}return o},t.prototype.aggregateValues=function(e,t,o,n){var i="string"==typeof t?this.aggFuncService.getAggFunc(t):t;if("function"!=typeof i)return console.error("AG Grid: unrecognised aggregation function "+t),null;var r=function(){l._.doOnce((function(){console.warn("AG Grid: since v24.0, custom aggregation functions take a params object. Please alter your aggregation function to use params.values")}),"aggregationStage.aggregateValues Deprecation")};return i({values:e,column:o,colDef:o?o.getColDef():void 0,rowNode:n,data:n?n.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),forEach:function(t,o){return r(),e.forEach(t,o)},get length(){return r(),e.length},set length(t){r(),e.length=t}})},B([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),B([(0,l.fsG)("valueService")],t.prototype,"valueService",void 0),B([(0,l.fsG)("pivotStage")],t.prototype,"pivotStage",void 0),B([(0,l.fsG)("aggFuncService")],t.prototype,"aggFuncService",void 0),B([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),B([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),t=B([(0,l.Vu6)("aggregationStage")],t)}(l.AS9),U=function(){function e(){this.allSets={},this.allParents=[]}return e.prototype.removeFromChildrenAfterGroup=function(e,t){this.getSet(e).removeFromChildrenAfterGroup[t.id]=!0},e.prototype.removeFromAllLeafChildren=function(e,t){this.getSet(e).removeFromAllLeafChildren[t.id]=!0},e.prototype.getSet=function(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]},e.prototype.getAllParents=function(){return this.allParents},e.prototype.flush=function(){var e=this;this.allParents.forEach((function(t){var o=e.allSets[t.id];t.childrenAfterGroup=t.childrenAfterGroup.filter((function(e){return!o.removeFromChildrenAfterGroup[e.id]})),t.allLeafChildren=t.allLeafChildren.filter((function(e){return!o.removeFromAllLeafChildren[e.id]})),t.updateHasChildren()})),this.allSets={},this.allParents.length=0},e}(),z=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),H=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.groupIdSequence=new l.at1,t}return z(t,e),t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsWrapper.getDataPathFunc())},t.prototype.execute=function(e){var t=this.createGroupingDetails(e);if(t.transactions)this.handleTransaction(t);else{var o=!0===e.afterColumnsChanged;this.shotgunResetEverything(t,o)}this.sortGroupsWithComparator(t.rootNode),this.selectableService.updateSelectableAfterGrouping(t.rootNode)},t.prototype.createGroupingDetails=function(e){var t=e.rowNode,o=e.changedPath,n=e.rowNodeTransactions,i=e.rowNodeOrder,r=this.usingTreeData?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsWrapper.isSuppressParentsInRowNodes(),expandByDefault:this.gridOptionsWrapper.getGroupDefaultExpanded(),groupedCols:r,rootNode:t,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!r?0:r.length,rowNodeOrder:i,transactions:n,changedPath:o}},t.prototype.handleTransaction=function(e){var t=this;e.transactions.forEach((function(o){var n=t.usingTreeData?void 0:new U;if(l._.existsAndNotEmpty(o.remove)&&t.removeNodes(o.remove,e,n),l._.existsAndNotEmpty(o.update)&&t.moveNodesInWrongPath(o.update,e,n),l._.existsAndNotEmpty(o.add)&&t.insertNodes(o.add,e,!1),n){var i=n.getAllParents().slice();n.flush(),t.removeEmptyGroups(i,e)}})),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst((function(t){l._.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder)}))},t.prototype.sortGroupsWithComparator=function(e){if(!this.usingTreeData){var t=this.gridOptionsWrapper.getDefaultGroupOrderComparator();l._.exists(t)&&function e(o){l._.exists(o.childrenAfterGroup)&&!o.leafGroup&&(o.childrenAfterGroup.sort(t),o.childrenAfterGroup.forEach((function(t){return e(t)})))}(e)}},t.prototype.getExistingPathForNode=function(e,t){for(var o=[],n=this.usingTreeData?e:e.parent;n&&n!==t.rootNode;)o.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return o.reverse(),o},t.prototype.moveNodesInWrongPath=function(e,t,o){var n=this;e.forEach((function(e){t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent);var i=function(e){return e.key},r=n.getExistingPathForNode(e,t).map(i),s=n.getGroupInfo(e,t).map(i);l._.areEqual(r,s)||n.moveNode(e,t,o)}))},t.prototype.moveNode=function(e,t,o){if(this.removeNodesInStages([e],t,o),this.insertOneNode(e,t,!0),e.setData(e.data),t.changedPath.isActive()){var n=e.parent;t.changedPath.addParentNode(n)}},t.prototype.removeNodes=function(e,t,o){this.removeNodesInStages(e,t,o),t.changedPath.isActive()&&e.forEach((function(e){return t.changedPath.addParentNode(e.parent)}))},t.prototype.removeNodesInStages=function(e,t,o){if(this.removeNodesFromParents(e,t,o),this.usingTreeData){this.postRemoveCreateFillerNodes(e,t);var n=e.map((function(e){return e.parent}));this.removeEmptyGroups(n,t)}},t.prototype.forEachParentGroup=function(e,t,o){for(var n=t;n&&n!==e.rootNode;)o(n),n=n.parent},t.prototype.removeNodesFromParents=function(e,t,o){var n=this,i=null==o,r=o||new U;e.forEach((function(e){n.removeFromParent(e,r),n.forEachParentGroup(t,e.parent,(function(t){r.removeFromAllLeafChildren(t,e)}))})),i&&r.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,t){var o=this;e.forEach((function(e){if(e.hasChildren()){var n=o.getExistingPathForNode(e,t),i=o.findParentForNode(e,n,t);i.expanded=e.expanded,i.allLeafChildren=e.allLeafChildren,i.childrenAfterGroup=e.childrenAfterGroup,i.childrenMapped=e.childrenMapped,i.updateHasChildren(),i.childrenAfterGroup.forEach((function(e){return e.parent=i}))}}))},t.prototype.removeEmptyGroups=function(e,t){for(var o=this,n=!0,i=function(){n=!1;var i=new U;e.forEach((function(e){o.forEachParentGroup(t,e,(function(e){(function(e){var t=o.getChildrenMappedKey(e.key,e.rowGroupColumn),n=e.parent;return!!(n&&n.childrenMapped&&n.childrenMapped[t]&&e.isEmptyRowGroupNode())})(e)&&(n=!0,o.removeFromParent(e,i),e.setSelected(!1))}))})),i.flush()};n;)i()},t.prototype.removeFromParent=function(e,t){e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(l._.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[o]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,t){var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);t&&(null!=t.childrenMapped&&(t.childrenMapped[o]=e),t.childrenAfterGroup.push(e),t.updateHasChildren())},t.prototype.areGroupColsEqual=function(e,t){return null!=e&&null!=t&&e.pivotMode===t.pivotMode&&l._.areEqual(e.groupedCols,t.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var t=this,o=function(e){e&&e.forEach((function(e){if(!(!t.usingTreeData&&!e.group)){var n={field:e.field,key:e.key,rowGroupColumn:e.rowGroupColumn};t.setGroupData(e,n),o(e.childrenAfterGroup)}}))};o(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,t){this.noChangeInGroupingColumns(e,t)||(this.selectionService.removeGroupsFromSelection(),e.rootNode.leafGroup=!this.usingTreeData&&0===e.groupedCols.length,e.rootNode.childrenAfterGroup=[],e.rootNode.childrenMapped={},e.rootNode.updateHasChildren(),this.insertNodes(e.rootNode.allLeafChildren,e,!1))},t.prototype.noChangeInGroupingColumns=function(e,t){var o=!1,n=this.columnModel.getGroupDisplayColumns(),i=n?n.map((function(e){return e.getId()})).join("-"):"";return t&&(o=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==i&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=i,o},t.prototype.insertNodes=function(e,t,o){var n=this;e.forEach((function(e){n.insertOneNode(e,t,o),t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent)}))},t.prototype.insertOneNode=function(e,t,o){var n=this.getGroupInfo(e,t),i=this.findParentForNode(e,n,t);i.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[i.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(i,e,o):(e.parent=i,e.level=n.length,i.childrenAfterGroup.push(e),i.updateHasChildren())},t.prototype.findParentForNode=function(e,t,o){var n=this,i=o.rootNode;return t.forEach((function(t,r){(i=n.getOrCreateNextNode(i,t,r,o)).allLeafChildren.push(e)})),i},t.prototype.swapGroupWithUserNode=function(e,t,o){t.parent=e.parent,t.key=e.key,t.field=e.field,t.groupData=e.groupData,t.level=e.level,o||(t.expanded=e.expanded),t.leafGroup=e.leafGroup,t.rowGroupIndex=e.rowGroupIndex,t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped,t.updateHasChildren(),this.removeFromParent(e),t.childrenAfterGroup.forEach((function(e){return e.parent=t})),this.addToParent(t,e.parent)},t.prototype.getOrCreateNextNode=function(e,t,o,n){var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn),r=e.childrenMapped?e.childrenMapped[i]:void 0;return r||(r=this.createGroup(t,e,o,n),this.addToParent(r,e)),r},t.prototype.createGroup=function(e,t,o,n){var i=new l.Fxk(this.beans);return i.group=!0,i.field=e.field,i.rowGroupColumn=e.rowGroupColumn,this.setGroupData(i,e),i.id=l.Fxk.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),i.key=e.key,i.level=o,i.leafGroup=!this.usingTreeData&&o===n.groupedColCount-1,i.allLeafChildren=[],i.setAllChildrenCount(0),i.rowGroupIndex=this.usingTreeData?null:o,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren(),i.parent=n.includeParents?t:null,this.setExpandedInitialValue(n,i),i},t.prototype.setGroupData=function(e,t){var o=this;e.groupData={},this.columnModel.getGroupDisplayColumns().forEach((function(n){(o.usingTreeData||!!e.rowGroupColumn&&n.isRowGroupDisplayed(e.rowGroupColumn.getId()))&&(e.groupData[n.getColId()]=t.key)}))},t.prototype.getChildrenMappedKey=function(e,t){return t?t.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,t){if(e.pivotMode&&t.leafGroup)t.expanded=!1;else{var o=this.gridOptionsWrapper.getIsGroupOpenByDefaultFunc();if(o){var n={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=1==o(n)}else{var i=e.expandByDefault;-1!==e.expandByDefault?t.expanded=t.level<i:t.expanded=!0}}},t.prototype.getGroupInfo=function(e,t){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,t)},t.prototype.getGroupInfoFromCallback=function(e){var t=this.getDataPath?this.getDataPath(e.data):null;null!=t&&0!==t.length||l._.doOnce((function(){return console.warn("getDataPath() should not return an empty path for data",e.data)}),"groupStage.getGroupInfoFromCallback");return t?t.map((function(e){return{key:e,field:null,rowGroupColumn:null}})):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,t){var o=this,n=[];return t.groupedCols.forEach((function(i){var r=o.valueService.getKeyForNode(i,e),s=null!=r;if(t.pivotMode&&!s&&(r=" ",s=!0),s){var a={key:r,field:i.getColDef().field,rowGroupColumn:i};n.push(a)}})),n},H([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),H([(0,l.fsG)("selectableService")],t.prototype,"selectableService",void 0),H([(0,l.fsG)("valueService")],t.prototype,"valueService",void 0),H([(0,l.fsG)("beans")],t.prototype,"beans",void 0),H([(0,l.fsG)("selectionService")],t.prototype,"selectionService",void 0),H([l.NqP],t.prototype,"postConstruct",null),t=H([(0,l.Vu6)("groupStage")],t)}(l.AS9),K=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),q=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},X=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)n[i]=r[s];return n},$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return K(t,e),o=t,t.prototype.createPivotColumnDefs=function(e){var t=[],o=[],n=this.columnModel.getPivotColumns(),i=this.columnModel.getValueColumns(),r=n.length,s=new l.at1;return this.recursivelyAddGroup(t,o,1,e,[],s,r,n),this.addRowGroupTotals(t,o,i,s),this.addExpandablePivotGroups(t,o,s),this.addPivotTotalsToGroups(t,o,s),{pivotColumnGroupDefs:t,pivotColumnDefs:o.map((function(e){return l._.cloneObject(e)}))}},t.prototype.recursivelyAddGroup=function(e,t,o,n,i,r,s,a){var u=this;l._.iterateObject(n,(function(n,l){var c=X(i,[n]);if(o!==s){var p={children:[],headerName:n,pivotKeys:c,columnGroupShow:"open",groupId:"pivot"+r.next()};e.push(p),u.recursivelyAddGroup(p.children,t,o+1,l,c,r,s,a)}else{var d=u.columnModel.getValueColumns(),h={children:[],headerName:n,pivotKeys:c,columnGroupShow:"open",groupId:"pivot"+r.next()};if(0===d.length){var f=u.createColDef(null,"-",c,r);h.children.push(f),t.push(f)}else d.forEach((function(e){var o=u.columnModel.getDisplayNameForColumn(e,"header"),n=u.createColDef(e,o,c,r);n.columnGroupShow="open",h.children.push(n),t.push(n)}));e.push(h)}}));var c=a[o-1].getColDef().pivotComparator,p=this.headerNameComparator.bind(this,c);e.sort(p)},t.prototype.addExpandablePivotGroups=function(e,t,o){var n=this;if(!this.gridOptionsWrapper.isSuppressExpandablePivotGroups()&&!this.gridOptionsWrapper.getPivotColumnGroupTotals()){var i=function(e,t,o,r){var s=e;if(s.children){var a=new Map;s.children.forEach((function(e){i(e,t,o,a)}));var l=!s.children.some((function(e){return e.children}));n.columnModel.getValueColumns().forEach((function(i){var r=n.columnModel.getDisplayNameForColumn(i,"header"),s=n.createColDef(i,r,e.pivotKeys,o);(s.pivotTotalColumnIds=a.get(i.getColId()),s.columnGroupShow="closed",s.aggFunc=i.getAggFunc(),l)||(e.children.push(s),t.push(s))})),n.merge(r,a)}else{var u=e;if(!u.pivotValueColumn)return;var c=u.pivotValueColumn.getColId(),p=r.has(c)?r.get(c):[];p.push(u.colId),r.set(c,p)}};e.forEach((function(e){i(e,t,o,new Map)}))}},t.prototype.addPivotTotalsToGroups=function(e,t,o){var n=this;if(this.gridOptionsWrapper.getPivotColumnGroupTotals()){var i="after"===this.gridOptionsWrapper.getPivotColumnGroupTotals(),r=this.columnModel.getValueColumns(),s=r.map((function(e){return e.getAggFunc()}));if(s&&!(s.length<1)&&this.sameAggFuncs(s)){var a=r[0];e.forEach((function(e){n.recursivelyAddPivotTotal(e,t,o,a,i)}))}}},t.prototype.recursivelyAddPivotTotal=function(e,t,o,n,i){var r=this,s=e;if(!s.children){var a=e;return a.colId?[a.colId]:null}var l=[];if(s.children.forEach((function(e){var s=r.recursivelyAddPivotTotal(e,t,o,n,i);s&&(l=l.concat(s))})),s.children.length>1){var u=this.gridOptionsWrapper.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),c=this.createColDef(n,u,e.pivotKeys,o);c.pivotTotalColumnIds=l,c.aggFunc=n.getAggFunc();var p=e.children;i?p.push(c):p.unshift(c),t.push(c)}return l},t.prototype.addRowGroupTotals=function(e,t,o,n){var i=this;if(this.gridOptionsWrapper.getPivotRowTotals())for(var r="after"===this.gridOptionsWrapper.getPivotRowTotals(),s=r?o.slice():o.slice().reverse(),a=function(o){var a=s[o],u=[];e.forEach((function(e){u=u.concat(i.extractColIdsForValueColumn(e,a))})),l.createRowGroupTotal(e,t,[],n,a,u,r)},l=this,u=0;u<s.length;u++)a(u)},t.prototype.extractColIdsForValueColumn=function(e,t){var o=this,n=e;if(!n.children){var i=n;return i.pivotValueColumn===t&&i.colId?[i.colId]:[]}var r=[];return n.children.forEach((function(e){o.extractColIdsForValueColumn(e,t);var n=o.extractColIdsForValueColumn(e,t);r=r.concat(n)})),r},t.prototype.createRowGroupTotal=function(e,t,n,i,r,s,a){var l=n.slice(0),u=this.columnModel.getValueColumns(),c={children:[],pivotKeys:l,groupId:o.PIVOT_ROW_TOTAL_PREFIX+i.next()};if(0===u.length){var p=this.createColDef(null,"-",l,i);c.children.push(p),t.push(p)}else{var d=this.columnModel.getDisplayNameForColumn(r,"header");(p=this.createColDef(r,d,l,i)).pivotTotalColumnIds=s,c.children.push(p),t.push(p)}a?e.push(c):e.unshift(c)},t.prototype.createColDef=function(e,t,o,n){var i={};if(e){var r=e.getColDef();l._.assign(i,r),i.hide=!1}return i.headerName=t,i.colId="pivot_"+n.next(),i.field=i.colId,i.pivotKeys=o,i.pivotValueColumn=e,i.filter=!1,i},t.prototype.sameAggFuncs=function(e){if(1==e.length)return!0;for(var t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0},t.prototype.headerNameComparator=function(e,t,o){return e?e(t.headerName,o.headerName):t.headerName&&!o.headerName?1:!t.headerName&&o.headerName?-1:t.headerName&&o.headerName?t.headerName<o.headerName?-1:t.headerName>o.headerName?1:0:0},t.prototype.merge=function(e,t){t.forEach((function(t,o,n){var i=e.has(o)?e.get(o):[],r=X(i,t);e.set(o,r)}))},t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",q([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=o=q([(0,l.Vu6)("pivotColDefService")],t)}(l.AS9),Y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),J=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uniqueValues={},t}return Y(t,e),t.prototype.execute=function(e){var t=e.rowNode,o=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t,o):this.executePivotOff(o)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e,t){var o=this.bucketUpRowNodes(e),n=this.setUniqueValues(o),i=this.columnModel.getValueColumns(),r=i.map((function(e){return e.getId()})).join("#"),s=i.map((function(e){return e.getAggFunc().toString()})).join("#"),a=this.aggregationColumnsHashLastTime!==r,l=this.aggregationFuncsHashLastTime!==s;if(this.aggregationColumnsHashLastTime=r,this.aggregationFuncsHashLastTime=s,n||a||l){var u=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),c=u.pivotColumnGroupDefs,p=u.pivotColumnDefs;this.pivotColumnDefs=p,this.columnModel.setSecondaryColumns(c,"rowModelUpdated"),t&&t.setInactive()}},t.prototype.setUniqueValues=function(e){return!!(JSON.stringify(e)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=e,!0)},t.prototype.bucketUpRowNodes=function(e){var t=this,o={},n=function(e){e.leafGroup?t.bucketRowNode(e,o):e.childrenAfterFilter.forEach((function(e){n(e)}))};return n(e),o},t.prototype.bucketRowNode=function(e,t){var o=this.columnModel.getPivotColumns();0!==o.length?e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,o,0,t):e.childrenMapped=null},t.prototype.bucketChildren=function(e,t,o,n){var i=this,r={},s=t[o];if(e.forEach((function(e){var t=i.valueService.getKeyForNode(s,e);l._.missing(t)&&(t=""),n[t]||(n[t]={}),r[t]||(r[t]=[]),r[t].push(e)})),o===t.length-1)return r;var a={};return l._.iterateObject(r,(function(e,r){a[e]=i.bucketChildren(r,t,o+1,n[e])})),a},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},J([(0,l.fsG)("valueService")],t.prototype,"valueService",void 0),J([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),J([(0,l.fsG)("pivotColDefService")],t.prototype,"pivotColDefService",void 0),t=J([(0,l.Vu6)("pivotStage")],t)}(l.AS9),ee=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),te=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},oe="undefined"==typeof BigInt?null:BigInt,ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggFuncsMap={},t.initialised=!1,t}var o;return ee(t,e),o=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs()))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[o.AGG_SUM]=ie,this.aggFuncsMap[o.AGG_FIRST]=re,this.aggFuncsMap[o.AGG_LAST]=se,this.aggFuncsMap[o.AGG_MIN]=ae,this.aggFuncsMap[o.AGG_MAX]=le,this.aggFuncsMap[o.AGG_COUNT]=ue,this.aggFuncsMap[o.AGG_AVG]=ce,this.initialised=!0},t.prototype.getDefaultAggFunc=function(e){var t=this.getFuncNames(e),n=l._.includes(t,o.AGG_SUM),i=l._.exists(this.aggFuncsMap[o.AGG_SUM]);return n&&i?o.AGG_SUM:l._.existsAndNotEmpty(t)?t[0]:null},t.prototype.addAggFuncs=function(e){l._.iterateObject(e,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(e,t){this.init(),this.aggFuncsMap[e]=t},t.prototype.getAggFunc=function(e){return this.init(),this.aggFuncsMap[e]},t.prototype.getFuncNames=function(e){var t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t},t.prototype.clear=function(){this.aggFuncsMap={}},t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",te([l.NqP],t.prototype,"init",null),t=o=te([(0,l.Vu6)("aggFuncService")],t)}(l.AS9);function ie(e){for(var t=e.values,o=null,n=0;n<t.length;n++){var i=t[n];"number"==typeof i?null===o?o=i:o+=oe?"number"==typeof o?i:oe(i):i:"bigint"==typeof i&&(o=null===o?i:("bigint"==typeof o?o:oe(o))+i)}return o}function re(e){return e.values.length>0?e.values[0]:null}function se(e){return e.values.length>0?l._.last(e.values):null}function ae(e){for(var t=e.values,o=null,n=0;n<t.length;n++){var i=t[n];"number"!=typeof i&&"bigint"!=typeof i||!(null===o||o>i)||(o=i)}return o}function le(e){for(var t=e.values,o=null,n=0;n<t.length;n++){var i=t[n];"number"!=typeof i&&"bigint"!=typeof i||!(null===o||o<i)||(o=i)}return o}function ue(e){for(var t=e.values,o=0,n=0;n<t.length;n++){var i=t[n];o+=null!=i&&"number"==typeof i.value?i.value:1}return{value:o,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function ce(e){for(var t=e.values,o=0,n=0,i=0;i<t.length;i++){var r=t[i],s=null;"number"==typeof r||"bigint"==typeof r?(s=r,n++):null==r||"number"!=typeof r.value&&"bigint"!=typeof r.value||"number"!=typeof r.count||(s=oe?r.value*("number"==typeof r.value?r.count:oe(r.count)):r.value*r.count,n+=r.count),"number"==typeof s?o+=oe?"number"==typeof o?s:oe(s):s:"bigint"==typeof s&&(o=("bigint"==typeof o?o:oe(o))+s)}var a=null;return n>0&&(a=oe?o/("number"==typeof o?n:oe(n)):o/n),{count:n,value:a,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var pe,de=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),he=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},fe=function(e){function t(t,o,n,i,r){var s=e.call(this)||this;return s.column=t,s.dragSourceDropTarget=o,s.ghost=n,s.valueColumn=i,s.horizontal=r,s.popupShowing=!1,s}return de(t,e),t.prototype.init=function(){this.setTemplate(t.TEMPLATE),this.addElementClasses(this.getGui()),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(l._.createIconNoSpan("columnDrag",this.gridOptionsWrapper)),this.eButton.appendChild(l._.createIconNoSpan("cancel",this.gridOptionsWrapper)),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||this.gridOptionsWrapper.isFunctionsReadOnly()||this.addDragSource(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this,t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t(),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,t)},t.prototype.addDragSource=function(){var e=this,t={type:l.rvo.ToolPanel,eElement:this.eDragHandle,defaultIconName:l.jUB.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&l._.addCssClass(this.getGui(),"ag-column-drop-cell-ghost"),this.valueColumn&&!this.gridOptionsWrapper.isFunctionsReadOnly()&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;l._.setDisplayed(this.eButton,!this.gridOptionsWrapper.isFunctionsReadOnly()),this.addManagedListener(this.eButton,"click",(function(o){var n={type:t.EVENT_COLUMN_REMOVE};e.dispatchEvent(n),o.stopPropagation()}));var o=new l.rwP(this.eButton);this.addManagedListener(o,l.rwP.EVENT_TAP,(function(o){var n={type:t.EVENT_COLUMN_REMOVE};e.dispatchEvent(n)})),this.addDestroyFunc(o.destroy.bind(o))},t.prototype.setTextValue=function(){var e;if(this.valueColumn){var t=this.column.getAggFunc(),o="string"==typeof t?t:"agg";e=this.gridOptionsWrapper.getLocaleTextFunc()(o,o)+"("+this.displayName+")"}else e=this.displayName;var n=l._.escapeString(e);this.eText.innerHTML=n},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var t=new l.CPJ("select-agg-func"),o=this.aggFuncService.getFuncNames(this.column);t.setModel({getRow:function(e){return o[e]},getRowCount:function(){return o.length}}),this.getContext().createBean(t);var n=l._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');n.style.top="0px",n.style.left="0px",n.appendChild(t.getGui()),n.style.width=this.getGui().clientWidth+"px";var i=this.gridOptionsWrapper.getLocaleTextFunc(),r=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:function(){e.destroyBean(t),e.popupShowing=!1},ariaLabel:i("ariaLabelAggregationFunction","Aggregation Function")});r&&t.setComponentCreator(this.createAggSelect.bind(this,r.hideFunc)),this.popupService.positionPopupUnderComponent({type:"aggFuncSelect",eventSource:this.getGui(),ePopup:n,keepWithinBounds:!0,column:this.column}),t.refresh()}},t.prototype.createAggSelect=function(e,t){var o=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),i=t.toString(),r=n(i,i);return new ge((function(){if(e(),o.gridOptionsWrapper.isFunctionsPassive()){var n={type:l.zW2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[o.column],aggFunc:t,api:o.gridApi,columnApi:o.columnApi};o.eventService.dispatchEvent(n)}else o.columnModel.setColumnAggFunc(o.column,t,"toolPanelDragAndDrop")}),r)},t.prototype.addElementClasses=function(e,t){t=t?"-"+t:"",l._.addCssClass(e,"ag-column-drop-cell"+t);var o=this.horizontal?"horizontal":"vertical";l._.addCssClass(e,"ag-column-drop-"+o+"-cell"+t)},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE='<span>\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle"></span>\n          <span ref="eText" class="ag-column-drop-cell-text"></span>\n          <span ref="eButton" class="ag-column-drop-cell-button"></span>\n        </span>',he([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),he([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),he([(0,l.fsG)("popupService")],t.prototype,"popupService",void 0),he([(0,l.FiY)("aggFuncService")],t.prototype,"aggFuncService",void 0),he([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),he([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),he([(0,l.cqo)("eText")],t.prototype,"eText",void 0),he([(0,l.cqo)("eDragHandle")],t.prototype,"eDragHandle",void 0),he([(0,l.cqo)("eButton")],t.prototype,"eButton",void 0),he([l.NqP],t.prototype,"init",null),t}(l.wA2),ge=function(e){function t(t,o){var n=e.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.getGui().innerText=o,n.value=o,n.addGuiEventListener("click",t),n}return de(t,e),t}(l.wA2),me=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ve=function(e){function t(o,n){var i=e.call(this,'<div class="ag-unselectable"></div>')||this;return i.horizontal=o,i.valueColumn=n,i.state=t.STATE_NOT_DRAGGING,i.guiDestroyFunctions=[],i.childColumnComponents=[],i.resizeEnabled=!1,i.addElementClasses(i.getGui()),i.eColumnDropList=document.createElement("div"),i.addElementClasses(i.eColumnDropList,"list"),i}return me(t,e),t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),e.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(e){return e()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,l._.clearElement(this.getGui()),l._.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.addManagedListener(this.beans.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new l.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui()},t.prototype.addElementClasses=function(e,t){t=t?"-"+t:"",l._.addCssClass(e,"ag-column-drop"+t);var o=this.horizontal?"horizontal":"vertical";l._.addCssClass(e,"ag-column-drop-"+o+t)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===l.rvo.HeaderCell||e===l.rvo.ToolPanel},t.prototype.checkInsertIndex=function(e){var t=this.horizontal?this.getNewHorizontalInsertIndex(e):this.getNewVerticalInsertIndex(e);if(t<0)return!1;var o=t!==this.insertIndex;return o&&(this.insertIndex=t),o},t.prototype.getNewHorizontalInsertIndex=function(e){if(l._.missing(e.hDirection))return-1;var t=0,o=e.event,n=this.beans.gridOptionsWrapper.isEnableRtl(),i=e.hDirection===l.poj.Left,r=o.clientX;return this.childColumnComponents.forEach((function(e){var o=e.getGui().getBoundingClientRect(),s=i?o.right:o.left;(n?r<=s:r>=s)&&t++})),t},t.prototype.getNewVerticalInsertIndex=function(e){if(l._.missing(e.vDirection))return-1;var t=0,o=e.event;return this.childColumnComponents.forEach((function(n){var i=n.getGui().getBoundingClientRect();o.clientY>=(e.vDirection===l.HO_.Down?i.top:i.bottom)&&t++})),t},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var o=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=o.filter(this.isColumnDroppable.bind(this));n.length>0&&(this.potentialDndColumns=n,this.checkInsertIndex(e),this.refreshGui())},t.prototype.isPotentialDndColumns=function(){return l._.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var o=e.dragSource.getDragItem().columns||[];this.removeColumns(o)}this.isPotentialDndColumns()&&(this.potentialDndColumns=[],this.refreshGui()),this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsWrapper.isFunctionsPassive()&&e||this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var t=this.getExistingColumns().filter((function(t){return!l._.includes(e,t)}));this.updateColumns(t)},t.prototype.addColumns=function(e){if(e){var t=this.getExistingColumns().slice(),o=e.filter((function(e){return t.indexOf(e)<0}));l._.insertArrayIntoArray(t,o,this.insertIndex),this.updateColumns(t)}},t.prototype.rearrangeColumns=function(e){var t=this.getNonGhostColumns().slice();return l._.insertArrayIntoArray(t,e,this.insertIndex),!l._.areEqual(t,this.getExistingColumns())&&(this.updateColumns(t),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,t=this.resizeEnabled;this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),t&&this.toggleResizable(t)},t.prototype.getNonGhostColumns=function(){var e=this,t=this.getExistingColumns();return this.isPotentialDndColumns()?t.filter((function(t){return!l._.includes(e.potentialDndColumns,t)})):t},t.prototype.addColumnsToGui=function(){var e=this,t=this.getNonGhostColumns(),o=this.isPotentialDndColumns(),n=[];t.forEach((function(t,i){if(!(o&&i>=e.insertIndex)){var r=e.createColumnComponent(t,!1);n.push(r)}})),this.isPotentialDndColumns()&&(this.potentialDndColumns.forEach((function(t){var o=e.createColumnComponent(t,!0);n.push(o)})),t.forEach((function(t,o){if(!(o<e.insertIndex)){var i=e.createColumnComponent(t,!1);n.push(i)}}))),this.getGui().appendChild(this.eColumnDropList),n.forEach((function(t,o){o>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(t.getGui())}))},t.prototype.createColumnComponent=function(e,t){var o=this,n=new fe(e,this.dropTarget,t,this.valueColumn,this.horizontal);return n.addEventListener(fe.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(n),this.guiDestroyFunctions.push((function(){return o.destroyBean(n)})),t||this.childColumnComponents.push(n),n},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,t=document.createElement("div");if(this.addElementClasses(t,"title-bar"),this.addElementClasses(e,"icon"),l._.addOrRemoveCssClass(this.getGui(),"ag-column-drop-empty",this.isExistingColumnsEmpty()),t.appendChild(e),!this.horizontal){var o=document.createElement("span");this.addElementClasses(o,"title"),o.innerHTML=this.params.title,t.appendChild(o)}this.getGui().appendChild(t)},t.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},t.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var t=this.beans.gridOptionsWrapper.isEnableRtl(),o=l._.createIconNoSpan(t?"smallLeft":"smallRight",this.beans.gridOptionsWrapper);this.addElementClasses(o,"cell-separator"),e.appendChild(o)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",t}(l.wA2),ye=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ce=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},be=function(e){function t(t){return e.call(this,t,!1)||this}return ye(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=t("groups","Row Groups");e.prototype.init.call(this,{dragAndDropIcon:l.jUB.ICON_GROUP,icon:l._.createIconNoSpan("rowGroupPanel",this.gridOptionsWrapper,null),emptyMessage:o,title:n}),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="rowGroupColumnsList",t},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&(e.isAllowRowGroup()&&!e.isRowGroupActive())},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var t={type:l.zW2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)}else this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?l.jUB.ICON_GROUP:l.jUB.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},Ce([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),Ce([(0,l.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),Ce([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Ce([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),Ce([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),Ce([l.NqP],t.prototype,"passBeansUp",null),t}(ve),Ee=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_e=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Ae=function(e){function t(t){return e.call(this,t,!1)||this}return Ee(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("pivotColumnsEmptyMessage","Drag here to set column labels"),n=t("pivots","Column Labels");e.prototype.init.call(this,{dragAndDropIcon:l.jUB.ICON_GROUP,icon:l._.createIconNoSpan("pivotPanel",this.gridOptionsWrapper,null),emptyMessage:o,title:n}),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="pivotColumnsList",t},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsWrapper.getPivotPanelShow()){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(!1)}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&(e.isAllowPivot()&&!e.isPivotActive())},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var t={type:l.zW2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)}else this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?l.jUB.ICON_PIVOT:l.jUB.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},_e([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),_e([(0,l.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),_e([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),_e([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),_e([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),_e([l.NqP],t.prototype,"passBeansUp",null),t}(ve),Se=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pe=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Me=function(e){function t(){return e.call(this)||this}return Se(t,e),t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,l.zW2.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),t=this.onDropPanelVisible.bind(this);return l._.addCssClass(e,"ag-column-drop-wrapper"),this.rowGroupComp=new be(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new Ae(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,l.wA2.EVENT_DISPLAYED_CHANGED,t),this.addManagedListener(this.pivotComp,l.wA2.EVENT_DISPLAYED_CHANGED,t),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsWrapper.getRowGroupPanelShow();if(e===l.gTE.ALWAYS)this.rowGroupComp.setDisplayed(!0);else if(e===l.gTE.ONLY_WHEN_GROUPING){var t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else this.rowGroupComp.setDisplayed(!1)}},Pe([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),Pe([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),De={moduleName:l.GXE.RowGroupingModule,beans:[j,Z,$,Q,ne],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:Me}],dependantModules:[y]},we=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Te=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Oe=function(e){function t(t){return e.call(this,t,!0)||this}return we(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("valueColumnsEmptyMessage","Drag here to aggregate"),n=t("values","Values");e.prototype.init.call(this,{dragAndDropIcon:l.jUB.ICON_AGGREGATE,icon:l._.createIconNoSpan("valuePanel",this.gridOptionsWrapper,null),emptyMessage:o,title:n}),this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="valueColumnsList",t},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?l.jUB.ICON_AGGREGATE:l.jUB.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&(e.isAllowValue()&&!e.isValueActive())},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var t={type:l.zW2.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)}else this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Te([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),Te([(0,l.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),Te([(0,l.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Te([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),Te([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),Te([l.NqP],t.prototype,"passBeansUp",null),t}(ve),Ge=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ie=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Le=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return Ge(t,e),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,t,o){this.allowDragging=e,this.params=t,this.eventType=o,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,i=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&n&&i&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new l.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Ie([(0,l.cqo)("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),Ie([(0,l.cqo)("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),Ie([l.NqP],t.prototype,"postConstruct",null),t}(l.BxR),Fe=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),xe=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Ne=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.initialised=!1,o.childDestroyFuncs=[],o}return Fe(t,e),t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var t=this,o={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(l._.mergeDeep(o,e),this.params=o,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new k),this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Le),this.childDestroyFuncs.push((function(){return t.destroyBean(t.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),l._.addCssClass(this.primaryColsPanel.getGui(),"ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new be(!1)),this.childDestroyFuncs.push((function(){return t.destroyBean(t.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Oe(!1)),this.childDestroyFuncs.push((function(){return t.destroyBean(t.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new Ae(!1)),this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var n=this.addManagedListener(this.eventService,l.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){t.resetChildrenHeight(),t.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var t=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new k),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)}))),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new be(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new Oe(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new Ae(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(e){if(e){var t=e.getGui();e.toggleResizable(!l._.containsClass(t,"ag-last-column-drop")&&!l._.containsClass(t,"ag-hidden"))}}))},t.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach((function(e){return l._.removeCssClass(e,"ag-last-column-drop")}));var t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),o=l._.last(t);o&&l._.addCssClass(o,"ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var e=this.getGui().children,t=0;t<e.length;t++){var o=e[t];o.style.removeProperty("height"),o.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return l.O3h.assertRegistered(l.GXE.RowGroupingModule,"Row Grouping")},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(e){return e()})),this.childDestroyFuncs.length=0,l._.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',xe([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),xe([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),t}(l.wA2),Re=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ve=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},ke=function(e){function t(){var t=e.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return t.minWidth=100,t.maxWidth=null,t}return Re(t,e),t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizing.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsWrapper.isEnableRtl())},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth},t.prototype.onResizing=function(e){var t=this.inverted?-1:1,o=Math.max(this.minWidth,Math.floor(this.startingWidth-e*t));null!=this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.elementToResize.style.width=o+"px"},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){this.minWidth=null!=e?e:100},Ve([(0,l.fsG)("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Ve([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),We=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Be=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},je=function(e){function t(t){var o=e.call(this)||this;return o.toolPanelDef=t,o}return We(t,e),t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.eIconWrapper.insertAdjacentElement("afterbegin",l._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsWrapper)),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))},t.prototype.createTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=this.toolPanelDef;return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span class="ag-side-button-label">'+e(t.labelKey,t.labelDefault)+"</span>\n                </button>\n            </div>"},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e)},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Be([(0,l.cqo)("eToggleButton")],t.prototype,"eToggleButton",void 0),Be([(0,l.cqo)("eIconWrapper")],t.prototype,"eIconWrapper",void 0),Be([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),Ue=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ze=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},He=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.buttonComps=[],o}return Ue(t,e),t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(e.keyCode===l.VDZ.TAB&&e.shiftKey){var t=l._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(t,!0)&&e.preventDefault()}},t.prototype.setToolPanelDefs=function(e){e.forEach(this.addButtonComp.bind(this))},t.prototype.setActiveButton=function(e){this.buttonComps.forEach((function(t){t.setSelected(e===t.getToolPanelId())}))},t.prototype.addButtonComp=function(e){var o=this,n=this.createBean(new je(e));this.buttonComps.push(n),this.appendChild(n),n.addEventListener(je.EVENT_TOGGLE_BUTTON_CLICKED,(function(){o.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}))},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),l._.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',ze([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),ze([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),ze([l.NqP],t.prototype,"postConstruct",null),ze([l.FXL],t.prototype,"clearButtons",null),t}(l.wA2),Ze=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ke=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},qe=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return Ze(t,e),t.prototype.setupResize=function(){var e=this.getGui(),t=this.resizeBar=new ke;this.getContext().createBean(t),t.setElementToResize(e),this.appendChild(t)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var t=e.id,o=e.minWidth,n=e.maxWidth,i=e.width;this.toolPanelId=t,this.width=i;var r={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()},s=this.userComponentFactory.newToolPanelComponent(e,r);null!=s?(s.then(this.setToolPanelComponent.bind(this)),null!=o&&this.resizeBar.setMinWidth(o),null!=n&&this.resizeBar.setMaxWidth(n)):console.warn("ag-grid: error processing tool panel component "+t+". You need to specify either 'toolPanel' or 'toolPanelFramework'")},t.prototype.setToolPanelComponent=function(e){var t=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc((function(){t.destroyBean(e)})),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var t="left"===e,o=this.gridOptionsWrapper.isEnableRtl()?t:!t;this.resizeBar.setInverted(o)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper"/>',Ke([(0,l.fsG)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Ke([l.NqP],t.prototype,"setupResize",null),t}(l.wA2),Xe=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$e=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Ye=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.toolPanelWrappers=[],o}return Xe(t,e),t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(He.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.gridOptionsWrapper.addEventListener("sideBar",(function(){e.clearDownUi(),e.setSideBarDef()})),this.gridApi.registerSideBarComp(this),this.createManagedBean(new l.D_6(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var t=this.focusService,o=this.sideBarButtonsComp,n=this.getGui(),i=o.getGui(),r=document.activeElement,s=n.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");if(s)if(i.contains(r))t.focusInto(s,e.shiftKey)&&e.preventDefault();else if(!t.isFocusUnderManagedComponent(s)&&e.shiftKey){var a=t.findFocusableElements(s)[0];if(document.activeElement===a){var l=i.querySelector(".ag-selected button");l&&(e.preventDefault(),l.focus())}}}},t.prototype.handleKeyDown=function(e){if(this.sideBarButtonsComp.getGui().contains(document.activeElement)){var t=this.sideBarButtonsComp.getGui(),o=Array.prototype.slice.call(t.querySelectorAll(".ag-side-button")),n=document.activeElement,i=l._.findIndex(o,(function(e){return e.contains(n)})),r=null;switch(e.keyCode){case l.VDZ.LEFT:case l.VDZ.UP:r=Math.max(0,i-1);break;case l.VDZ.RIGHT:case l.VDZ.DOWN:r=Math.min(i+1,o.length-1)}if(null!==r){var s=o[r].querySelector("button");s&&(s.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0):this.openToolPanel(t)},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsWrapper.getSideBar(),t=!!e&&!!e.toolPanels;if(t){var o=t&&!e.hiddenByDefault;this.setDisplayed(o);var n=e.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(n),this.setupToolPanels(n),this.setSideBarPosition(e.position),e.hiddenByDefault||this.openToolPanel(e.defaultToolPanel)}},t.prototype.setSideBarPosition=function(e){e||(e="right");var t="left"===e,o=t?"right":"left",n=this.getGui();return l._.addOrRemoveCssClass(n,"ag-side-bar-left",t),l._.addOrRemoveCssClass(n,"ag-side-bar-right",!t),this.toolPanelWrappers.forEach((function(e){e.setResizerSizerSide(o)})),this},t.prototype.setupToolPanels=function(e){var t=this;e.forEach((function(e){if(null!=e.id){if("agColumnsToolPanel"===e.toolPanel)if(!l.O3h.assertRegistered(l.GXE.ColumnToolPanelModule,"Column Tool Panel"))return;if("agFiltersToolPanel"===e.toolPanel)if(!l.O3h.assertRegistered(l.GXE.FiltersToolPanelModule,"Filters Tool Panel"))return;var o=new qe;t.getContext().createBean(o),o.setToolPanelDef(e),o.setDisplayed(!1),t.getGui().appendChild(o.getGui()),t.toolPanelWrappers.push(o)}else console.warn("ag-grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id")}))},t.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(e){return e.refresh()}))},t.prototype.openToolPanel=function(e){var t=this.openedItem();t!==e&&(this.toolPanelWrappers.forEach((function(t){var o=e===t.getToolPanelId();t.setDisplayed(o)})),t!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e)))},t.prototype.getToolPanelInstance=function(e){var t=this.toolPanelWrappers.filter((function(t){return t.getToolPanelId()===e}))[0];if(t)return t.getToolPanelInstance();console.warn("ag-grid: unable to lookup Tool Panel as invalid key supplied: "+e)},t.prototype.raiseToolPanelVisibleEvent=function(e){var t={type:l.zW2.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(t)},t.prototype.close=function(){this.openToolPanel(void 0)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach((function(t){t.isDisplayed()&&(e=t.getToolPanelId())})),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach((function(t){l._.removeFromParent(t.getGui()),e.destroyBean(t)})),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',$e([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),$e([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),$e([(0,l.cqo)("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),$e([l.NqP],t.prototype,"postConstruct",null),t}(l.wA2),Je=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Qe=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isColGroupDef=function(e){return e&&void 0!==e.children},t.getId=function(e){return t.isColGroupDef(e)?e.groupId:e.colId},t}return Je(t,e),t.prototype.createColumnTree=function(e){var t=this,o=[],n=function(e,i){if(t.isColGroupDef(e)){var r=e,s=void 0!==r.groupId?r.groupId:r.headerName,a=new l.KTm(r,s,!1,i),u=[];return r.children.forEach((function(e){var t=n(e,i+1);t&&u.push(t)})),a.setChildren(u),a}var c=e,p=c.colId?c.colId:c.field,d=t.columnModel.getPrimaryColumn(p);return d||o.push(c),d},i=[];return e.forEach((function(e){var t=n(e,0);t&&i.push(t)})),o.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",o),i},t.prototype.syncLayoutWithGrid=function(e){var t=this.getLeafPathTrees();e(this.mergeLeafPathTrees(t))},t.prototype.getLeafPathTrees=function(){var e=function(t,o){var n;if(t instanceof l.KTm)if(t.isPadding())n=o;else{var i=l._.assign({},t.getColGroupDef());i.groupId=t.getGroupId(),i.children=[o],n=i}else{var r=l._.assign({},t.getColDef());r.colId=t.getColId(),n=r}var s=t.getOriginalParent();return s?e(s,n):n};return this.columnModel.getAllGridColumns().filter((function(e){var t=e.getColDef();return e.isPrimary()&&!t.showRowGroup})).map((function(t){return e(t,t.getColDef())}))},t.prototype.mergeLeafPathTrees=function(e){for(var t,o,n=this,i=function(e,t){if(!n.isColGroupDef(t))return e;var o=e,r=t;if(r.children&&r.groupId&&n.addChildrenToGroup(o,r.groupId,r.children[0]))return o;return r.children.forEach((function(e){return i(o,e)})),o},r=[],s=1;s<=e.length;s++){var a=e[s-1],l=e[s];t=a,o=l,n.isColGroupDef(t)&&n.isColGroupDef(o)&&n.getId(t)===n.getId(o)?e[s]=i(a,l):r.push(a)}return r},t.prototype.addChildrenToGroup=function(e,t,o){var n=this;if(!this.isColGroupDef(e))return!0;var i=e,r=o;if(function(e,t){var o=e.children.map(n.getId),i=l._.includes(o,n.getId(t)),r=l._.last(e.children),s=r&&n.getId(r)!==n.getId(t);return i&&s}(i,r))return i.children.push(r),!0;if(i.groupId===t){var s=i.children.map(this.getId);if(!l._.includes(s,this.getId(r)))return i.children.push(r),!0}return i.children.forEach((function(e){return n.addChildrenToGroup(e,t,o)})),!1},Qe([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=Qe([(0,l.Vu6)("toolPanelColDefService")],t)}(l.AS9),tt={moduleName:l.GXE.SideBarModule,beans:[et],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:ke},{componentName:"AgSideBar",componentClass:Ye},{componentName:"AgSideBarButtons",componentClass:He}],dependantModules:[y]},ot=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},nt=function(){function e(){}return e.prototype.selectAllChildren=function(e,t,o){var n=this.extractAllLeafColumns(e);this.setAllColumns(n,t,o)},e.prototype.setColumn=function(e,t,o){this.setAllColumns([e],t,o)},e.prototype.setAllColumns=function(e,t,o){this.columnModel.isPivotMode()?this.setAllPivot(e,t,o):this.setAllVisible(e,t,o)},e.prototype.extractAllLeafColumns=function(e){var t=[],o=function(e){e.forEach((function(e){e.isPassesFilter()&&(e.isGroup()?o(e.getChildren()):t.push(e.getColumn()))}))};return o(e),t},e.prototype.setAllVisible=function(e,t,o){var n=[];e.forEach((function(e){e.getColDef().lockVisible||e.isVisible()!=t&&n.push({colId:e.getId(),hide:!t})})),n.length>0&&this.columnModel.applyColumnState({state:n},o)},e.prototype.setAllPivot=function(e,t,o){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,o)},e.prototype.setAllPivotPassive=function(e,t){var o=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),i=this.columnModel.getRowGroupColumns().slice(),r=!1,s=!1,a=!1,u=t?function(e){e.isAnyFunctionActive()||(e.isAllowValue()?(n.push(e),s=!0):e.isAllowRowGroup()?(i.push(e),r=!0):e.isAllowPivot()&&(o.push(e),a=!0))}:function(e){e.isAnyFunctionActive()&&(o.indexOf(e)>=0&&(l._.removeFromArray(o,e),r=!0),n.indexOf(e)>=0&&(l._.removeFromArray(n,e),s=!0),i.indexOf(e)>=0&&(l._.removeFromArray(i,e),a=!0))};if(e.forEach(u),r){var c={type:l.zW2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:o,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(c)}if(a){var p={type:l.zW2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(p)}if(s){var d={type:l.zW2.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(d)}},e.prototype.setAllPivotActive=function(e,t,o){var n=this,i=[],r=t?function(e){if(!e.isAnyFunctionActive())if(e.isAllowValue()){var t="string"==typeof e.getAggFunc()?e.getAggFunc():n.aggFuncService.getDefaultAggFunc(e);i.push({colId:e.getId(),aggFunc:t})}else e.isAllowRowGroup()?i.push({colId:e.getId(),rowGroup:!0}):e.isAllowPivot()&&i.push({colId:e.getId(),pivot:!0})}:function(e){(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&i.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};e.forEach(r),i.length>0&&this.columnModel.applyColumnState({state:i},o)},ot([(0,l.fsG)("aggFuncService")],e.prototype,"aggFuncService",void 0),ot([(0,l.fsG)("columnModel")],e.prototype,"columnModel",void 0),ot([(0,l.fsG)("gridOptionsWrapper")],e.prototype,"gridOptionsWrapper",void 0),ot([(0,l.fsG)("columnApi")],e.prototype,"columnApi",void 0),ot([(0,l.fsG)("gridApi")],e.prototype,"gridApi",void 0),ot([(0,l.fsG)("eventService")],e.prototype,"eventService",void 0),e=ot([(0,l.Vu6)("modelItemUtils")],e)}(),it={moduleName:l.GXE.ColumnToolPanelModule,beans:[nt],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:E},{componentName:"AgPrimaryColsList",componentClass:N},{componentName:"AgPrimaryCols",componentClass:Le}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Ne}],dependantModules:[y,De,tt]},rt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),st=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},at=function(e){function t(t){var o=e.call(this)||this;return o.wrappedComponent=t,o.setTemplateFromElement(t.getGui()),o}return rt(t,e),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)}})},t.prototype.handleKeyDown=function(e){e.keyCode===l.VDZ.ESCAPE&&this.closePanel()},t.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},t.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout((function(){return e.getGui().focus()}),0)},st([l.NqP],t.prototype,"postConstruct",null),t}(l.BxR),lt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ut=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},ct=function(e){function t(t){var o=e.call(this)||this;return o.params=t,o.isActive=!1,o.subMenuIsOpen=!1,o.setTemplate('<div class="'+o.getClassName()+'" tabindex="-1" role="treeitem"></div>'),o}return lt(t,e),t.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var t=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),l._.setAriaDisabled(t,!0)):(this.addGuiEventListener("click",(function(t){return e.onItemSelected(t)})),this.addGuiEventListener("keydown",(function(t){t.keyCode!==l.VDZ.ENTER&&t.keyCode!==l.VDZ.SPACE||(t.preventDefault(),e.onItemSelected(t))})),this.addGuiEventListener("mouseenter",(function(){return e.onMouseEnter()})),this.addGuiEventListener("mouseleave",(function(){return e.onMouseLeave()}))),this.params.cssClasses&&this.params.cssClasses.forEach((function(e){return l._.addCssClass(t,e)}))},t.prototype.isDisabled=function(){return!!this.params.disabled},t.prototype.openSubMenu=function(e){var o=this;if(void 0===e&&(e=!1),this.closeSubMenu(),this.params.subMenu){var n,i=l._.loadTemplate('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var r=l._.getAriaLevel(this.getGui()),s=isNaN(r)?1:r+1,a=this.createBean(new ft(s));a.setParentComponent(this),a.addMenuItems(this.params.subMenu),i.appendChild(a.getGui()),this.addManagedListener(a,t.EVENT_MENU_ITEM_SELECTED,(function(e){return o.dispatchEvent(e)})),a.addGuiEventListener("mouseenter",(function(){return o.cancelDeactivate()})),n=function(){return o.destroyBean(a)},e&&setTimeout((function(){return a.activateFirstItem()}),0)}else{var u=this.params.subMenu,c=this.createBean(new at(u));c.setParentComponent(this);var p=c.getGui(),d="mouseenter",h=function(){return o.cancelDeactivate()};p.addEventListener(d,h),n=function(){return p.removeEventListener(d,h)},i.appendChild(p),u.afterGuiAttached&&setTimeout((function(){return u.afterGuiAttached()}),0)}var f=this.getGui(),g=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:f,ePopup:i}),m=this.gridOptionsWrapper.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:i,positionCallback:g,anchorToElement:f,ariaLabel:m("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,l._.setAriaExpanded(f,!0),this.hideSubMenu=function(){v&&v.hideFunc(),o.subMenuIsOpen=!1,l._.setAriaExpanded(f,!1),n()}}},t.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,l._.setAriaExpanded(this.getGui(),!1))},t.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},t.prototype.activate=function(e){var t=this;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout((function(){t.isAlive()&&t.isActive&&t.openSubMenu()}),300),this.onItemActivated())},t.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},t.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var e=l._.loadTemplate('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?e.appendChild(l._.createIconNoSpan("check",this.gridOptionsWrapper)):this.params.icon&&(l._.isNodeOrElement(this.params.icon)?e.appendChild(this.params.icon):"string"==typeof this.params.icon?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},t.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var e=l._.loadTemplate('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsWrapper.isEnableBrowserTooltips()?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new l.oMw(this)))},t.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},t.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var e=l._.loadTemplate('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var e=l._.loadTemplate('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),t=this.getGui();if(this.params.subMenu){var o=this.gridOptionsWrapper.isEnableRtl()?"smallLeft":"smallRight";l._.setAriaExpanded(t,!1),e.appendChild(l._.createIconNoSpan(o,this.gridOptionsWrapper))}t.appendChild(e)}},t.prototype.onItemSelected=function(e){if(this.params.action?this.params.action():this.openSubMenu(e&&"keydown"===e.type),!this.params.subMenu||this.params.action){var o={type:t.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(o)}},t.prototype.onItemActivated=function(){var e={type:t.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)},t.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},t.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},t.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((function(){return e.activate(!0)}),t.ACTIVATION_DELAY):this.activate(!0)},t.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((function(){return e.deactivate()}),t.ACTIVATION_DELAY):this.deactivate()},t.prototype.getClassName=function(e){var t=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?t+"-"+e:t},t.EVENT_MENU_ITEM_SELECTED="menuItemSelected",t.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",t.ACTIVATION_DELAY=80,ut([(0,l.fsG)("popupService")],t.prototype,"popupService",void 0),ut([l.NqP],t.prototype,"init",null),t}(l.wA2),pt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),dt=function(){return(dt=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ht=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},ft=function(e){function t(t){void 0===t&&(t=1);var o=e.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return o.level=t,o.menuItems=[],o}return pt(t,e),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)}})},t.prototype.onTabKeyDown=function(e){var t=this.getParentComponent(),o=t&&t.getGui();o&&l._.containsClass(o,"ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},t.prototype.handleKeyDown=function(e){switch(e.keyCode){case l.VDZ.UP:case l.VDZ.RIGHT:case l.VDZ.DOWN:case l.VDZ.LEFT:e.preventDefault(),this.handleNavKey(e.keyCode);break;case l.VDZ.ESCAPE:var t=this.findTopMenu();t&&this.focusService.focusInto(t.getGui())}},t.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},t.prototype.addMenuItems=function(e){var t=this;null!=e&&e.forEach((function(e){"separator"===e?t.addSeparator():"string"==typeof e?console.warn("AG Grid: unrecognised menu item "+e):t.addItem(e)}))},t.prototype.addItem=function(e){var t=this,o=this.createManagedBean(new ct(dt(dt({},e),{isAnotherSubMenuOpen:function(){return l._.some(t.menuItems,(function(e){return e.isSubMenuOpen()}))}})));o.setParentComponent(this),l._.setAriaLevel(o.getGui(),this.level),this.menuItems.push(o),this.appendChild(o.getGui()),this.addManagedListener(o,ct.EVENT_MENU_ITEM_SELECTED,(function(e){t.dispatchEvent(e)})),this.addManagedListener(o,ct.EVENT_MENU_ITEM_ACTIVATED,(function(e){t.activeMenuItem&&t.activeMenuItem!==e.menuItem&&t.activeMenuItem.deactivate(),t.activeMenuItem=e.menuItem}))},t.prototype.activateFirstItem=function(){var e=this.menuItems.filter((function(e){return!e.isDisabled()}))[0];e&&e.activate()},t.prototype.addSeparator=function(){this.appendChild(l._.loadTemplate('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},t.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof t)return this;for(;;){var o=e&&e.getParentComponent&&e.getParentComponent();if(!o||!(o instanceof t||o instanceof ct))break;e=o}return e instanceof t?e:void 0},t.prototype.handleNavKey=function(e){switch(e){case l.VDZ.UP:case l.VDZ.DOWN:var t=this.findNextItem(e===l.VDZ.UP);return void(t&&t!==this.activeMenuItem&&t.activate())}e===(this.gridOptionsWrapper.isEnableRtl()?l.VDZ.RIGHT:l.VDZ.LEFT)?this.closeIfIsChild():this.openChild()},t.prototype.closeIfIsChild=function(e){var t=this.getParentComponent();t&&t instanceof ct&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus())},t.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},t.prototype.findNextItem=function(e){var t=this.menuItems.filter((function(e){return!e.isDisabled()}));if(t.length){if(!this.activeMenuItem)return e?l._.last(t):t[0];var o;e&&t.reverse();for(var n=!1,i=0;i<t.length;i++){var r=t[i];if(n){o=r;break}r===this.activeMenuItem&&(n=!0)}return o||this.activeMenuItem}},t.prototype.destroy=function(){this.clearActiveItem(),e.prototype.destroy.call(this)},ht([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),ht([l.NqP],t.prototype,"postConstruct",null),t}(l.BxR),gt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),mt=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gt(t,e),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,t,o){var n=this;this.showMenu(e,(function(i){var r=i.getGui();n.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:t,ePopup:r}),o&&i.showTab(o)}),"columnMenu",o,void 0,t.target)},t.prototype.showMenuAfterButtonClick=function(e,t,o,n,i){var r=this,s=-1,a="left";this.gridOptionsWrapper.isEnableRtl()&&(s=1,a="right"),this.showMenu(e,(function(i){var l=i.getGui();r.popupService.positionPopupUnderComponent({type:o,column:e,eventSource:t,ePopup:l,alignSide:a,nudgeX:9*s,nudgeY:-23,keepWithinBounds:!0}),n&&i.showTab(n)}),o,n,i,t)},t.prototype.showMenu=function(e,t,o,n,i,r){var s=this,a=this.createBean(new yt(e,this.lastSelectedTab,i)),u=a.getGui(),c=r||this.ctrlsService.getGridBodyCtrl().getGui(),p=[];p.push((function(t){if(s.destroyBean(a),e.setMenuVisible(!1,"contextMenu"),t instanceof KeyboardEvent&&r&&l._.isVisible(r)){var o=s.focusService.findTabbableParent(r);o&&o.focus()}}));var d=this.gridOptionsWrapper.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:function(e){p.forEach((function(t){return t(e)}))},afterGuiAttached:function(e){return a.afterGuiAttached(l._.assign({},{container:o},e))},positionCallback:function(){return t(a)},anchorToElement:c,ariaLabel:d("ariaLabelColumnMenu","Column Menu")});if(h){var f=h.stopAnchoringPromise;f&&f.then((function(t){e.addEventListener(l.sgG.EVENT_LEFT_CHANGED,t),e.addEventListener(l.sgG.EVENT_VISIBLE_CHANGED,t),p.push((function(){e.removeEventListener(l.sgG.EVENT_LEFT_CHANGED,t),e.removeEventListener(l.sgG.EVENT_VISIBLE_CHANGED,t)}))}))}n||(a.showTabBasedOnPreviousSelection(),t(a)),a.addEventListener(yt.EVENT_TAB_SELECTED,(function(e){s.lastSelectedTab=e.key})),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=a,a.addEventListener(l.AS9.EVENT_DESTROYED,(function(){s.activeMenu===a&&(s.activeMenu=null)}))},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(yt.TABS_DEFAULT).length>0},mt([(0,l.fsG)("popupService")],t.prototype,"popupService",void 0),mt([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),mt([(0,l.fsG)("ctrlsService")],t.prototype,"ctrlsService",void 0),t=mt([(0,l.Vu6)("menuFactory")],t)}(l.AS9),yt=function(e){function t(o,n,i){var r=e.call(this)||this;return r.tabFactories={},r.includeChecks={},r.column=o,r.initialSelection=n,r.tabFactories[t.TAB_GENERAL]=r.createMainPanel.bind(r),r.tabFactories[t.TAB_FILTER]=r.createFilterPanel.bind(r),r.tabFactories[t.TAB_COLUMNS]=r.createColumnsPanel.bind(r),r.includeChecks[t.TAB_GENERAL]=function(){return!0},r.includeChecks[t.TAB_FILTER]=function(){return o.isFilterAllowed()},r.includeChecks[t.TAB_COLUMNS]=function(){return!0},r.restrictTo=i,r}return gt(t,e),t.prototype.init=function(){var e=this,t=this.getTabsToCreate().map((function(t){return e.createTab(t)}));this.tabbedLayout=new l.WD6({items:t,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout)},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter((function(t){return e.isValidMenuTabItem(t)})).filter((function(t){return e.isNotSuppressed(t)})).filter((function(t){return e.isModuleLoaded(t)}))},t.prototype.isModuleLoaded=function(e){return e!==t.TAB_COLUMNS||l.O3h.isRegistered(l.GXE.ColumnToolPanelModule)},t.prototype.isValidMenuTabItem=function(e){var o=!0,n=t.TABS_DEFAULT;return null!=this.restrictTo&&(o=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),(o=o&&t.TABS_DEFAULT.indexOf(e)>-1)||console.warn("Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]"),o},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var o=null;switch(e.item){case this.tabItemColumns:o=t.TAB_COLUMNS;break;case this.tabItemFilter:o=t.TAB_FILTER;break;case this.tabItemGeneral:o=t.TAB_GENERAL}o&&this.activateTab(o)},t.prototype.activateTab=function(e){var o={type:t.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(o)},t.prototype.getMenuItems=function(){var e,o=this.getDefaultMenuOptions(),n=this.gridOptionsWrapper.getMainMenuItemsFunc();return e=n?n({column:this.column,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),defaultItems:o}):o,l._.removeRepeatsFromArray(e,t.MENU_ITEM_SEPARATOR),e},t.prototype.getDefaultMenuOptions=function(){var e=[],o=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,i=n>0,r=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,s=this.column.isAllowValue(),a=this.column.isAllowRowGroup(),u=this.column.isPrimary(),c=this.columnModel.isPivotMode(),p=this.rowModel.getType()===l.gTE.ROW_MODEL_TYPE_CLIENT_SIDE,d=this.gridOptionsWrapper.isTreeData(),h=u&&i&&s||!u;return o&&e.push("pinSubMenu"),h&&e.push("valueAggSubMenu"),(o||h)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),a&&this.column.isPrimary()&&(r?e.push("rowUnGroup"):e.push("rowGroup")),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns"),p&&(d||n>(c?1:0))&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new ft);var e=this.getMenuItems(),o=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(o),this.mainMenuList.addEventListener(ct.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:l._.createIconNoSpan("menu",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:l.j_S.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(){this.hidePopupFunc();var e=this.focusService.getFocusedCell();if(e){var t=e.rowIndex,o=e.rowPinned,n=e.column;this.focusService.setFocusedCell(t,n,o,!0)}},t.prototype.createFilterPanel=function(){var e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");return this.tabItemFilter={title:l._.createIconNoSpan("filter",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:e.guiPromise,afterAttachedCallback:function(t){e.filterPromise&&e.filterPromise.then((function(e){e&&e.afterGuiAttached&&e.afterGuiAttached(t)}))},name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");l._.addCssClass(e,"ag-menu-column-select-wrapper"),this.columnSelectPanel=this.createManagedBean(new Le);var o=this.column.getColDef().columnsMenuParams;return o||(o={}),this.columnSelectPanel.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!o.contractColumnSelection,suppressColumnExpandAll:!!o.suppressColumnExpandAll,suppressColumnFilter:!!o.suppressColumnFilter,suppressColumnSelectAll:!!o.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!o.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi},"columnMenu"),l._.addCssClass(this.columnSelectPanel.getGui(),"ag-menu-column-select"),e.appendChild(this.columnSelectPanel.getGui()),this.tabItemColumns={title:l._.createIconNoSpan("columns",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:l.j_S.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var t=e.container,o=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:o}),o&&(this.hidePopupFunc=o,this.addDestroyFunc(o))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TAB_GENERAL="generalMenuTab",t.TAB_COLUMNS="columnsMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL,t.TAB_FILTER,t.TAB_COLUMNS],t.MENU_ITEM_SEPARATOR="separator",mt([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),mt([(0,l.fsG)("filterManager")],t.prototype,"filterManager",void 0),mt([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),mt([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),mt([(0,l.fsG)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),mt([(0,l.fsG)("rowModel")],t.prototype,"rowModel",void 0),mt([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),mt([l.NqP],t.prototype,"init",null),t}(l.AS9),Ct=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bt=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Et=" ag-context-menu-open",_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ct(t,e),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,t,o){var n=[];if(l._.exists(e)&&l.O3h.isRegistered(l.GXE.ClipboardModule)&&t&&n.push("copy","copyWithHeaders","paste","separator"),this.gridOptionsWrapper.isEnableCharts()&&l.O3h.isRegistered(l.GXE.RangeSelectionModule)&&l.O3h.isRegistered(l.GXE.GridChartsModule)&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),l._.exists(e)){var i=!l.O3h.isRegistered(l.GXE.CsvExportModule),r=!l.O3h.isRegistered(l.GXE.ExcelExportModule),s=this.gridOptionsWrapper.isSuppressExcelExport()||r,a=this.gridOptionsWrapper.isSuppressCsvExport()||i;!(l._.isIOSUserAgent()||s&&a)&&n.push("export")}if(this.gridOptionsWrapper.getContextMenuItemsFunc()){var u=this.gridOptionsWrapper.getContextMenuItemsFunc(),c={node:e,column:t,value:o,defaultItems:n.length?n:void 0,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return u?u(c):void 0}return n},t.prototype.onContextMenu=function(e,t,o,n,i,r){if((this.gridOptionsWrapper.isAllowContextMenuWithControlKey()||!e||!e.ctrlKey&&!e.metaKey)&&(e&&this.preventDefaultOnContextMenu(e),!this.gridOptionsWrapper.isSuppressContextMenu())){var s=e||t.touches[0];if(this.showMenu(o,n,i,s,r))(e||t).preventDefault()}},t.prototype.preventDefaultOnContextMenu=function(e){var t=this.gridOptionsWrapper,o=e.which;(t.isPreventDefaultOnContextMenu()||t.isSuppressMiddleClickScrolls()&&2===o)&&e.preventDefault()},t.prototype.showMenu=function(e,t,o,n,i){var r=this,s=this.getMenuItems(e,t,o),a=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===s||l._.missingOrEmpty(s))return!1;var u=new At(s);this.createBean(u);var c=u.getGui(),p={column:t,rowNode:e,type:"contextMenu",mouseEvent:n,ePopup:c,nudgeY:1},d=this.gridOptionsWrapper.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:function(){l._.removeCssClass(a,Et),r.destroyBean(u)},click:n,positionCallback:function(){r.popupService.positionPopupUnderMouseEvent(l._.assign({},{nudgeX:r.gridOptionsWrapper.isEnableRtl()?-1*(c.offsetWidth+1):1},p))},anchorToElement:i,ariaLabel:d("ariaLabelContextMenu","Context Menu")});return h&&(l._.addCssClass(a,Et),u.afterGuiAttached({container:"contextMenu",hidePopup:h.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=u,u.addEventListener(l.AS9.EVENT_DESTROYED,(function(){r.activeMenu===u&&(r.activeMenu=null)})),h&&u.addEventListener(ct.EVENT_MENU_ITEM_SELECTED,h.hideFunc),!0},bt([(0,l.fsG)("popupService")],t.prototype,"popupService",void 0),bt([(0,l.FiY)("rangeService")],t.prototype,"rangeService",void 0),bt([(0,l.fsG)("ctrlsService")],t.prototype,"ctrlsService",void 0),bt([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=bt([(0,l.Vu6)("contextMenuFactory")],t)}(l.AS9),At=function(e){function t(t){var o=e.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return o.menuList=null,o.focusedCell=null,o.menuItems=t,o}return Ct(t,e),t.prototype.addMenuItems=function(){var e=this,t=this.createBean(new ft),o=this.menuItemMapper.mapWithStockItems(this.menuItems,null);t.addMenuItems(o),this.appendChild(t),this.menuList=t,t.addEventListener(ct.EVENT_MENU_ITEM_SELECTED,(function(t){return e.dispatchEvent(t)}))},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var t=this.focusedCell,o=t.rowIndex,n=t.rowPinned,i=t.column,r=this.gridOptionsWrapper.getDocument();r.activeElement===r.body&&this.focusService.setFocusedCell(o,i,n,!0)}},t.prototype.destroy=function(){this.restoreFocusedCell(),e.prototype.destroy.call(this)},bt([(0,l.fsG)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),bt([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),bt([(0,l.fsG)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),bt([l.NqP],t.prototype,"addMenuItems",null),t}(l.wA2),St=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pt=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return St(t,e),t.prototype.mapWithStockItems=function(e,t){var o=this;if(!e)return[];var n=[];return e.forEach((function(e){var i;if(i="string"==typeof e?o.getStockMenuItem(e,t):e){var r=i,s=r.subMenu;s&&s instanceof Array&&(r.subMenu=o.mapWithStockItems(r.subMenu,t)),null!=i&&n.push(i)}})),n},t.prototype.getStockMenuItem=function(e,t){var o=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),i=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();switch(e){case"pinSubMenu":return{name:n("pinColumn","Pin Column"),icon:l._.createIconNoSpan("menuPin",this.gridOptionsWrapper,null),subMenu:["pinLeft","pinRight","clearPinned"]};case"pinLeft":return{name:n("pinLeft","Pin Left"),action:function(){return o.columnModel.setColumnPinned(t,l.gTE.PINNED_LEFT,"contextMenu")},checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:n("pinRight","Pin Right"),action:function(){return o.columnModel.setColumnPinned(t,l.gTE.PINNED_RIGHT,"contextMenu")},checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:n("noPin","No Pin"),action:function(){return o.columnModel.setColumnPinned(t,null,"contextMenu")},checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return l.O3h.assertRegistered(l.GXE.RowGroupingModule,"Aggregation from Menu")?{name:n("valueAggregation","Value Aggregation"),icon:l._.createIconNoSpan("menuValue",this.gridOptionsWrapper,null),subMenu:this.createAggregationSubMenu(t)}:null;case"autoSizeThis":return{name:n("autosizeThiscolumn","Autosize This Column"),action:function(){return o.columnModel.autoSizeColumn(t,i,"contextMenu")}};case"autoSizeAll":return{name:n("autosizeAllColumns","Autosize All Columns"),action:function(){return o.columnModel.autoSizeAllColumns(i,"contextMenu")}};case"rowGroup":return{name:n("groupBy","Group by")+" "+l._.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return o.columnModel.addRowGroupColumn(t,"contextMenu")},icon:l._.createIconNoSpan("menuAddRowGroup",this.gridOptionsWrapper,null)};case"rowUnGroup":return{name:n("ungroupBy","Un-Group by")+" "+l._.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return o.columnModel.removeRowGroupColumn(t,"contextMenu")},icon:l._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsWrapper,null)};case"resetColumns":return{name:n("resetColumns","Reset Columns"),action:function(){return o.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:n("expandAll","Expand All"),action:function(){return o.gridApi.expandAll()}};case"contractAll":return{name:n("collapseAll","Collapse All"),action:function(){return o.gridApi.collapseAll()}};case"copy":return l.O3h.assertRegistered(l.GXE.ClipboardModule,"Copy from Menu")?{name:n("copy","Copy"),shortcut:n("ctrlC","Ctrl+C"),icon:l._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.copyToClipboard(!1)}}:null;case"copyWithHeaders":return l.O3h.assertRegistered(l.GXE.ClipboardModule,"Copy with Headers from Menu")?{name:n("copyWithHeaders","Copy with Headers"),icon:l._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.copyToClipboard(!0)}}:null;case"paste":return l.O3h.assertRegistered(l.GXE.ClipboardModule,"Paste from Clipboard")?{name:n("paste","Paste"),shortcut:n("ctrlV","Ctrl+V"),disabled:!0,icon:l._.createIconNoSpan("clipboardPaste",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.pasteFromClipboard()}}:null;case"export":var r=[],s=l.O3h.isRegistered(l.GXE.CsvExportModule),a=l.O3h.isRegistered(l.GXE.ExcelExportModule);return!this.gridOptionsWrapper.isSuppressCsvExport()&&s&&r.push("csvExport"),!this.gridOptionsWrapper.isSuppressExcelExport()&&a&&r.push("excelExport"),{name:n("export","Export"),subMenu:r,icon:l._.createIconNoSpan("save",this.gridOptionsWrapper,null)};case"csvExport":return{name:n("csvExport","CSV Export"),icon:l._.createIconNoSpan("csvExport",this.gridOptionsWrapper,null),action:function(){return o.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:n("excelExport","Excel Export"),icon:l._.createIconNoSpan("excelExport",this.gridOptionsWrapper,null),action:function(){return o.gridApi.exportDataAsExcel()}};case"separator":return"separator";default:var u=this.getChartItems(e);return u||(console.warn("AG Grid: unknown menu item type "+e),null)}},t.prototype.getChartItems=function(e){var t=this,o=this.gridOptionsWrapper.getLocaleTextFunc(),n=function(e,n,i){return{name:o(e,n),action:function(){return t.chartService.createPivotChart({chartType:i})}}},i=function(e,n,i){return{name:o(e,n),action:function(){return t.chartService.createChartFromCurrentRange(i)}}};switch(e){case"pivotChart":return{name:o("pivotChart","Pivot Chart"),subMenu:["pivotColumnChart","pivotBarChart","pivotPieChart","pivotLineChart","pivotXYChart","pivotAreaChart"],icon:l._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"chartRange":return{name:o("chartRange","Chart Range"),subMenu:["rangeColumnChart","rangeBarChart","rangePieChart","rangeLineChart","rangeXYChart","rangeAreaChart","rangeHistogramChart"],icon:l._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"pivotColumnChart":return{name:o("columnChart","Column"),subMenu:["pivotGroupedColumn","pivotStackedColumn","pivotNormalizedColumn"]};case"pivotGroupedColumn":return n("groupedColumn","Grouped&lrm;",l.oXM.GroupedColumn);case"pivotStackedColumn":return n("stackedColumn","Stacked&lrm;",l.oXM.StackedColumn);case"pivotNormalizedColumn":return n("normalizedColumn","100% Stacked&lrm;",l.oXM.NormalizedColumn);case"rangeColumnChart":return{name:o("columnChart","Column"),subMenu:["rangeGroupedColumn","rangeStackedColumn","rangeNormalizedColumn"]};case"rangeGroupedColumn":return i("groupedColumn","Grouped&lrm;",l.oXM.GroupedColumn);case"rangeStackedColumn":return i("stackedColumn","Stacked&lrm;",l.oXM.StackedColumn);case"rangeNormalizedColumn":return i("normalizedColumn","100% Stacked&lrm;",l.oXM.NormalizedColumn);case"pivotBarChart":return{name:o("barChart","Bar"),subMenu:["pivotGroupedBar","pivotStackedBar","pivotNormalizedBar"]};case"pivotGroupedBar":return n("groupedBar","Grouped&lrm;",l.oXM.GroupedBar);case"pivotStackedBar":return n("stackedBar","Stacked&lrm;",l.oXM.StackedBar);case"pivotNormalizedBar":return n("normalizedBar","100% Stacked&lrm;",l.oXM.NormalizedBar);case"rangeBarChart":return{name:o("barChart","Bar"),subMenu:["rangeGroupedBar","rangeStackedBar","rangeNormalizedBar"]};case"rangeGroupedBar":return i("groupedBar","Grouped&lrm;",l.oXM.GroupedBar);case"rangeStackedBar":return i("stackedBar","Stacked&lrm;",l.oXM.StackedBar);case"rangeNormalizedBar":return i("normalizedBar","100% Stacked&lrm;",l.oXM.NormalizedBar);case"pivotPieChart":return{name:o("pieChart","Pie"),subMenu:["pivotPie","pivotDoughnut"]};case"pivotPie":return n("pie","Pie&lrm;",l.oXM.Pie);case"pivotDoughnut":return n("doughnut","Doughnut&lrm;",l.oXM.Doughnut);case"rangePieChart":return{name:o("pieChart","Pie"),subMenu:["rangePie","rangeDoughnut"]};case"rangePie":return i("pie","Pie&lrm;",l.oXM.Pie);case"rangeDoughnut":return i("doughnut","Doughnut&lrm;",l.oXM.Doughnut);case"pivotLineChart":return n("line","Line&lrm;",l.oXM.Line);case"rangeLineChart":return i("line","Line&lrm;",l.oXM.Line);case"pivotXYChart":return{name:o("xyChart","X Y (Scatter)"),subMenu:["pivotScatter","pivotBubble"]};case"pivotScatter":return n("scatter","Scatter&lrm;",l.oXM.Scatter);case"pivotBubble":return n("bubble","Bubble&lrm;",l.oXM.Bubble);case"rangeXYChart":return{name:o("xyChart","X Y (Scatter)"),subMenu:["rangeScatter","rangeBubble"]};case"rangeScatter":return i("scatter","Scatter&lrm;",l.oXM.Scatter);case"rangeBubble":return i("bubble","Bubble&lrm;",l.oXM.Bubble);case"pivotAreaChart":return{name:o("areaChart","Area"),subMenu:["pivotArea","pivotStackedArea","pivotNormalizedArea"]};case"pivotArea":return n("area","Area&lrm;",l.oXM.Area);case"pivotStackedArea":return n("stackedArea","Stacked&lrm;",l.oXM.StackedArea);case"pivotNormalizedArea":return n("normalizedArea","100% Stacked&lrm;",l.oXM.NormalizedArea);case"rangeAreaChart":return{name:o("areaChart","Area"),subMenu:["rangeArea","rangeStackedArea","rangeNormalizedArea"]};case"rangeArea":return i("area","Area&lrm;",l.oXM.Area);case"rangeStackedArea":return i("stackedArea","Stacked&lrm;",l.oXM.StackedArea);case"rangeNormalizedArea":return i("normalizedArea","100% Stacked&lrm;",l.oXM.NormalizedArea);case"rangeHistogramChart":return i("histogramChart","Histogram&lrm;",l.oXM.Histogram);default:return null}},t.prototype.createAggregationSubMenu=function(e){var t,o=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),i=e.isValueActive(),r=this.aggFuncService.getFuncNames(e);if(e.isPrimary())t=e;else{var s=e.getColDef().pivotValueColumn;t=l._.exists(s)?s:void 0}var a=[];return r.forEach((function(e){a.push({name:n(e,e),action:function(){o.columnModel.setColumnAggFunc(t,e,"contextMenu"),o.columnModel.addValueColumn(t,"contextMenu")},checked:i&&t.getAggFunc()===e})})),a},Pt([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),Pt([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),Pt([(0,l.FiY)("clipboardService")],t.prototype,"clipboardService",void 0),Pt([(0,l.FiY)("aggFuncService")],t.prototype,"aggFuncService",void 0),Pt([(0,l.FiY)("chartService")],t.prototype,"chartService",void 0),t=Pt([(0,l.Vu6)("menuItemMapper")],t)}(l.AS9),Dt={moduleName:l.GXE.MenuModule,beans:[vt,_t,Mt],dependantModules:[y]},wt=o(7073),Tt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ot=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.navigatorApiFailed=!1,t}return Tt(t,e),t.prototype.init=function(){var e=this;this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()===l.gTE.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(t){e.gridCtrl=t.gridCtrl}))},t.prototype.pasteFromClipboard=function(){var e=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsWrapper.isSuppressClipboardApi()&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(t){l._.doOnce((function(){console.warn(t),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")}),"clipboardApiError"),e.navigatorApiFailed=!0,e.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},t.prototype.pasteFromClipboardLegacy=function(){var e=this;this.executeOnTempElement((function(e){return e.focus({preventScroll:!0})}),(function(t){var o=t.value;e.processClipboardData(o)}))},t.prototype.processClipboardData=function(e){var t=this;if(null!=e){var o=l._.stringToArray(e,this.gridOptionsWrapper.getClipboardDeliminator()),n=this.gridOptionsWrapper.getProcessDataFromClipboardFunc();if(n&&(o=n({data:o})),null!=o){this.gridOptionsWrapper.isSuppressLastEmptyLineOnPaste()&&this.removeLastLineIfBlank(o);this.doPasteOperation((function(e,n,i,r){t.rangeService&&t.rangeService.isMoreThanOneCell()&&!t.hasOnlyOneValueToPaste(o)?t.pasteIntoActiveRange(o,e,n,r):t.pasteStartingFromFocusedCell(o,e,n,i,r)}))}}},t.prototype.doPasteOperation=function(e){var t,o=this.gridOptionsWrapper.getApi(),n=this.gridOptionsWrapper.getColumnApi(),i="clipboard";if(this.eventService.dispatchEvent({type:l.zW2.EVENT_PASTE_START,api:o,columnApi:n,source:i}),this.clientSideRowModel){var r=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();t=new l.Dkq(r,this.clientSideRowModel.getRootNode())}var s={},a=[],u=this.focusService.getFocusedCell();e(s,a,u,t),t&&this.clientSideRowModel.doAggregate(t),this.rowRenderer.refreshCells(),this.dispatchFlashCells(s),this.fireRowChanged(a),u&&this.focusService.setFocusedCell(u.rowIndex,u.column,u.rowPinned,!0),this.eventService.dispatchEvent({type:l.zW2.EVENT_PASTE_END,api:o,columnApi:n,source:i})},t.prototype.pasteIntoActiveRange=function(e,t,o,n){var i=this,r=this.getRangeSize()%e.length!=0,s=0,a=0;this.iterateActiveRanges(!1,(function(u,c,p,d){if(d-s>=e.length){if(r)return;s+=a,a=0}var h=e[d-s];o.push(c);var f=i.gridOptionsWrapper.getProcessCellFromClipboardFunc();p.forEach((function(e,o){if(e.isCellEditable(c)&&!e.isSuppressPaste(c)){o>=h.length&&(o%=h.length);var r=i.processCell(c,e,h[o],l.gTE.EXPORT_TYPE_DRAG_COPY,f);c.setDataValue(e,r,l.gTE.SOURCE_PASTE),n&&n.addParentNode(c.parent,[e]);var s=i.cellPositionUtils.createIdFromValues(u.rowIndex,e,u.rowPinned);t[s]=!0}})),a++}))},t.prototype.pasteStartingFromFocusedCell=function(e,t,o,n,i){if(n){var r={rowIndex:n.rowIndex,rowPinned:n.rowPinned},s=this.columnModel.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,o,t,i):this.pasteMultipleValues(e,r,o,s,t,l.gTE.EXPORT_TYPE_CLIPBOARD,i)}},t.prototype.isPasteSingleValueIntoRange=function(e){return this.hasOnlyOneValueToPaste(e)&&null!=this.rangeService&&!this.rangeService.isEmpty()},t.prototype.pasteSingleValueIntoRange=function(e,t,o,n){var i=this,r=e[0][0];this.iterateActiveRanges(!1,(function(e,s,a){t.push(s),a.forEach((function(e){return i.updateCellValue(s,e,r,o,l.gTE.EXPORT_TYPE_CLIPBOARD,n)}))}))},t.prototype.hasOnlyOneValueToPaste=function(e){return 1===e.length&&1===e[0].length},t.prototype.copyRangeDown=function(){var e=this;if(this.rangeService&&!this.rangeService.isEmpty()){var t=[];this.doPasteOperation((function(o,n,i,r){var s=e.gridOptionsWrapper.getProcessCellForClipboardFunc(),a=e.gridOptionsWrapper.getProcessCellFromClipboardFunc();e.iterateActiveRanges(!0,(function(i,u,c){t.length?(n.push(u),c.forEach((function(n,s){if(n.isCellEditable(u)&&!n.isSuppressPaste(u)){var c=e.processCell(u,n,t[s],l.gTE.EXPORT_TYPE_DRAG_COPY,a);u.setDataValue(n,c,l.gTE.SOURCE_PASTE),r&&r.addParentNode(u.parent,[n]);var p=e.cellPositionUtils.createIdFromValues(i.rowIndex,n,i.rowPinned);o[p]=!0}}))):c.forEach((function(o){var n=e.processCell(u,o,e.valueService.getValue(o,u),l.gTE.EXPORT_TYPE_DRAG_COPY,s);t.push(n)}))}))}))}},t.prototype.removeLastLineIfBlank=function(e){var t=l._.last(e);t&&1===t.length&&""===t[0]&&l._.removeFromArray(e,t)},t.prototype.fireRowChanged=function(e){var t=this;this.gridOptionsWrapper.isFullRowEdit()&&e.forEach((function(e){var o={type:l.zW2.EVENT_ROW_VALUE_CHANGED,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned,context:t.gridOptionsWrapper.getContext(),api:t.gridOptionsWrapper.getApi(),columnApi:t.gridOptionsWrapper.getColumnApi()};t.eventService.dispatchEvent(o)}))},t.prototype.pasteMultipleValues=function(e,t,o,n,i,r,s){var a=this,l=t,u=null!=this.clientSideRowModel&&!this.gridOptionsWrapper.isTreeData();e.forEach((function(e){var t=function(){for(;;){if(!l)return null;var e=a.rowPositionUtils.getRowNode(l);if(l=a.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==e)return null;if(!(e.detail||e.footer||u&&e.group))return e}}();t&&(e.forEach((function(e,o){return a.updateCellValue(t,n[o],e,i,r,s)})),o.push(t))}))},t.prototype.updateCellValue=function(e,t,o,n,i,r){if(e&&t&&t.isCellEditable(e)&&!t.isSuppressPaste(e)){var s=this.processCell(e,t,o,i,this.gridOptionsWrapper.getProcessCellFromClipboardFunc());e.setDataValue(t,s,l.gTE.SOURCE_PASTE),n[this.cellPositionUtils.createIdFromValues(e.rowIndex,t,e.rowPinned)]=!0,r&&r.addParentNode(e.parent,[t])}},t.prototype.copyToClipboard=function(e){this.logger.log("copyToClipboard: includeHeaders = "+e),null==e&&(e=this.gridOptionsWrapper.isCopyHeadersToClipboard());var t=!this.selectionService.isEmpty()&&!this.gridOptionsWrapper.isSuppressCopyRowsToClipboard();this.rangeService&&this.rangeService.isMoreThanOneCell()?this.copySelectedRangeToClipboard(e):t?this.copySelectedRowsToClipboard(e):this.focusService.isAnyCellFocused()?this.copyFocusedCellToClipboard(e):this.copySelectedRangeToClipboard(e)},t.prototype.iterateActiveRanges=function(e,t,o){var n=this;if(this.rangeService&&!this.rangeService.isEmpty()){var i=this.rangeService.getCellRanges();e?this.iterateActiveRange(i[0],t,o,!0):i.forEach((function(e,r){return n.iterateActiveRange(e,t,o,r===i.length-1)}))}},t.prototype.iterateActiveRange=function(e,t,o,n){if(this.rangeService){var i=this.rangeService.getRangeStartRow(e),r=this.rangeService.getRangeEndRow(e);o&&e.columns&&o(e.columns);for(var s=0,a=!1;!a&&null!=i;){var l=this.rowPositionUtils.getRowNode(i);a=this.rowPositionUtils.sameRow(i,r),t(i,l,e.columns,s++,a&&n),i=this.cellNavigationService.getRowBelow(i)}}},t.prototype.copySelectedRangeToClipboard=function(e){var t=this;if(void 0===e&&(e=!1),this.rangeService&&!this.rangeService.isEmpty()){var o=this.gridOptionsWrapper.getClipboardDeliminator(),n="",i={};this.iterateActiveRanges(!1,(function(e,r,s,a,u){var c=t.gridOptionsWrapper.getProcessCellForClipboardFunc();s.forEach((function(s,a){var u=t.valueService.getValue(s,r),p=t.processCell(r,s,u,l.gTE.EXPORT_TYPE_CLIPBOARD,c);0!=a&&(n+=o),l._.exists(p)&&(n+=p);var d=t.cellPositionUtils.createIdFromValues(e.rowIndex,s,e.rowPinned);i[d]=!0})),u||(n+="\r\n")}),(function(i){if(e){var r=t.gridOptionsWrapper.getProcessHeaderForClipboardFunc(),s=i.map((function(e){var o=t.columnModel.getDisplayNameForColumn(e,"clipboard",!0);return t.processHeader(e,o,r)||""}));n+=s.join(o)+"\r\n"}})),this.copyDataToClipboard(n),this.dispatchFlashCells(i)}},t.prototype.copyFocusedCellToClipboard=function(e){var t;void 0===e&&(e=!1);var o=this.focusService.getFocusedCell();if(null!=o){var n,i=this.cellPositionUtils.createId(o),r={rowPinned:o.rowPinned,rowIndex:o.rowIndex},s=this.rowPositionUtils.getRowNode(r),a=o.column,u=this.valueService.getValue(a,s),c=this.processCell(s,a,u,l.gTE.EXPORT_TYPE_CLIPBOARD,this.gridOptionsWrapper.getProcessCellForClipboardFunc());if(c=l._.missing(c)?"":c.toString(),e){var p=this.columnModel.getDisplayNameForColumn(a,"clipboard",!0);n=this.processHeader(a,p,this.gridOptionsWrapper.getProcessHeaderForClipboardFunc())+"\r\n"+c}else n=c;this.copyDataToClipboard(n),this.dispatchFlashCells(((t={})[i]=!0,t))}},t.prototype.dispatchFlashCells=function(e){var t=this;window.setTimeout((function(){var o={type:l.zW2.EVENT_FLASH_CELLS,cells:e,api:t.gridApi,columnApi:t.columnApi};t.eventService.dispatchEvent(o)}),0)},t.prototype.processCell=function(e,t,o,n,i){return i?i({column:t,node:e,value:o,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:n}):o},t.prototype.processHeader=function(e,t,o){return o?o({column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):t},t.prototype.copySelectedRowsToClipboard=function(e,t){void 0===e&&(e=!1);var o={columnKeys:t,skipColumnHeaders:!e,suppressQuotes:!0,columnSeparator:this.gridOptionsWrapper.getClipboardDeliminator(),onlySelected:!0,processCellCallback:this.gridOptionsWrapper.getProcessCellForClipboardFunc(),processHeaderCallback:this.gridOptionsWrapper.getProcessHeaderForClipboardFunc()},n=this.csvCreator.getDataAsCsv(o);this.copyDataToClipboard(n)},t.prototype.copyDataToClipboard=function(e){var t=this,o=this.gridOptionsWrapper.getSendToClipboardFunc();o?o({data:e}):!this.gridOptionsWrapper.isSuppressClipboardApi()&&navigator.clipboard?navigator.clipboard.writeText(e).catch((function(o){l._.doOnce((function(){console.warn(o),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")}),"clipboardApiError"),t.copyDataToClipboardLegacy(e)})):this.copyDataToClipboardLegacy(e)},t.prototype.copyDataToClipboardLegacy=function(e){var t=this;this.executeOnTempElement((function(o){var n=t.gridOptionsWrapper.getDocument().activeElement;o.value=e||" ",o.select(),o.focus({preventScroll:!0}),document.execCommand("copy")||console.warn("ag-grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=n&&null!=n.focus&&n.focus({preventScroll:!0})}))},t.prototype.executeOnTempElement=function(e,t){var o=this.gridOptionsWrapper.getDocument(),n=o.createElement("textarea");n.style.width="1px",n.style.height="1px",n.style.top=o.documentElement.scrollTop+"px",n.style.left=o.documentElement.scrollLeft+"px",n.style.position="absolute",n.style.opacity="0";var i=this.gridCtrl.getGui();i.appendChild(n);try{e(n)}catch(e){console.warn("ag-grid: Browser does not support document.execCommand('copy') for clipboard operations")}t?window.setTimeout((function(){t(n),i.removeChild(n)}),100):i.removeChild(n)},t.prototype.getRangeSize=function(){var e=this.rangeService.getCellRanges(),t=0,o=0;return e.length>0&&(t=this.rangeService.getRangeStartRow(e[0]).rowIndex,o=this.rangeService.getRangeEndRow(e[0]).rowIndex),t-o+1},Ot([(0,l.fsG)("csvCreator")],t.prototype,"csvCreator",void 0),Ot([(0,l.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),Ot([(0,l.fsG)("selectionService")],t.prototype,"selectionService",void 0),Ot([(0,l.FiY)("rangeService")],t.prototype,"rangeService",void 0),Ot([(0,l.fsG)("rowModel")],t.prototype,"rowModel",void 0),Ot([(0,l.fsG)("ctrlsService")],t.prototype,"ctrlsService",void 0),Ot([(0,l.fsG)("valueService")],t.prototype,"valueService",void 0),Ot([(0,l.fsG)("focusService")],t.prototype,"focusService",void 0),Ot([(0,l.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),Ot([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),Ot([(0,l.fsG)("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Ot([(0,l.fsG)("columnApi")],t.prototype,"columnApi",void 0),Ot([(0,l.fsG)("gridApi")],t.prototype,"gridApi",void 0),Ot([(0,l.fsG)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Ot([(0,l.fsG)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Ot([l.NqP],t.prototype,"init",null),t=Ot([(0,l.Vu6)("clipboardService")],t)}(l.AS9),It={moduleName:l.GXE.ClipboardModule,beans:[Gt],dependantModules:[y,wt.jM]},Lt=function(){function e(e,t){this.rowModel=e,this.filterParams=t}return e.prototype.extractUniqueValues=function(e){var t=this,o=new Set,n=this.filterParams.colDef.keyCreator;return this.rowModel.forEachLeafNode((function(i){if(i.data&&e(i)){var r=t.filterParams.valueGetter(i);if(n){var s={value:r,colDef:t.filterParams.colDef,column:t.filterParams.column,node:i,data:i.data,api:t.filterParams.api,columnApi:t.filterParams.columnApi,context:t.filterParams.context};r=n(s)}null!=(r=l._.makeNull(r))&&Array.isArray(r)?l._.forEach(r,(function(e){var t=l._.toStringOrNull(l._.makeNull(e));o.add(t)})):o.add(l._.toStringOrNull(r))}})),l._.values(o)},e}();!function(e){e[e.PROVIDED_LIST=0]="PROVIDED_LIST",e[e.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",e[e.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(pe||(pe={}));var Ft=function(){function e(e,t,o,n){var i=this;this.filterParams=e,this.setIsLoading=t,this.valueFormatterService=o,this.translate=n,this.localEventService=new l.POd,this.miniFilterText=null,this.providedValues=null,this.allValues=[],this.availableValues=new Set,this.displayedValues=[],this.selectedValues=new Set,this.initialised=!1;var r=e.column,s=e.colDef,a=e.textFormatter,u=e.doesRowPassOtherFilter,c=e.suppressSorting,p=e.comparator,d=e.rowModel,h=e.values;this.column=r,this.colDef=s,this.formatter=a||l.QVL.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=u,this.suppressSorting=c||!1,this.comparator=p||s.comparator||l._.defaultComparator,d.getType()===l.gTE.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideValuesExtractor=new Lt(d,this.filterParams)),null==h?this.valuesType=pe.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(h)?pe.PROVIDED_LIST:pe.PROVIDED_CALLBACK,this.providedValues=h),this.updateAllValues().then((function(e){return i.resetSelectionState(e||[])}))}return e.prototype.addEventListener=function(e,t,o){this.localEventService.addEventListener(e,t,o)},e.prototype.removeEventListener=function(e,t,o){this.localEventService.removeEventListener(e,t,o)},e.prototype.refreshValues=function(e){void 0===e&&(e=!0);var t=this.getModel();return this.updateAllValues(),this.setModel(e?t:null)},e.prototype.overrideValues=function(e,t){var o=this;return void 0===t&&(t=!0),new l.j_S((function(n){o.allValuesPromise.then((function(){o.valuesType=pe.PROVIDED_LIST,o.providedValues=e,o.refreshValues(t).then((function(){return n()}))}))}))},e.prototype.refreshAfterAnyFilterChanged=function(){var e=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(t){return e.updateAvailableValues(t||[])})):l.j_S.resolve()},e.prototype.isInitialised=function(){return this.initialised},e.prototype.updateAllValues=function(){var e=this;return this.allValuesPromise=new l.j_S((function(t){switch(e.valuesType){case pe.TAKEN_FROM_GRID_VALUES:case pe.PROVIDED_LIST:var o=e.valuesType===pe.TAKEN_FROM_GRID_VALUES?e.getValuesFromRows(!1):l._.toStrings(e.providedValues),n=e.sortValues(o||[]);e.allValues=n,t(n);break;case pe.PROVIDED_CALLBACK:e.setIsLoading(!0);var i=e.providedValues,r={success:function(o){var n=l._.toStrings(o);e.setIsLoading(!1);var i=e.sortValues(n||[]);e.allValues=i,t(i)},colDef:e.colDef};window.setTimeout((function(){return i(r)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(t){return e.updateAvailableValues(t||[])})).then((function(){return e.initialised=!0})),this.allValuesPromise},e.prototype.setValuesType=function(e){this.valuesType=e},e.prototype.getValuesType=function(){return this.valuesType},e.prototype.isValueAvailable=function(e){return this.availableValues.has(e)},e.prototype.showAvailableOnly=function(){return this.valuesType===pe.TAKEN_FROM_GRID_VALUES&&!this.filterParams.suppressRemoveEntries},e.prototype.updateAvailableValues=function(t){var o=this.showAvailableOnly()?this.sortValues(this.getValuesFromRows(!0)):t;this.availableValues=l._.convertToSet(o),this.localEventService.dispatchEvent({type:e.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues()},e.prototype.sortValues=function(e){return this.suppressSorting?e:!this.filterParams.excelMode||e.indexOf(null)<0?e.sort(this.comparator):l._.filter(e,(function(e){return null!=e})).sort(this.comparator).concat(null)},e.prototype.getValuesFromRows=function(e){var t=this;if(void 0===e&&(e=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),[];return this.clientSideValuesExtractor.extractUniqueValues((function(o){return!e||t.doesRowPassOtherFilters(o)}))},e.prototype.setMiniFilter=function(e){return e=l._.makeNull(e),this.miniFilterText!==e&&(this.miniFilterText=e,this.updateDisplayedValues(),!0)},e.prototype.getMiniFilter=function(){return this.miniFilterText},e.prototype.updateDisplayedValues=function(){var e=this;if(null!=this.miniFilterText){this.displayedValues=[];var t=(this.formatter(this.miniFilterText)||"").toUpperCase(),o=function(e){return null!=e&&e.toUpperCase().indexOf(t)>=0};this.availableValues.forEach((function(t){if(null==t)e.filterParams.excelMode&&o(e.translate("blanks"))&&e.displayedValues.push(t);else{var n=e.formatter(t),i=e.valueFormatterService.formatValue(e.column,null,null,n,e.filterParams.valueFormatter,!1);(o(n)||o(i))&&e.displayedValues.push(t)}}))}else this.displayedValues=l._.values(this.availableValues)},e.prototype.getDisplayedValueCount=function(){return this.displayedValues.length},e.prototype.getDisplayedValue=function(e){return this.displayedValues[e]},e.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedValues.size>0:this.allValues.length!==this.selectedValues.size},e.prototype.getUniqueValueCount=function(){return this.allValues.length},e.prototype.getUniqueValue=function(e){return this.allValues[e]},e.prototype.getValues=function(){return this.allValues.slice()},e.prototype.selectAllMatchingMiniFilter=function(e){var t=this;void 0===e&&(e=!1),null==this.miniFilterText?this.selectedValues=l._.convertToSet(this.allValues):(e&&this.selectedValues.clear(),l._.forEach(this.displayedValues,(function(e){return t.selectedValues.add(e)})))},e.prototype.deselectAllMatchingMiniFilter=function(){var e=this;null==this.miniFilterText?this.selectedValues.clear():l._.forEach(this.displayedValues,(function(t){return e.selectedValues.delete(t)}))},e.prototype.selectValue=function(e){this.selectedValues.add(e)},e.prototype.deselectValue=function(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayedValues),this.selectedValues.delete(e)},e.prototype.isValueSelected=function(e){return this.selectedValues.has(e)},e.prototype.isEverythingVisibleSelected=function(){var e=this;return l._.filter(this.displayedValues,(function(t){return e.isValueSelected(t)})).length===this.displayedValues.length},e.prototype.isNothingVisibleSelected=function(){var e=this;return 0===l._.filter(this.displayedValues,(function(t){return e.isValueSelected(t)})).length},e.prototype.getModel=function(){return this.hasSelections()?l._.values(this.selectedValues):null},e.prototype.setModel=function(e){var t=this;return this.allValuesPromise.then((function(o){if(null==e)t.resetSelectionState(o||[]);else{t.selectedValues.clear();var n=l._.convertToSet(o||[]);l._.forEach(e,(function(e){n.has(e)&&t.selectedValues.add(e)}))}}))},e.prototype.resetSelectionState=function(e){this.filterParams.defaultToNothingSelected?this.selectedValues.clear():this.selectedValues=l._.convertToSet(e||[])},e.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",e}(),xt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Nt=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Rt=function(e){function t(o,n,i,r){var s=e.call(this,t.TEMPLATE)||this;return s.value=o,s.params=n,s.translate=i,s.isSelected=r,s}return xt(t,e),t.prototype.init=function(){var e=this;this.render(),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.onValueChange((function(o){var n=o||!1;e.isSelected=n;var i={type:t.EVENT_SELECTION_CHANGED,isSelected:n};e.dispatchEvent(i)}))},t.prototype.toggleSelected=function(){this.isSelected=!this.isSelected,this.eCheckbox.setValue(this.isSelected)},t.prototype.render=function(){var e=this.params.column,t=this.value,o=null;if("function"==typeof t?t=t():o=this.getFormattedValue(this.params,e,t),this.params.showTooltips){var n=null!=o?o:t;this.setTooltip(n)}var i={value:t,valueFormatted:o,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};this.renderCell(i)},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="setFilterValue",t.colDef=this.getComponentHolder(),t},t.prototype.getFormattedValue=function(e,t,o){var n=e&&e.valueFormatter;return this.valueFormatterService.formatValue(t,null,null,o,n,!1)},t.prototype.renderCell=function(e){var t=this,o=this.userComponentFactory.newSetFilterCellRenderer(this.params,e);if(null!=o)o.then((function(e){e&&(t.eCheckbox.setLabel(e.getGui()),t.addDestroyFunc((function(){return t.destroyBean(e)})))}));else{var n=null==e.valueFormatted?e.value:e.valueFormatted;this.eCheckbox.setLabel(null==n?this.translate("blanks"):n)}},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',Nt([(0,l.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Nt([(0,l.fsG)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Nt([(0,l.cqo)("eCheckbox")],t.prototype,"eCheckbox",void 0),Nt([l.NqP],t.prototype,"init",null),t}(l.wA2),Vt={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},kt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wt=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Bt=function(e){function t(){var t=e.call(this,"setFilter")||this;return t.valueModel=null,t.setFilterParams=null,t.virtualList=null,t.appliedModelValues=null,t}return kt(t,e),t.prototype.postConstruct=function(){e.prototype.postConstruct.call(this),this.positionableFeature=new l.Gxm(this.eSetFilterList,{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},t.prototype.handleKeyDown=function(t){if(e.prototype.handleKeyDown.call(this,t),!t.defaultPrevented)switch(t.which||t.keyCode){case l.VDZ.SPACE:this.handleKeySpace(t);break;case l.VDZ.ENTER:this.handleKeyEnter(t)}},t.prototype.handleKeySpace=function(e){if(this.eSetFilterList.contains(document.activeElement)&&this.virtualList){var t=this.virtualList.getLastFocusedRow();if(null!=t){var o=this.virtualList.getComponentAt(t);o&&(e.preventDefault(),o.toggleSelected())}}},t.prototype.handleKeyEnter=function(e){this.setFilterParams&&this.setFilterParams.excelMode&&(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModelAndRefresh=function(e){var t=this;return this.valueModel?this.valueModel.setModel(e).then((function(){return t.refresh()})):l.j_S.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){if(this.setMiniFilter(null),e instanceof Array){l._.doOnce((function(){return console.warn("AG Grid: The Set Filter Model is no longer an array and models as arrays are deprecated. Please check the docs on what the set filter model looks like. Future versions of AG Grid will have the array version of the model removed.")}),"setFilter.modelAsArray")}var t=null==e?null:e instanceof Array?e:e.values;return this.setModelAndRefresh(t)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?this.gridOptionsWrapper.isEnableOldSetFilterModel()?e:{values:e,filterType:this.getFilterType()}:null},t.prototype.getModel=function(){return e.prototype.getModel.call(this)},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&l._.areEqual(e.values,t.values)},t.prototype.setParams=function(t){var o=this;this.applyExcelModeOptions(t),e.prototype.setParams.call(this,t),this.checkSetFilterDeprecatedParams(t),this.setFilterParams=t,this.valueModel=new Ft(t,(function(e){return o.showOrHideLoadingScreen(e)}),this.valueFormatterService,(function(e){return o.translateForSetFilter(e)})),this.initialiseFilterBodyUi(),t.rowModel.getType()!==l.gTE.ROW_MODEL_TYPE_CLIENT_SIDE||t.values||t.suppressSyncValuesAfterDataChange||this.addEventListenersForDataChanges()},t.prototype.applyExcelModeOptions=function(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500))},t.prototype.checkSetFilterDeprecatedParams=function(e){if(e.syncValuesLikeExcel){l._.doOnce((function(){return console.warn("AG Grid: since version 22.x, the Set Filter param syncValuesLikeExcel is no longer used as this is the default behaviour. To turn this default behaviour off, use the param suppressSyncValuesAfterDataChange")}),"syncValuesLikeExcel deprecated")}if(e.selectAllOnMiniFilter){l._.doOnce((function(){return console.warn("AG Grid: since version 22.x, the Set Filter param selectAllOnMiniFilter is no longer used as this is the default behaviour.")}),"selectAllOnMiniFilter deprecated")}if(e.suppressSyncValuesAfterDataChange){l._.doOnce((function(){return console.warn("AG Grid: since version 23.1, the Set Filter param suppressSyncValuesAfterDataChange has been deprecated and will be removed in a future major release.")}),"suppressSyncValuesAfterDataChange deprecated")}if(e.suppressRemoveEntries){l._.doOnce((function(){return console.warn("AG Grid: since version 23.1, the Set Filter param suppressRemoveEntries has been deprecated and will be removed in a future major release.")}),"suppressRemoveEntries deprecated")}},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.addManagedListener(this.eventService,l.zW2.EVENT_ROW_DATA_UPDATED,(function(){return e.syncAfterDataChange()})),this.addManagedListener(this.eventService,l.zW2.EVENT_CELL_VALUE_CHANGED,(function(t){e.setFilterParams&&t.column===e.setFilterParams.column&&e.syncAfterDataChange()}))},t.prototype.syncAfterDataChange=function(e,t){var o=this;if(void 0===e&&(e=!0),void 0===t&&(t=!0),!this.valueModel)throw new Error("Value model has not been created.");var n=l.j_S.resolve();return e?n=this.valueModel.refreshValues(t):t||(n=this.valueModel.setModel(null)),n.then((function(){o.refresh(),o.onBtApply(!1,!0)}))},t.prototype.setLoading=function(e){l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, setLoading has been deprecated. The loading screen is displayed automatically when the set filter is retrieving values.")}),"setFilter.setLoading"),this.showOrHideLoadingScreen(e)},t.prototype.showOrHideLoadingScreen=function(e){l._.setDisplayed(this.eFilterLoading,e)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.virtualList=this.createBean(new l.CPJ("filter")),o=this.getRefElement("eSetFilterList");o&&o.appendChild(t.getGui());var n,i=this.setFilterParams.cellHeight;null!=i&&t.setRowHeight(i),t.setComponentCreator((function(t){return e.createSetListItem(t)})),n=this.setFilterParams.suppressSelectAll?new jt(this.valueModel):new Ut(this.valueModel,(function(){return e.isSelectAllSelected()})),t.setModel(n)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)},t.prototype.createSetListItem=function(e){var o,n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return e===t.SELECT_ALL_VALUE?((o=this.createBean(new Rt((function(){return n.getSelectAllLabel()}),this.setFilterParams,(function(e){return n.translateForSetFilter(e)}),this.isSelectAllSelected()))).addEventListener(Rt.EVENT_SELECTION_CHANGED,(function(e){return n.onSelectAll(e.isSelected)})),o):((o=this.createBean(new Rt(e,this.setFilterParams,(function(e){return n.translateForSetFilter(e)}),this.valueModel.isValueSelected(e)))).addEventListener(Rt.EVENT_SELECTION_CHANGED,(function(t){return n.onItemSelected(e,t.isSelected)})),o)},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.eMiniFilter,o=this.gridOptionsWrapper.getLocaleTextFunc();l._.setDisplayed(t.getGui(),!this.setFilterParams.suppressMiniFilter),t.setValue(this.valueModel.getMiniFilter()),t.onValueChange((function(){return e.onMiniFilterInput()})),t.setInputAriaLabel(o("ariaSearchFilterValues","Search filter values")),this.addManagedListener(t.getInputElement(),"keypress",(function(t){return e.onMiniFilterKeyPress(t)}))},t.prototype.afterGuiAttached=function(t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");e.prototype.afterGuiAttached.call(this,t),this.refreshVirtualList(),this.setFilterParams.excelMode&&this.resetUiToActiveModel();var o=this.eMiniFilter;o.setInputPlaceholder(this.translateForSetFilter("searchOoo")),t&&t.suppressFocus||o.getFocusableElement().focus();var n,i=!(!t||"floatingFilter"!==t.container);n=this.gridOptionsWrapper.isEnableRtl()?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0},i?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(n)):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1))},t.prototype.applyModel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var t=e.prototype.applyModel.call(this),o=this.getModel();return this.appliedModelValues=o?l._.reduce(o.values,(function(e,t){return e[String(t)]=!0,e}),{}):null,t},t.prototype.isModelValid=function(e){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==e||e.values.length>0)},t.prototype.doesFilterPass=function(e){var t=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelValues)return!0;var o=this.setFilterParams,n=o.valueGetter,i=o.colDef.keyCreator,r=n(e.node);i&&(r=i({value:r,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e.node,data:e.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}));return r=l._.makeNull(r),Array.isArray(r)?l._.some(r,(function(e){return!0===t.appliedModelValues[l._.makeNull(e)]})):!0===this.appliedModelValues[r]},t.prototype.onNewRowsLoaded=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getValuesType(),t=this.isNewRowsActionKeep();this.syncAfterDataChange(e===pe.TAKEN_FROM_GRID_VALUES,t)},t.prototype.setFilterValues=function(e){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e,this.isNewRowsActionKeep()).then((function(){t.refresh(),t.onUiChanged()}))},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(pe.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange(!0,this.isNewRowsActionKeep())},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){e.refresh(),e.onUiChanged()}))},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout((function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then((function(){return e.refresh()}))}}),0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setMiniFilter(this.eMiniFilter.getValue())&&(this.setFilterParams.applyMiniFilterWhileTyping?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange())},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode?null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel():(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()):this.refresh(),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;l._.setDisplayed(this.eNoMatches,e),l._.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetUiToActiveModel=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null),this.setModelIntoUi(this.getModel()).then((function(){return e.onUiChanged(!1,"prevent")}))},t.prototype.onMiniFilterKeyPress=function(e){!l._.isKeyPressed(e,l.VDZ.ENTER)||this.setFilterParams&&this.setFilterParams.excelMode||this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){if(void 0===e&&(e=!0),!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var t=this;null!=e&&window.setTimeout((function(){if(!t.virtualList)throw new Error("Virtual list has not been created.");t.isAlive()&&t.virtualList.focusRow(e)}),0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter();var t=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(t)},t.prototype.onItemSelected=function(e,t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectValue(e):this.valueModel.deselectValue(e);var o=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(o)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.selectEverything=function(){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, selectEverything has been deprecated. Please use setModel instead.")}),"setFilter.selectEverything"),!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.selectAllMatchingMiniFilter(),this.refresh()},t.prototype.selectNothing=function(){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, selectNothing has been deprecated. Please use setModel instead.")}),"setFilter.selectNothing"),!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.deselectAllMatchingMiniFilter(),this.refresh()},t.prototype.unselectValue=function(e){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, unselectValue has been deprecated. Please use setModel instead.")}),"setFilter.unselectValue"),!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.deselectValue(e),this.refresh()},t.prototype.selectValue=function(e){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, selectValue has been deprecated. Please use setModel instead.")}),"setFilter.selectValue"),!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.selectValue(e),this.refresh()},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh()},t.prototype.isValueSelected=function(e){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, isValueSelected has been deprecated. Please use getModel instead.")}),"setFilter.isValueSelected"),!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.isValueSelected(e)},t.prototype.isEverythingSelected=function(){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, isEverythingSelected has been deprecated. Please use getModel instead.")}),"setFilter.isEverythingSelected"),!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.isEverythingVisibleSelected()},t.prototype.isNothingSelected=function(){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, isNothingSelected has been deprecated. Please use getModel instead.")}),"setFilter.isNothingSelected"),!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.isNothingVisibleSelected()},t.prototype.getUniqueValueCount=function(){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, getUniqueValueCount has been deprecated. Please use getValues instead.")}),"setFilter.getUniqueValueCount"),!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.getUniqueValueCount()},t.prototype.getUniqueValue=function(e){if(l._.doOnce((function(){return console.warn("AG Grid: since version 23.2, getUniqueValue has been deprecated. Please use getValues instead.")}),"setFilter.getUniqueValue"),!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.getUniqueValue(e)},t.prototype.getValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,Vt[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),e.prototype.destroy.call(this)},t.SELECT_ALL_VALUE="__AG_SELECT_ALL__",Wt([(0,l.cqo)("eMiniFilter")],t.prototype,"eMiniFilter",void 0),Wt([(0,l.cqo)("eFilterLoading")],t.prototype,"eFilterLoading",void 0),Wt([(0,l.cqo)("eSetFilterList")],t.prototype,"eSetFilterList",void 0),Wt([(0,l.cqo)("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),Wt([(0,l.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(l.AGU),jt=function(){function e(e){this.model=e}return e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},e.prototype.getRow=function(e){return this.model.getDisplayedValue(e)},e.prototype.isRowSelected=function(e){return this.model.isValueSelected(this.getRow(e))},e}(),Ut=function(){function e(e,t){this.model=e,this.isSelectAllSelected=t}return e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},e.prototype.getRow=function(e){return 0===e?Bt.SELECT_ALL_VALUE:this.model.getDisplayedValue(e-1)},e.prototype.isRowSelected=function(e){return 0===e?this.isSelectAllSelected():this.model.isValueSelected(this.getRow(e))},e}(),zt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ht=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},Zt=function(e){function t(){var t=e.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return t.availableValuesListenerAdded=!1,t}return zt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.init=function(e){var t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),o=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(t+" "+o("ariaFilterInput","Filter Input")).addGuiEventListener("click",(function(){return e.showParentFilter()})),this.params=e},t.prototype.onParentModelChanged=function(e){this.lastKnownModel=e,this.updateFloatingFilterText()},t.prototype.addAvailableValuesListener=function(){var e=this;this.params.parentFilterInstance((function(t){var o=t.getValueModel();o&&e.addManagedListener(o,Ft.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return e.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(){var e=this;if(this.lastKnownModel){this.availableValuesListenerAdded||this.addAvailableValuesListener();var t=this.lastKnownModel instanceof Array?this.lastKnownModel:this.lastKnownModel.values;t?this.params.parentFilterInstance((function(o){var n=o.getValueModel();if(n){var i=l._.filter(t,(function(e){return n.isValueAvailable(e)})),r=e.gridOptionsWrapper.getLocaleTextFunc(),s=l._.map(i,(function(t){var o=e.params,n=o.column,i=o.filterParams,s=e.valueFormatterService.formatValue(n,null,null,t,i.valueFormatter,!1),a=null!=s?s:t;return null==a?r("blanks",Vt.blanks):a})),a=s.length>10?s.slice(0,10).concat("..."):s,u="("+s.length+") "+a.join(",");e.eFloatingFilterText.setValue(u)}})):this.eFloatingFilterText.setValue("")}else this.eFloatingFilterText.setValue("")},Ht([(0,l.cqo)("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),Ht([(0,l.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Ht([(0,l.fsG)("columnModel")],t.prototype,"columnModel",void 0),t}(l.wA2),Kt={moduleName:l.GXE.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:Bt},{componentName:"agSetColumnFloatingFilter",componentClass:Zt}],dependantModules:[y]},qt=o(7731),Xt=o.n(qt),$t=o(2370);const Yt="__ag_sequence_column_name__",Jt=function(){return{page:$t.ZP.t("tips.page"),more:$t.ZP.t("tips.more"),to:$t.ZP.t("tips.to"),of:$t.ZP.t("tips.total"),next:$t.ZP.t("tips.next"),previous:$t.ZP.t("tips.previous"),loadingOoo:`${$t.ZP.t("tips.loading")}...`,selectAll:$t.ZP.t("tips.selectAll"),searchOoo:`${$t.ZP.t("tips.search")}...`,blanks:$t.ZP.t("tips.null"),filterOoo:`${$t.ZP.t("tips.search")}...`,applyFilter:$t.ZP.t("tips.search"),equals:$t.ZP.t("tips.equal"),notEqual:$t.ZP.t("tips.notEqual"),notContains:$t.ZP.t("tips.exclude"),lessThanOrEqual:$t.ZP.t("tips.lessThanOrEqual"),greaterThanOrEqual:$t.ZP.t("tips.greaterOrEqual"),inRange:$t.ZP.t("tips.inRange"),lessThan:$t.ZP.t("tips.lessThan"),greaterThan:$t.ZP.t("tips.greater"),contains:$t.ZP.t("tips.contain"),startsWith:$t.ZP.t("tips.startWith"),endsWith:$t.ZP.t("tips.endWith"),group:$t.ZP.t("table.currentGroup"),columns:$t.ZP.t("table.allColumns"),rowGroupColumns:$t.ZP.t("table.perspectiveColumn"),rowGroupColumnsEmptyMessage:$t.ZP.t("table.dropGroupColumnHere"),valueColumns:$t.ZP.t("table.aggregateColumn"),pivotMode:$t.ZP.t("table.perspectiveMode"),groups:$t.ZP.t("table.groupDetails"),values:$t.ZP.t("table.aggregateAnalysisValue"),pivots:$t.ZP.t("table.perspectiveColumn"),valueColumnsEmptyMessage:$t.ZP.t("table.dropAggregatedGroupColumnHere"),pivotColumnsEmptyMessage:$t.ZP.t("table.dropPerspectiveGroupColumnHere"),noRowsToShow:$t.ZP.t("tips.noData"),pinColumn:$t.ZP.t("table.pinnedColumn"),valueAggregation:$t.ZP.t("table.aggregateValue"),autosizeThiscolumn:$t.ZP.t("table.autosizeThiscolumn"),autosizeAllColumns:$t.ZP.t("table.autosizeAllColumns"),groupBy:$t.ZP.t("tips.groupBy"),ungroupBy:$t.ZP.t("tips.ungroupBy"),resetColumns:$t.ZP.t("table.resetColumns"),destroyColumnComps:$t.ZP.t("table.resetColumns"),expandAll:$t.ZP.t("tips.expandAll"),collapseAll:$t.ZP.t("tips.collapseAll"),toolPanel:$t.ZP.t("tips.toolPanel"),export:$t.ZP.t("tips.export"),csvExport:$t.ZP.t("tips.csvExport"),excelExport:$t.ZP.t("tips.excelExport"),pinLeft:$t.ZP.t("tips.pinLeft"),pinRight:$t.ZP.t("tips.pinRight"),noPin:$t.ZP.t("tips.unpin"),sum:$t.ZP.t("tips.sum"),min:$t.ZP.t("tips.minimum"),max:$t.ZP.t("tips.max"),first:$t.ZP.t("table.firstValue"),last:$t.ZP.t("table.lastValue"),none:$t.ZP.t("tips.noData"),count:$t.ZP.t("table.count"),avg:$t.ZP.t("tips.avg"),average:$t.ZP.t("tips.average"),copyWithHeaders:$t.ZP.t("table.copyWithHeaders"),copy:$t.ZP.t("tips.copy"),ctrlC:"ctrl+C",paste:$t.ZP.t("tips.paste"),ctrlV:"ctrl+V"}},Qt={hover:"ag-syman-hover",imagePreviewBox:"image-preview-box",tooltipBox:"tooltip-box",tooltipTopBox:"tooltip-top-box",textRight:"text-right",attachment:"attachment","table-cell-left":"table-cell-left","table-cell-center":"table-cell-center","table-cell-right":"table-cell-right"},eo={columnDefs:[],rowData:[],multiSortKey:"ctrl",animateRows:!0,pagination:!1,paginationPageSize:10,suppressAutoSize:!1,enableRangeSelection:!1,rowSelection:"multiple",suppressRowClickSelection:!0,quickFilterText:null,groupSelectsChildren:!1,defaultColDef:{comparator:function(){return 0},enableRowGroup:!0,enablePivot:!0,enableValue:!0,resizable:!0},enableCellChangeFlash:!0,suppressDragLeaveHidesColumns:!0,rowDragManaged:!0,rowGroupPanelShow:"onlyWhenGrouping",rowBuffer:10,rowHeight:32,enterMovesDownAfterEdit:!0,enterMovesDown:!0,localeText:Jt(),groupDefaultExpanded:1,domLayout:null,groupDisplayType:"multipleColumns",columnTypes:{NUMBER:{},STRING:{}},overlayLoadingTemplate:`<img src="${Xt()}" />`};Object.defineProperty(eo,"localeText",{get:()=>Jt()});var to=o(3986),oo=o(5813),no=o(2667),io=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.params.column.colDef.checkboxSelection?o("span",{staticClass:"ag-header-index",attrs:{title:e.params.headerName||e.params.displayName}},[e._v(e._s(e.params.headerName||e.params.displayName))]):o("div",{staticClass:"ag-cell-label-container",on:{mouseenter:e.containerMouseenter,mouseleave:e.containeroMouseleave,click:e.headerClick}},[o("span",{ref:"eMenu",staticClass:"ag-header-icon ag-header-cell-menu-button",style:e.eMenuStyle,on:{click:e.menuClick}},[o("span",{staticClass:"ag-icon ag-icon-menu"})]),e._v(" "),o("div",{ref:"eLabel",staticClass:"ag-header-cell-label",style:e.eLabelStyle,attrs:{role:"presentation"}},[o("div",{staticClass:"one-line-flow ag-header-wrap",class:[e.params.column.colDef.thAlign?"text-"+e.params.column.colDef.thAlign:""]},[o("span",{ref:"eText",staticClass:"ag-header-cell-text",attrs:{role:"columnheader",title:e.params.headerName||e.params.displayName}},[e._v("\n        "+e._s(e.params.headerName||e.params.displayName)+"\n        "),e.params.column.colDef.comment?o("i",{class:["iconfont","comment","iconios-information-circle-outline",e.cssFeatures.hover],staticStyle:{color:"orangered"},on:{mouseenter:e.commentMouseenter,mouseleave:e.commentMouseleave}}):e._e()]),e._v(" "),o("span",{ref:"eSortAsc",class:["ag-header-sort","ag-header-icon","ag-sort-ascending-icon",e.params.column.colDef.isorder&&"asc"===e.params.column.colDef.sort?"":"ag-hidden"]},[o("span",{class:"ag-icon ag-icon-asc "+e.cssFeatures.hover+" trigger-sorting"})]),e._v(" "),o("span",{ref:"eSortDesc",class:["ag-header-sort","ag-header-icon","ag-sort-descending-icon",e.params.column.colDef.isorder&&"desc"===e.params.column.colDef.sort?"":"ag-hidden"]},[o("span",{class:"ag-icon ag-icon-desc "+e.cssFeatures.hover+" trigger-sorting"})]),e._v(" "),o("span",{ref:"eSortNone",class:["ag-header-sort","ag-header-icon","ag-sort-none-icon",!e.params.column.colDef.sort&&e.params.column.colDef.isorder?"":"ag-hidden"]},[o("span",{class:"ag-icon ag-icon-none "+e.cssFeatures.hover+" trigger-sorting"})])])])])};io._withStripped=!0;const ro={hover:"ag-syman-hover",imagePreviewBox:"image-preview-box",tooltipBox:"tooltip-box",tooltipTopBox:"tooltip-top-box",textRight:"text-right",attachment:"attachment"},so={name:"AgCustomHeader",data:()=>({cssFeatures:ro}),computed:{eMenuStyle(){return"opacity: 0; "+(this.params.enableMenu?"":"display: none;")},eLabelStyle(){return""+(this.params.enableMenu?"":"width: 100%;")}},methods:{commentMouseenter(e){const{target:t}=e,o=t.getBoundingClientRect().left,n=t.getBoundingClientRect().top,{tooltipTopBox:i,column:r}=this.params;i.innerText=r.colDef.comment,i.style.display="",i.style.top=n-i.offsetHeight-7+"px",i.style.left=o-i.offsetWidth/2+"px"},commentMouseleave(){const{tooltipTopBox:e}=this.params;e.style.display="none"},containerMouseenter(){const{enableMenu:e}=this.params;e&&(this.$refs.eMenu.style.opacity=1)},containeroMouseleave(){this.$refs.eMenu.style.opacity=0},menuClick(){this.params.enableMenu&&this.params.showColumnMenu(this.$refs.eMenu)},headerClick(e){this.params.column.colDef.isorder&&e.target.getAttribute("class").indexOf("trigger-sorting")>-1&&this.params.progressSort(e.shiftKey)},onSortChanged:(0,no.Ds)((function(){const{column:e}=this.params,{eSortAsc:t,eSortDesc:o,eSortNone:n}=this.$refs,i=e.getSort();"asc"===i?t&&t.classList.remove("ag-hidden"):t&&t.classList.add("ag-hidden"),"desc"===i?o&&o.classList.remove("ag-hidden"):o&&o.classList.add("ag-hidden"),null===i&&e.colDef.isorder?n&&n.classList.remove("ag-hidden"):n&&n.classList.add("ag-hidden")}))},mounted(){const{enableSorting:e,column:t}=this.params;e&&t.addEventListener("sortChanged",this.onSortChanged)},beforeDestroy(){this.params.column.removeEventListener("sortChanged",this.onSortChanged)}};o(2186),o(510);var ao=o(1900),lo=(0,ao.Z)(so,io,[],!1,null,"432088ca",null);lo.options.__file="src/components/common-table-by-ag-grid/renderComponents/CustomHeader.vue";const uo=lo.exports;var co=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.params.renderComponent,e._g(e._b({tag:"component",attrs:{params:e.params}},"component",e.$attrs,!1),e.$listeners))};co._withStripped=!0;const po={name:"AgCellRender",inheritAttrs:!1,data:()=>({}),methods:{}};var ho=(0,ao.Z)(po,co,[],!1,null,"631a369f",null);ho.options.__file="src/components/common-table-by-ag-grid/CellRender.vue";const fo=ho.exports;function go(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function mo(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?go(Object(o),!0).forEach((function(t){vo(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):go(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function vo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const yo={name:"CellRenderByFunction",render(e){const t=mo(mo({},this.params),{},{row:this.params.data,index:this.params.rowIndex,column:this.params.colDef});return this.params.renderComponent(e,t)}};var Co=(0,ao.Z)(yo,undefined,undefined,!1,null,null,null);Co.options.__file="src/components/common-table-by-ag-grid/CellRenderByFunction.vue";const bo=Co.exports;var Eo=o(8230),_o=o(6378);function Ao(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function So(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(o),!0).forEach((function(t){Po(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ao(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Po(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}p.setLicenseKey("COGITO_SOFTWARE_Co_Ltd_on_behalf_of_FAST_FISH_(CHINA)_APPAREL_LTD._,CO_MultiApp_1Devs2_July_2019__MTU2MjAyMjAwMDAwMA==73f4b2d33a7f2bf6aca17a21940fd8ed");const Mo=document.createElement("div");Mo.classList.add(Qt.tooltipBox);const Do=document.createElement("div");Do.classList.add(Qt.tooltipTopBox),Do.classList.add("arrow-down"),Do.style.display="none";let wo=null,To=null;const Oo={name:"AgGridTable",components:{AgGridVue:s.AgGridVue,CustomHeader:uo,CellRender:fo,CellRenderByFunction:bo,TextComponent:Eo.Z,SequenceComponent:_o.Z},props:{options:{type:Object,default:()=>({})},height:{type:String},data:{default:()=>[]},columns:{default:()=>[]},renderParams:{type:Function},mode:{type:String,default:""},externalModules:{type:Array,default:()=>[]}},computed:{tableStyle(){return this.height?`height: ${this.height};`:""},gridOptions(){const e={onGridReady:this.onGridReady,getContextMenuItems:this.getContextMenuItems.bind(this),getMainMenuItems:this.getMainMenuItems.bind(this),onCellClicked:this.onCellClicked,onCellDoubleClicked:this.onCellDoubleClicked,onRowClicked:this.onRowClicked,onRowDoubleClicked:this.onRowDoubleClicked,onSelectionChanged:this.onSelectionChanged.bind(this),onSortChanged:this.onSortChanged,onVirtualColumnsChanged:this.onVirtualColumnsChanged,onColumnVisible:this.onColumnVisible,onColumnMoved:this.onColumnMoved,onColumnPinned:this.onColumnPinned,onRowDataChanged:this.onRowDataChanged,onBodyScroll:this.onBodyScroll,onFilterChanged:this.onFilterChanged,onColumnResized:this.onColumnResized,getRowClass:this.getRowClass,getRowStyle:this.getRowStyle,onGridSizeChanged:this.onGridSizeChanged},t=this.options.defaultColDef||{};return Object.assign({},eo,e,this.options,{defaultColDef:So(So({},eo.defaultColDef),t)})},realAgOptions(){const e=Object.assign({},this.gridOptions);return delete e.cssStatus,delete e.defaultSort,delete e.datas,delete e.agCellSingleClick,delete e.agCellDoubleClick,delete e.agRowClick,delete e.agRowDoubleClick,delete e.agSortChanged,delete e.agColumnVisibleChanged,delete e.agSelectionChanged,delete e.agColumnMoved,delete e.agColumnPinned,e}},watch:{data:{handler(e){(0,oo.kJ)(e)&&this._gridReady&&this.$nextTick((()=>{this.setRows(e)}))}},columns:{handler(e){(0,oo.kJ)(e)&&this._gridReady&&this.setCols(e)}}},data(){return{api:null,columnApi:null,subtotalRowData:null,fullRangeSubTotalRowData:null,realRows:[],realColumns:[],modules:[a.I,it,Dt,It,Kt,...this.externalModules]}},methods:{onGridReady(e){this.api=e.api,this.columnApi=e.columnApi,this._gridReady=!0;const t=this.$refs.table.$el,o=this.$refs.tableContainer;setTimeout((()=>{this._horizontalScrollTo(t.querySelector(".ag-body-viewport"),o.getAttribute("data-scroll-left")),this._autoSizeColumns()}),20),t.appendChild(Mo),document.body.appendChild(Do),(0,oo.kJ)(this.columns)&&this.columns.length>0&&(this.setCols(this.columns),(0,oo.kJ)(this.data)&&this.data.length>0&&this.$nextTick((()=>{this.setRows(this.data)}))),this.$emit("grid-ready",e)},onGridSizeChanged(e){this.$emit("on-grid-size-changed",e),setTimeout((()=>{const{clientWidth:t}=e;t!==this._tableWidthCache&&(this._tableWidthCache=t,this._resetColumnWidth())}),200)},setRows(e){const t=this.$refs.table;if(!e)return t;if(!(0,oo.kJ)(e))return alert("agTable.setRows requires Array as first param"),t;const{rowData:o,pinnedBottomRowData:n}=this._transformRowData(e),i=this.options.datas&&this.options.datas.start||0;return o.forEach(((e,t)=>{e[Yt]={val:i+(t+1)}})),this._pinnedBottomRowData=n,this.realRows=o,this.api.setRowData(o),this.api.setPinnedBottomRowData(n),this._fixAgRenderChoke(),this.api.hideOverlay(),t},setCols(e){const t=this.$refs.table;if(!e)return t;if(!(0,oo.kJ)(e))return alert("agTable.setCols requires Array as first param"),t;this._colPosition="",this._originColumnDefs=e;const o=this.gridOptions,n=o.datas&&o.datas.colPosition||"";let i;return n&&""!==n?i=this._getSortedData(e,n):(this.options.datas&&this.options.datas.pinnedColumns&&this._sortPinnedColumns(e),i=e),this.realColumns=this._transformColumnDefs(i),this.api.setColumnDefs(this.realColumns),setTimeout((()=>{this._autoSizeColumns()}),20),t},getContextMenuItems(e){return["copy","copyWithHeaders","paste",{name:this.$t("table.showAllColumns"),action:()=>{const t=this.options;e.columnApi.setColumnsVisible(e.columnApi.getColumnState().map((e=>e.colId)),!0),setTimeout((()=>{wo&&clearTimeout(wo)}),0),this._colPosition&&""!==this._colPosition&&(this._colPosition.split(",").forEach(((t,o)=>{e.columnApi.moveColumn(t,o)})),setTimeout((()=>{To&&clearTimeout(To)}),0)),(0,no.mf)(t.agColumnVisibleChanged)&&(this._preventPinnedEmit=!0,t.agColumnVisibleChanged("",(()=>{this._preventPinnedEmit=!1})))}}]},getMainMenuItems(e){return["pinSubMenu","separator","autoSizeThis","autoSizeAll","separator",{name:this.$t("table.hideCurrentColumn"),action:()=>{const{columnApi:t,column:o}=e;t.setColumnVisible(o.colId,!1)}},{name:this.$t("table.resetColumns"),action:()=>{this._isResetAllColumn=!0;const t=this.options,o=[];this._originColumnDefs.map((e=>e.colname||e.field)).forEach((t=>{const n=e.columnApi.getColumn(t);n&&n.visible&&o.push(t)})),o.forEach(((t,o)=>{e.columnApi.moveColumn(t,o)}));const n=this.options.datas&&this.options.datas.pinnedColumns||"",{pinnedLeftColumns:i,pinnedRightColumns:r}=this._getPinnedColumns(n);e.columnApi.getDisplayedLeftColumns().map((e=>e.colId)).concat(e.columnApi.getDisplayedRightColumns().map((e=>e.colId))).forEach((t=>{"ID"===t||i.includes(t)||r.includes(t)||e.columnApi.setColumnPinned(t,!1)})),setTimeout((()=>{To&&clearTimeout(To)}),0),this._colPosition="",(0,no.mf)(t.agColumnMoved)&&t.agColumnMoved(""),(0,no.mf)(t.agColumnPinned)&&t.agColumnPinned("ID|"),setTimeout((()=>{this._isResetAllColumn=!1}),500)}}]},onCellClicked(e){const{colDef:t,data:o,event:n}=e,{__ag_is_statistic_row__:i}=o,r=this.options;(0,no.mf)(r.agCellSingleClick)&&!i&&r.agCellSingleClick(t,o,n.target),this.$emit("on-cell-single-click",e)},onCellDoubleClicked(e){const{colDef:t,data:o,event:n}=e,{__ag_is_statistic_row__:i}=o,r=this.options;(0,no.mf)(r.agCellDoubleClick)&&!i&&r.agCellDoubleClick(t,o,n.target),this.$emit("on-cell-double-click",e)},onRowClicked(e){const{colDef:t,data:o,event:n}=e,{__ag_is_statistic_row__:i}=o,r=this.options;(0,no.mf)(r.agRowClick)&&!i&&r.agRowClick(t,o,n.target),this.$emit("on-row-click",e)},onRowDoubleClicked(e){const{colDef:t,data:o,event:n}=e,{__ag_is_statistic_row__:i}=o,r=this.options;(0,no.mf)(r.agRowDoubleClick)&&!i&&r.agRowDoubleClick(t,o,n.target),this.$emit("on-row-dblclick",e)},onSelectionChanged(e){const t=this.options,o=[],n=[];e.api.getSelectedRows().forEach((e=>{const{val:t}=e.ID;t!==this.$t("tips.summation")&&t!==this.$t("tips.total")&&(o.push(t),n.push(e))})),(0,no.mf)(t.agSelectionChanged)&&t.agSelectionChanged(o,n),this.$emit("on-selection-change",n)},onSortChanged(e){const{api:t}=e,o=this.options,n=t.getSortModel();0!==n.length&&(t.showLoadingOverlay(),(0,no.mf)(o.agSortChanged)||this.handleSort(n[0]),this.$emit("on-sort-change",n),t.hideOverlay()),(0,no.mf)(o.agSortChanged)&&o.agSortChanged(n)},handleSort(e){const t=e.colId,o=this.data;let n=[];n="desc"===e.sort?o.sort(((e,o)=>"string"==typeof e[t]||"string"==typeof o[t]?String(e[t])>String(o[t])?-1:1:o[t]-e[t])):o.sort(((e,o)=>"string"==typeof e[t]||"string"==typeof o[t]?String(e[t])<String(o[t])?-1:1:e[t]-o[t])),this.columns.forEach((o=>{o.sort&&(o.sort=null),o.field===t&&(o.sort=e.sort)})),this.api.setColumnDefs(this._transformColumnDefs(this.columns))},onVirtualColumnsChanged(e){},onColumnVisible(e){const t=this.options;wo&&clearTimeout(wo),wo=setTimeout((()=>{if((0,no.mf)(t.agColumnVisibleChanged)){const o=[];e.columnApi.getColumnState().forEach((e=>{e.hide&&o.push(e.colId)})),t.agColumnVisibleChanged(o.toString(),e)}}),10),this.$emit("on-column-visible",e)},onColumnMoved(e){const{columnApi:t}=e,o=this.options;To&&clearTimeout(To),To=setTimeout((()=>{if((0,no.mf)(o.agColumnMoved)){const e=t.getColumnState().map((e=>e.colId)),n=[],i=o.datas&&o.datas.hideColumn&&""!==o.datas.hideColumn?o.datas.hideColumn.split(","):[];e.forEach((e=>{-1===i.indexOf(e)&&"ID"!==e&&n.push(e)})),this._colPosition=["ID"].concat(n).toString(),o.agColumnMoved(["ID"].concat(n).toString())}}),500),this.$emit("on-column-moved",e)},onColumnPinned(e){const t=this.options,o=e.columnApi.getDisplayedLeftColumns().map((e=>e.colId)),n=e.columnApi.getDisplayedRightColumns().map((e=>e.colId)),i=`${o.join(",")}|${n.join(",")}`;if((0,no.mf)(t.agColumnPinned)){if(!this._isResetAllColumn&&null===e.pinned){const o=e.columnApi.getColumnState().map((e=>e.colId)),n=[],i=t.datas&&t.datas.hideColumn&&""!==t.datas.hideColumn?t.datas.hideColumn.split(","):[];o.forEach((t=>{-1===i.indexOf(t)&&t!==e.column.colId&&"ID"!==t&&n.push(t)})),this._colPosition=["ID"].concat([e.column.colId].concat(n)).toString(),setTimeout((()=>{this._colPosition.split(",").forEach(((t,o)=>{e.columnApi.moveColumn(t,o)}))}),48),t.agColumnMoved&&t.agColumnMoved(["ID"].concat([e.column.colId].concat(n)).toString())}this._preventPinnedEmit||t.agColumnPinned(i)}this.$emit("on-column-pinned",e)},onRowDataChanged(e){this.$emit("row-data-changed",e)},onBodyScroll(e){this.$emit("on-body-scroll",e)},getRowStyle(e){const{rowHeight:t}=this.gridOptions;return t?{lineHeight:`${t}px`}:{lineHeight:"28px"}},getRowClass(e){let t="";const{data:o}=e,n=this.options;return n.cssStatus&&n.cssStatus.forEach((e=>{if(o&&this._zhColumnNameMap[e.desc]){const n=this._zhColumnNameMap[e.desc],i=o[n].val;t+=`${e.css[e.value.indexOf(i)]||""} `||" "}})),t},onFilterChanged(e){this.$emit("on-filter-changed",e);const{api:t,columnApi:o}=e,n=this.options.datas;if(!n)return;const{isFullRangeSubTotalEnabled:i,isSubTotalEnabled:r,fullRangeSubTotalRow:s,subtotalRow:a}=n;if(!i&&!r)return;const l=t.getModel().rowsToDisplay.map((e=>e.data));if(r||i){const e=this._getSumOfEachColumn(Object.keys(a),l);Object.keys(e).forEach((t=>{const o=e[t];this.subtotalRowData[t].val=o.replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")}))}const u=[];r&&u.push(this.subtotalRowData),i&&u.push(this.fullRangeSubTotalRowData),u.length>0&&t.setPinnedBottomRowData(u)},onColumnResized(e){this.$emit("on-column-resized",e)},_fixAgRenderChoke(){const e=this.$refs.table,t=document.querySelector(".ag-body-viewport");if(t){const e=t.scrollLeft;t.scrollTop=5,t.scrollLeft=1,setTimeout((()=>{t.scrollTop=0,t.scrollLeft=e||0,this._resetColumnWidth()}),100)}return e},_getPinnedColumns(e){let t=[],o=[];if(e){const n=e.split("|");t=n[0].split(","),n[1]&&(o=n[1].split(","))}return{pinnedLeftColumns:t,pinnedRightColumns:o}},_sortPinnedColumns(e){const{pinnedLeftColumns:t,pinnedRightColumns:o}=this._getPinnedColumns(this.options.datas.pinnedColumns);let n=0,i=Math.max(e.length-1,0);const r=(0,to.Z)(e);for(let s=0;s<e.length;s++){if(s>i)return;const e=r[s],a=e;(t.includes(e.colname)||"ID"===e.colname)&&(r.splice(s,1),r.splice(n,0,a),n++),o.includes(e.colname)&&(r.splice(s,1),r.splice(i,0,a),i--)}e.forEach(((t,o)=>{e[o]=r[o]}))},_getSortedData(e,t){this._colPosition=t;const o=t.split(","),n=[],i=[],r={};return e.forEach((e=>{r[e.colname]=e,-1===o.indexOf(e.colname)&&i.push(e)})),o.forEach((e=>{r[e]&&n.push(r[e])})),this.options.datas&&this.options.datas.pinnedColumns&&this._sortPinnedColumns(n),n.concat(i)},_transformColumnDefs(e){const t=this.$refs.table,o=this.gridOptions,n=this;let i=[];o&&o.datas&&o.datas.hideColumn&&(i=(0,to.Z)(o.datas.hideColumn.split(",")));const r={};o&&o.datas&&o.datas.ordids&&(0,oo.kJ)(o.datas.ordids)&&o.datas.ordids.forEach((e=>{"ID"!==e.colname&&(r[e.colname]=e.ordasc?"asc":"desc")}));const s={generalMenuTab:!o||!o.generalMenuTab||o.generalMenuTab,filterMenuTab:!o||!o.filterMenuTab||o.filterMenuTab,columnsMenuTab:!o||!o.columnsMenuTab||o.columnsMenuTab},a=[];["generalMenuTab","filterMenuTab","columnsMenuTab"].forEach((e=>{s[e]&&a.push(e)}));return e.map((e=>{"headerName"===e.colname&&alert(`headerName : ${this.$t("table.columnNameConflict")}`),"field"===e.colname&&alert(`field : ${this.$t("table.columnNameConflict")}`);const s=(0,to.Z)(e);s._index=e._index,s.headerName="ID"===e.colname?this.$t("tips.index"):e.headerName||e.name,s.lockVisible=e.lockVisible||"ID"===e.colname,s.suppressToolPanel=e.suppressToolPanel||"ID"===e.colname,s.pinned=e.pinned||("ID"===e.colname?"left":e.pinned),s.maxWidth=e.maxWidth||("ID"===e.colname?80:null),s.width=e.width||(e.webconf&&e.webconf.standard_width?Number(e.webconf.standard_width):null),s.width&&(s.maxWidth=s.width,s.minWidth=s.width),s.suppressResize=e.suppressResize||"ID"===e.colname,s.suppressMovable=e.suppressMovable||"ID"===e.colname,s.lockPinned=e.lockPinned||!0,s.lockPosition=e.lockPosition||"ID"===e.colanme,s.headerComponentFramework=e.headerComponentFramework||(o&&o.useDefaultHeader?null:"CustomHeader"),s.headerComponentParams=e.headerComponentParams||{agGridDiv:t.$el,tooltipBox:Mo,tooltipTopBox:Do},s.field=s.field?s.field:`${e.colname}.val`,"ID"===s.colname&&(s.field=`${Yt}.val`),s.colId=e.colId||e.colname||e.field,s.sort=e.sort||r[e.colname],s.filter=e.filter||e.isagfilter,"FUZZY"===e.agfilter&&e.isagfilter&&(s.filter="agTextColumnFilter");const a=this.renderParams&&this.renderParams(s)||{},l=e.cellRendererFramework||(a.renderContainer?a.renderContainer:"CellRender"),u=e.cellRendererParams||So({renderComponent:Eo.Z,agGridDiv:t.$el,options:o,tooltipBox:Mo,tooltipTopBox:Do,failIds:this._getFailIds(),mode:this.mode,$t:this.$t},a);return s.cellRendererSelector=e=>{const t={component:l,params:So(So({},u),{},{renderComponent:"ID"===e.colDef.colname?_o.Z:u.renderComponent})},o=e.data[Yt]&&e.data[Yt].val;return o===this.$t("tips.summation")||o===this.$t("tips.total")?{component:"CellRender",params:So(So(So({},u),e),{},{renderComponent:Eo.Z})}:t},s.sortingOrder=e.sortingOrder||(s.isorder?["asc","desc"]:[null]),s.unSortIcon=e.unSortIcon||s.isorder,s.hide=e.hide||i.includes(s.colname),s.suppressMenu=e.suppressMenu||"ID"===e.colname,s.checkboxSelection="ID"===e.colname?function(e){return 0===e.columnApi.getRowGroupColumns().length&&e.data.ID&&e.data.ID.val!==n.$t("tips.summation")&&e.data.ID.val!==n.$t("tips.total")}:e.checkboxSelection,s.headerCheckboxSelection="ID"===e.colname?function(e){return 0===e.columnApi.getRowGroupColumns().length}:e.checkboxSelection,s.headerCheckboxSelectionFilteredOnly=e.headerCheckboxSelectionFilteredOnly||"ID"===e.colname,s.cellClass=e.cellClass||function(e){const{colDef:t}=e,{colId:o,align:n,tdAlign:i}=t;return"ID"===o?null:Qt[`table-cell-${i||n||"center"}`]},this._zhColumnNameMap[s.headerName]=e.colname,s}))},_transformRowData(e){const t=this.gridOptions,o=t.datas&&t.datas.ids||"",n={};let i=[];(0,oo.kJ)(o)&&o.length>0?(o.forEach(((e,t)=>{n[e]=parseInt(t+1,10)})),i=e.concat([]).sort(((e,t)=>(n[e.ID.val]||1/0)-(n[t.ID.val]||1/0)))):i=e;const r=[];let s=null,a=null,l=null,u=null;if(t.datas){const{datas:e}=t;s=e.fullRangeSubTotalRow,a=e.isFullRangeSubTotalEnabled,l=e.isSubTotalEnabled,u=e.subtotalRow}if(l&&(this.subtotalRowData=this._dealWithSubTotalRow(u),r.push(this.subtotalRowData)),a&&s&&(this.fullRangeSubTotalRowData=this._dealWithFullRangeSubTotalRow(s),r.push(this.fullRangeSubTotalRowData)),"commonTable"===this.mode)for(let e of r){let t=e.__ag_is_statistic_row__;for(const t in e)e[t]=e[t].val;e[Yt]={val:e.ID},e.__ag_is_statistic_row__=t}return{rowData:i,pinnedBottomRowData:r}},_dealWithFullRangeSubTotalRow(e){const t={};return this.columnApi.getAllColumns().forEach((o=>{const{colname:n}=o.colDef;t[n]={val:"ID"===n?this.$t("tips.total"):e[n]?e[n].val:""}})),"{}"!==JSON.stringify(e)&&(t.__ag_is_statistic_row__=!0),t[Yt]={},t[Yt].val=this.$t("tips.total"),t},_getSumOfEachColumn(e,t){const o={};let n=0;return e.forEach((e=>{const i=this.columnApi.getAllColumns().find((t=>t.colId===e)).colDef.scale||0;n=t.reduce(((t,o)=>{const n=o[e].val||0;return t+Number(n)}),0),n=n.toFixed(i),o[e]=n})),o},_dealWithSubTotalRow(e){const t={};return this.columnApi.getAllColumns().forEach((o=>{const{colname:n}=o.colDef;t[n]={val:"ID"===n?this.$t("tips.summation"):e[n]||""}})),t.__ag_is_statistic_row__=!0,t[Yt]={},t[Yt].val=this.$t("tips.summation"),t},_getFailIds(){const e=this.gridOptions,t=[];if(e&&e.datas&&e.datas.deleteFailInfo&&(0,oo.kJ)(e.datas.deleteFailInfo))return e.datas.deleteFailInfo.forEach((e=>{e.objid&&""!==e.objid&&t.push(`${e.objid}`)})),t},_horizontalScrollTo(e,t){e.scrollLeft=parseFloat(t),this._autoSizeColumns()},_resetHeaderPosition(){const e=this.$refs.tableContainer;if(e){e.querySelector(".ag-header-container").style.left=0}},_autoSizeColumns(){if(!(this._isActive&&this.$refs.table&&this.api&&this.columnApi))return;let e,t;const o=this.$refs.table.$el;0===this.data.length?(e=o.querySelector(".ag-header-viewport"),t=o.querySelector(".ag-header-container>.ag-header-row")):(e=o.querySelector(".ag-center-cols-clipper"),t=o.querySelector(".ag-center-cols-container"));let n=e.clientWidth,i=t.clientWidth;if(0===i&&0===n){if(0===this._viewportWidth&&0===this._containerWidth)return;n=this._viewportWidth,i=this._containerWidth}this._viewportWidth=n,this._containerWidth=i,i<=n?this.api.sizeColumnsToFit():this.columnApi.autoSizeAllColumns()},_resetColumnWidth(e){this._autoSizeColumns(),setTimeout((()=>{this._autoSizeColumns(),e&&e()}),200)}},beforeCreate(){this.$t=$t.ZP.t.bind($t.ZP)},created(){this._zhColumnNameMap={},this._colPosition="",this._originColumnDefs=null,this._preventPinnedEmit=null,this._isResetAllColumn=!1,this._pinnedBottomRowData=null,this._gridReady=!1,this._tableWidthCache=0,this._viewportWidth=0,this._containerWidth=0,this._isActive=!0},mounted(){},activated(){this._isActive=!0,this.$nextTick((()=>{setTimeout((()=>{(0,oo.kJ)(this.data)&&this.data.length>0&&this._resetColumnWidth(this._resetHeaderPosition)}),500)}))},deactivated(){this._isActive=!1}};o(99),o(4197);var Go=(0,ao.Z)(Oo,n,[],!1,null,"450dafab",null);Go.options.__file="src/components/common-table-by-ag-grid/AgGridTable.vue";const Io=Go.exports}}]);
//# sourceMappingURL=15.ark.bcl.min.js.map